(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5486],{53502:function(e,s,a){Promise.resolve().then(a.bind(a,72274))},72274:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return q}});var t=a(57437),n=a(2265),r=a(33145),l=a(68575),i=a(61796),c=a(27648),d=a(99376),o=a(80461),m=a(16262),h=a(44986),u=a(43335),f=a(81475),x=a(16942),p=a(74376),j=a(99049),v=a(87928),g=a(29935),y=a(63390),b=a(35979),N=a(78968),k=a(3683),w=a(94508),Z=a(62869);function S(e){let{open:s,onClose:a}=e,r=(0,d.useRouter)(),[S,z]=(0,n.useState)(!1),C=(0,l.v9)(i.HF),[M]=(0,m._y)(),A=C?"".concat(C.fname," ").concat(C.lname):"Staff Member",E=()=>{z(!0),a()},_=(0,d.usePathname)(),q=e=>_===e,D=!!((null==C?void 0:C.role)==="admin"||(null==C?void 0:C.role)==="super-admin"||Array.isArray(null==C?void 0:C.roles)&&C.roles.includes("admin"))||!!Array.isArray(null==C?void 0:C.exeat_roles)&&C.exeat_roles.some(e=>{var s,a,t;return(null==e?void 0:null===(s=e.role)||void 0===s?void 0:s.name)==="admin"||(null==e?void 0:null===(t=e.role)||void 0===t?void 0:null===(a=t.display_name)||void 0===a?void 0:a.toLowerCase())==="super admin"}),F=e=>{let{href:s,icon:n,children:r}=e,l=q(s);return(0,t.jsx)(c.default,{href:s,className:"w-full my-2",onClick:()=>{window.innerWidth<1024&&a()},children:(0,t.jsxs)(Z.z,{variant:"ghost",className:(0,w.cn)("w-full justify-start",l&&"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground"),children:[(0,t.jsx)(n,{className:"mr-2 h-4 w-4"}),r]})})};return(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-30 lg:hidden",onClick:a}),(0,t.jsxs)("aside",{className:(0,w.cn)("fixed top-[116px] md:top-14 left-0 z-40 w-[280px] h-[calc(100vh-6.5rem)] md:h-[calc(100vh-3rem)]","bg-white border-r border-border","transition-all duration-300 ease-in-out",!s&&"-translate-x-full","lg:translate-x-0"),children:[s&&(0,t.jsx)("div",{className:"absolute -right-12 top-3 lg:hidden",children:(0,t.jsx)(Z.z,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-full bg-white shadow-md border-border",onClick:a,children:(0,t.jsx)(h.Z,{className:"h-4 w-4"})})}),(0,t.jsx)("nav",{className:"p-2 overflow-y-auto h-[calc(100%-4rem)]",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(F,{href:"/staff/dashboard",icon:u.Z,children:"Dashboard"}),(0,t.jsx)(F,{href:"/staff/pending",icon:f.Z,children:"Pending Exeats"}),(0,t.jsx)(F,{href:"/staff/history",icon:x.Z,children:"Completed Exeats"}),(0,t.jsx)(F,{href:"/staff/rejected",icon:p.Z,children:"Rejected Exeats"}),D&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground px-2 mb-2 uppercase tracking-wide",children:"Administration"})}),(0,t.jsx)(F,{href:"/staff/admin",icon:j.Z,children:"Admin Dashboard"}),(0,t.jsx)(F,{href:"/staff/admin/exeats/create",icon:v.Z,children:"Apply Exeat For Student"}),(0,t.jsx)(F,{href:"/staff/admin/hostel-assignments",icon:g.Z,children:"Hostel Assignments"}),(0,t.jsx)(F,{href:"/staff/admin/student-debts",icon:y.Z,children:"Student Debts"}),(0,t.jsx)(F,{href:"/staff/assign-exeat-role",icon:b.Z,children:"Assign Exeat Role"}),(0,t.jsx)(F,{href:"/staff/admin/audit-trail",icon:x.Z,children:"Audit Trail"})]}),(0,t.jsxs)("div",{className:"pt-4 mt-4 border-t",children:[(0,t.jsx)(F,{href:"/staff/profile",icon:N.Z,children:"Profile"}),(0,t.jsxs)(Z.z,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{E(),window.innerWidth<1024&&a()},children:[(0,t.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})})]}),(0,t.jsx)(o.Z,{isOpen:S,onClose:()=>z(!1),userName:A||"User",onLogoutSuccess:()=>{r.replace("/login")}})]})}var z=a(96818),C=a(23818),M=a(67350),A=a(84190),E=a(16831);function _(e){var s,a;let{onMenuClick:c}=e,[m,h]=(0,n.useState)(!1),u=(0,l.v9)(i.HF),f=(0,d.useRouter)(),x=u?"".concat(u.fname," ").concat(u.lname):"Staff Member",p=u?"".concat((null===(s=u.fname)||void 0===s?void 0:s[0])||"").concat((null===(a=u.lname)||void 0===a?void 0:a[0])||"").toUpperCase():"ST",j=(null==u?void 0:u.passport)?"data:image/jpeg;base64,".concat(u.passport):"",[v,g]=(0,n.useState)(""),y=e=>{e.preventDefault();let s=v.trim();s&&(f.push("/staff/search?student_id=".concat(encodeURIComponent(s))),g(""))};return(0,t.jsxs)("header",{className:"fixed top-0 z-50 w-full border-b bg-white",children:[(0,t.jsxs)("div",{className:"flex h-14 items-center px-4 lg:px-6",children:[(0,t.jsxs)(Z.z,{variant:"ghost",size:"icon",className:"lg:hidden mr-2",onClick:c,children:[(0,t.jsx)(z.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle menu"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.default,{src:"/veritas-logo.png",alt:"Veritas University Logo",width:28,height:28,className:"object-contain",priority:!0}),(0,t.jsx)("span",{className:"hidden lg:inline-block text-lg font-semibold text-primary",children:"Veritas University"})]}),(0,t.jsx)("div",{className:"hidden lg:block h-4 w-px bg-border mx-2"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"Digital Exeat System - Staff"})]}),(0,t.jsxs)("form",{onSubmit:y,className:"hidden lg:flex items-center gap-2 mr-2 w-[350px] flex-none",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(C.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)("input",{value:v,onChange:e=>g(e.target.value),inputMode:"numeric",placeholder:"Search by Student ID",className:"w-full pl-9 pr-3 py-2 h-9 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/40"})]}),(0,t.jsx)(Z.z,{type:"submit",size:"sm",disabled:!v,children:"Go"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"hidden sm:block text-sm text-muted-foreground",children:["Welcome, ",(null==u?void 0:u.fname)||"Staff"]}),(0,t.jsxs)(A.h_,{children:[(0,t.jsx)(A.$F,{asChild:!0,children:(0,t.jsx)(Z.z,{variant:"ghost",size:"icon",className:"relative size-12 rounded-full",children:(0,t.jsxs)(E.qE,{className:"size-12",children:[(0,t.jsx)(E.F$,{src:j,alt:u?"".concat(u.fname," ").concat(u.lname):"User avatar"}),(0,t.jsx)(E.Q5,{className:"bg-primary/10 text-primary",children:p})]})})}),(0,t.jsxs)(A.AW,{className:"w-56",align:"end",children:[(0,t.jsx)(A.Ju,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:x}),(0,t.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:null==u?void 0:u.email})]})}),(0,t.jsx)(A.VD,{}),(0,t.jsxs)(A.Qk,{children:[(0,t.jsx)(A.Xi,{asChild:!0,children:(0,t.jsxs)("a",{href:"/staff/profile",className:"cursor-pointer",children:[(0,t.jsx)(M.Z,{className:"mr-2 h-4 w-4"}),"Profile"]})}),(0,t.jsxs)(A.Xi,{className:"text-destructive focus:text-destructive",onClick:()=>{h(!0)},children:[(0,t.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]})]}),(0,t.jsx)("div",{className:"md:hidden px-4 pb-3",children:(0,t.jsxs)("form",{onSubmit:y,className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(C.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)("input",{value:v,onChange:e=>g(e.target.value),inputMode:"numeric",placeholder:"Search by Student ID",className:"w-full pl-9 pr-3 py-2 h-10 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/40"})]}),(0,t.jsx)(Z.z,{type:"submit",size:"sm",disabled:!v,children:"Go"})]})}),(0,t.jsx)(o.Z,{isOpen:m,onClose:()=>h(!1),userName:x,onLogoutSuccess:()=>{f.replace("/login")}})]})}function q(e){let{children:s}=e,[a,c]=(0,n.useState)(!1),d=(0,l.v9)(i.HF),[o,m]=(0,n.useState)({fname:"",lname:"",email:"",image:""}),[h,u]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{if(d)m({fname:d.fname||"",lname:d.lname||"",email:d.email||"",image:d.passport||""}),u(!1);else try{let e=localStorage.getItem("user");if(e){let s=JSON.parse(e);m({fname:s.fname||"",lname:s.lname||"",email:s.email||"",image:s.passport||s.image||""})}}catch(e){console.error("Error loading user data:",e)}finally{u(!1)}},[d]),h)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/20 backdrop-blur-sm flex flex-col items-center justify-center space-y-4 pointer-events-none",children:[(0,t.jsxs)("div",{className:"relative w-16 h-16",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-t-indigo-600 border-r-transparent border-b-transparent border-l-transparent animate-spin"}),(0,t.jsx)("div",{className:"absolute inset-1 flex items-center justify-center",children:(0,t.jsx)(r.default,{src:"/vicon.png",alt:"Loading",width:32,height:32,className:"object-contain"})})]}),(0,t.jsx)("p",{className:"text-white text-base font-medium drop-shadow",children:"Loading..."})]}):(0,t.jsx)("div",{className:"h-screen bg-gray-100 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)(_,{onMenuClick:()=>c(!0)}),(0,t.jsxs)("div",{className:"flex flex-1 relative overflow-hidden pt-[116px] md:pt-14",children:[(0,t.jsx)(S,{open:a,onClose:()=>c(!1)}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 lg:ml-[280px] bg-gray-100",children:s})]})]})})}},29935:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},74376:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},81475:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},99049:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},23818:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},35979:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]])}},function(e){e.O(0,[2915,3557,3448,5844,9049,2061,9923,3145,5359,4273,9585,2971,2117,1744],function(){return e(e.s=53502)}),_N_E=e.O()}]);