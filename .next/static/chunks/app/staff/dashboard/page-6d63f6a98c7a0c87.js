(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8346],{22074:function(e,t,r){Promise.resolve().then(r.bind(r,87194))},87194:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var a=r(57437),s=r(34324),n=r(2265),i=r(63645),o=r(66070),l=r(93022),d=r(27648),u=r(81475),c=r(16942),f=r(74376),m=r(59701);let p=(0,r(96471).Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var h=r(29935),x=r(35979),g=r(59133),y=r(40339),v=r(36086),q=r(91230),b=()=>{let{profile:e,profileLoading:t,allRoles:r}=(0,i.iy)(),s=(0,n.useMemo)(()=>[{title:"Pending Requests",description:"Review and approve pending exeat requests",icon:u.Z,href:"/staff/pending",roles:["dean","secretary","hostel_admin","security","admin"],color:"border-l-yellow-500"},{title:"Request History",description:"View completed and processed requests",icon:c.Z,href:"/staff/history",roles:["dean","secretary","hostel_admin","security","admin"],color:"border-l-green-500"},{title:"Rejected Requests",description:"View all rejected exeat requests",icon:f.Z,href:"/staff/rejected",roles:["dean","secretary","hostel_admin","security","admin"],color:"border-l-red-500"},{title:"Admin Dashboard",description:"Analytics, reports, and system overview",icon:m.Z,href:"/staff/admin",roles:["admin"],color:"border-l-purple-500"},{title:"Student Debts",description:"Manage and clear student debts",icon:p,href:"/staff/admin/student-debts",roles:["admin"],color:"border-l-orange-500"},{title:"Hostel Assignments",description:"Manage hostel staff assignments",icon:h.Z,href:"/staff/admin/hostel-assignments",roles:["admin"],color:"border-l-indigo-500"},{title:"Assign Roles",description:"Assign exeat roles to staff members",icon:x.Z,href:"/staff/assign-exeat-role",roles:["admin"],color:"border-l-pink-500"},{title:"Analytics",description:"View detailed analytics and insights",icon:m.Z,href:"/staff/admin/analytics",roles:["admin"],color:"border-l-cyan-500"},{title:"Audit Trail",description:"System activity logs and audit trail",icon:g.Z,href:"/staff/admin/audit-trail",roles:["admin"],color:"border-l-teal-500"},{title:"Settings",description:"System settings and configurations",icon:y.Z,href:"/staff/admin/settings",roles:["admin"],color:"border-l-gray-500"}],[]),b=(0,n.useMemo)(()=>r&&0!==r.length?r.map(e=>e.name):[],[r]),j=b.includes("admin"),w=(0,n.useMemo)(()=>s.filter(e=>e.roles.some(e=>b.includes(e)||j)),[s,b,j]);return t?(0,a.jsxs)("div",{className:"space-y-6 p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(l.O,{className:"h-8 w-64"}),(0,a.jsx)(l.O,{className:"h-4 w-48"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)(l.O,{className:"h-6 w-24 rounded-full"}),(0,a.jsx)(l.O,{className:"h-6 w-24 rounded-full"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.O,{className:"h-6 w-32 mb-4"}),(0,a.jsx)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(6)].map((e,t)=>(0,a.jsx)(l.O,{className:"h-32"},t))})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Staff Dashboard"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Welcome back, ",(0,a.jsxs)("span",{className:"font-medium",children:[null==e?void 0:e.fname," ",null==e?void 0:e.lname]})]}),b.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary",children:[(0,a.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),e.replace("_"," ").toUpperCase()]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),(0,a.jsx)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:w.map((e,t)=>{let r=e.icon;return(0,a.jsx)(d.default,{href:e.href,children:(0,a.jsx)(o.Zb,{className:"h-full transition-all duration-200 hover:shadow-lg hover:scale-105 cursor-pointer border-l-4 ".concat(e.color),children:(0,a.jsxs)(o.Ol,{className:"pb-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,a.jsx)(r,{className:"h-5 w-5 text-primary"})}),(0,a.jsx)(q.Z,{className:"h-4 w-4 text-muted-foreground transition-transform group-hover:translate-x-1"})]}),(0,a.jsx)(o.ll,{className:"text-base mt-3",children:e.title}),(0,a.jsx)(o.SZ,{className:"text-xs line-clamp-2",children:e.description})]})})},t)})})]}),0===w.length&&(0,a.jsx)(o.Zb,{className:"border-yellow-500/50 bg-yellow-50 dark:bg-yellow-950/20",children:(0,a.jsx)(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-500/10 rounded-lg",children:(0,a.jsx)(v.Z,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-1",children:"No Roles Assigned"}),(0,a.jsx)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"You don't have any exeat roles assigned yet. Please contact an administrator to get access to the system."})]})]})})})]})};function j(){return(0,a.jsx)(s.i,{requiredRole:"staff",children:(0,a.jsx)("div",{className:"w-full p-4 h-full",children:(0,a.jsx)(b,{})})})}},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return u},ll:function(){return l}});var a=r(57437),s=r(2265),n=r(94508);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});u.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},46144:function(e,t,r){"use strict";r.d(t,{h:function(){return l}});var a=r(79523),s=r(23557);let n=e=>e().auth.token,i=(0,a.ni)({baseUrl:"https://attendance.veritas.edu.ng/api",prepareHeaders:(e,t)=>{let{getState:r}=t,a=n(r);return a&&e.set("Authorization","Bearer ".concat(a)),e.set("Content-Type","application/json"),e.set("Accept","application/json"),e}}),o=async(e,t,r)=>{let a=await i(e,t,r);return a.error&&401===a.error.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login")),a},l=(0,s.LC)({reducerPath:"api",baseQuery:o,tagTypes:["Profile","ExeatCategories","ExeatRequests","ExeatRoles","Staff","ExeatRequests","DashboardStats","Admin","StudentDebts"],endpoints:()=>({})})},28233:function(e,t,r){"use strict";r.d(t,{CD:function(){return q},Og:function(){return u},RX:function(){return h},Rk:function(){return o},Sr:function(){return s},Tq:function(){return c},Vm:function(){return l},b:function(){return a},cu:function(){return n},js:function(){return x},mM:function(){return v},oZ:function(){return p},s$:function(){return f},ui:function(){return y},vN:function(){return i},w9:function(){return m},xA:function(){return b},yH:function(){return d}});let{useGetStaffProfileQuery:a,useGetAllExeatRequestsQuery:s,useGetExeatRequestsByStatusQuery:n,useGetExeatRequestByIdQuery:i,useGetExeatRequestsByStudentIdQuery:o,useApproveExeatRequestMutation:l,useRejectExeatRequestMutation:d,useSignStudentOutMutation:u,useSignStudentInMutation:c,useGetExeatStatisticsQuery:f,useGetCompletedExeatRequestsQuery:m,useGetCompletedExeatRequestDetailsQuery:p,useGetRejectedExeatRequestsQuery:h,useGetRejectedExeatRequestDetailsQuery:x,useGetStaffDashboardStatsQuery:g,useSendCommentMutation:y,useEditExeatRequestMutation:v,useDeanApplyExeatRequestMutation:q,useDeanBulkApproveExeatsMutation:b}=r(46144).h.injectEndpoints({endpoints:e=>({getStaffProfile:e.query({query:()=>"/me",transformResponse:e=>e.user,providesTags:["Profile"]}),getAllExeatRequests:e.query({query:()=>"/staff/exeat-requests",transformResponse:e=>e.exeat_requests,providesTags:["ExeatRequests"]}),getExeatRequestsByStudentId:e.query({query:e=>({url:"/staff/exeat-requests",params:{student_id:e}}),transformResponse:e=>{var t;return Array.isArray(e)?e:"exeat_requests"in e?e.exeat_requests:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.exeat_requests)?e.data.exeat_requests:[]},providesTags:["ExeatRequests"]}),getExeatRequestsByStatus:e.query({query:e=>"/staff/exeat-requests?status=".concat(e),transformResponse:e=>e.exeat_requests,providesTags:["ExeatRequests"]}),getExeatRequestById:e.query({query:e=>"/staff/exeat-requests/".concat(e),transformResponse:e=>{if((null==e?void 0:e.message)&&e.message.includes("permission"))throw Error(e.message);if(null==e?void 0:e.exeat_request)return e.exeat_request;throw Error("Invalid response format from server")},providesTags:(e,t,r)=>[{type:"ExeatRequests",id:r}]}),approveExeatRequest:e.mutation({query:e=>{let{exeat_request_id:t,comment:r}=e;return{url:"/staff/exeat-requests/".concat(t,"/approve"),method:"POST",body:{comment:r}}},invalidatesTags:["ExeatRequests"]}),rejectExeatRequest:e.mutation({query:e=>{let{exeat_request_id:t,comment:r}=e;return{url:"/staff/exeat-requests/".concat(t,"/reject"),method:"POST",body:{comment:r}}},invalidatesTags:["ExeatRequests"]}),signStudentOut:e.mutation({query:e=>{let{exeat_request_id:t,comment:r}=e;return{url:"/staff/exeat-requests/".concat(t,"/sign-out"),method:"POST",body:{comment:r}}},invalidatesTags:["ExeatRequests"]}),signStudentIn:e.mutation({query:e=>{let{exeat_request_id:t,comment:r}=e;return{url:"/staff/exeat-requests/".concat(t,"/sign-in"),method:"POST",body:{comment:r}}},invalidatesTags:["ExeatRequests"]}),getExeatStatistics:e.query({query:()=>"/staff/exeat-statistics",transformResponse:e=>e.data,providesTags:["Staff"]}),getCompletedExeatRequests:e.query({query:function(){let{page:e=1,per_page:t=50}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:"/exeats/by-status/completed",params:{page:e,per_page:t}}},transformResponse:e=>e,providesTags:["ExeatRequests"]}),getCompletedExeatRequestDetails:e.query({query:e=>"/exeats/by-status/completed/".concat(e),transformResponse:e=>e,providesTags:["ExeatRequests"]}),getStaffDashboardStats:e.query({query:()=>"/staff/dashboard",transformResponse:e=>e,providesTags:["DashboardStats"]}),getRejectedExeatRequests:e.query({query:function(){let{page:e=1,per_page:t=50}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:"/exeats/by-status/rejected",params:{page:e,per_page:t}}},transformResponse:e=>e,providesTags:["ExeatRequests"]}),getRejectedExeatRequestDetails:e.query({query:e=>"/exeats/by-status/rejected/".concat(e),transformResponse:e=>e,providesTags:["ExeatRequests"]}),sendComment:e.mutation({query:e=>{let{exeat_request_id:t,comment:r}=e;return{url:"/staff/exeat-requests/".concat(t,"/send-comment"),method:"POST",body:{comment:r,priority:"high"}}},invalidatesTags:["ExeatRequests"]}),editExeatRequest:e.mutation({query:e=>{let{exeat_request_id:t,payload:r}=e;return{url:"/staff/exeat-requests/".concat(t),method:"PUT",body:r}},invalidatesTags:["ExeatRequests"]}),deanApplyExeatRequest:e.mutation({query:e=>({url:"/dean/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),deanBulkApproveExeats:e.mutation({query:()=>({url:"/dean/exeat-requests/bulkAprroval",method:"POST"}),invalidatesTags:["ExeatRequests"]})})})},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(61994),s=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},42676:function(e,t,r){"use strict";r.d(t,{li:function(){return s},nd:function(){return n},z2:function(){return a}});let a=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200 hover:bg-green-200";case"completed":return"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200";case"rejected":return"bg-red-100 text-red-800 border-red-200 hover:bg-red-200";case"cmd_review":case"secretary_review":case"dean_review":return"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200";case"parent_consent":return"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200";case"hostel_signin":case"hostel_signout":return"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200";case"recommendation1":case"recommendation2":case"dean_approval":case"hostel_approval":return"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200";default:return"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200"}},s=e=>{switch(e){case"pending":return"Awaiting Initial Review";case"cmd_review":return"Medical Director Review";case"secretary_review":return"Secretary Review";case"parent_consent":return"Awaiting Parent Approval";case"dean_review":return"Dean/Deputy Dean Review";case"hostel_signin":return"Ready for Hostel Sign-In";case"hostel_signout":return"Ready for Hostel Sign-Out";case"security_signin":return"Student Away - Awaiting Return";case"security_signout":return"Ready for Security Sign-Out";case"recommendation1":return"Under Initial Review";case"recommendation2":return"Under Final Review";case"dean_approval":return"Awaiting Dean Approval";case"hostel_approval":return"Hostel Processing";case"approved":return"Request Approved";case"rejected":return"Request Not Approved";case"completed":return"Request Completed";default:return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},n=e=>{let t=["reason","destination","departure_date","return_date","comment"];return["admin","dean"].includes(e)?[...t,"parent_surname","parent_othernames","parent_phone_no","parent_phone_no_two","parent_email","preferred_mode_of_contact","category_id","is_medical"]:t}},91230:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},29935:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},59701:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},74376:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},59133:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},16942:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},40339:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},36086:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},35979:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]])}},function(e){e.O(0,[2915,3557,3448,141,2971,2117,1744],function(){return e(e.s=22074)}),_N_E=e.O()}]);