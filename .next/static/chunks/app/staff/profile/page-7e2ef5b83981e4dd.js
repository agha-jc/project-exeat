(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7074],{37598:function(e,t,s){Promise.resolve().then(s.bind(s,13529))},13529:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(57437),a=s(66070),n=s(65613),l=s(35974),i=s(93022),o=s(16831),d=s(16262),c=s(81499),m=s(39180),u=s(67350),x=s(46747),f=s(88880),p=s(28505),h=s(16994);function g(){var e,t,s,g,j,N,v,y;let{data:b,isLoading:w,error:_}=(0,d.Mx)(),{user:k,avatarUrl:O}=(0,m.t)();if(w)return(0,r.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8 h-full min-h-screen",children:(0,r.jsx)("div",{className:"pt-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.O,{className:"h-8 w-64"}),(0,r.jsx)(i.O,{className:"h-4 w-96"})]}),(0,r.jsx)(a.Zb,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[(0,r.jsx)(i.O,{className:"h-20 w-20 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,r.jsx)(i.O,{className:"h-8 w-64"}),(0,r.jsx)(i.O,{className:"h-4 w-48"}),(0,r.jsx)(i.O,{className:"h-4 w-40"}),(0,r.jsx)(i.O,{className:"h-6 w-24"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)(a.Zb,{className:"p-6",children:[(0,r.jsx)(i.O,{className:"h-6 w-32 mb-4"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.O,{className:"h-4 w-full"}),(0,r.jsx)(i.O,{className:"h-4 w-3/4"}),(0,r.jsx)(i.O,{className:"h-4 w-1/2"})]})]}),(0,r.jsxs)(a.Zb,{className:"p-6",children:[(0,r.jsx)(i.O,{className:"h-6 w-32 mb-4"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.O,{className:"h-4 w-full"}),(0,r.jsx)(i.O,{className:"h-4 w-2/3"})]})]})]})]})})});if(_)return(0,r.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8 h-full min-h-screen",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto pt-6",children:(0,r.jsxs)(n.bZ,{variant:"destructive",children:[(0,r.jsx)(n.Cd,{children:"Error Loading Profile"}),(0,r.jsx)(n.X,{children:(null==_?void 0:null===(y=_.data)||void 0===y?void 0:y.message)||(null==_?void 0:_.message)||"Failed to load profile data"})]})})});if(!(null==b?void 0:b.profile))return(0,r.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8 h-full min-h-screen",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto pt-6",children:(0,r.jsx)(a.Zb,{className:"p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(u.Z,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-muted-foreground",children:"No Profile Data"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Unable to load staff profile information."})]})})})});let{personal:S,contacts:C,work_profiles:R}=b.profile,Z=k?"".concat((null===(e=k.fname)||void 0===e?void 0:e[0])||"").concat((null===(t=k.lname)||void 0===t?void 0:t[0])||"").toUpperCase():"";return(0,r.jsxs)("div",{className:"w-full px-4 sm:px-6 lg:px-8 h-full min-h-screen pt-6",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight",children:"My Profile"}),(0,r.jsx)("p",{className:"text-base lg:text-lg text-muted-foreground mt-2",children:"View your personal and work information"})]}),(0,r.jsx)(a.Zb,{className:"mb-6",children:(0,r.jsx)(a.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsxs)(o.qE,{className:"size-20 border-2 border-primary",children:[(0,r.jsx)(o.F$,{src:O,alt:k?"".concat(k.fname," ").concat(k.lname):"User avatar"}),(0,r.jsx)(o.Q5,{className:"bg-primary/10 text-primary text-xl font-bold",children:Z})]})}),(0,r.jsxs)("div",{className:"flex-1 text-center sm:text-left",children:[(0,r.jsxs)("h2",{className:"text-xl lg:text-2xl font-bold text-foreground mb-2",children:[S.title," ",S.first_name," ",S.middle_name?S.middle_name+" ":"",S.last_name]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:(null===(s=S.contact)||void 0===s?void 0:s.email)||"No email provided"})]}),(null===(g=S.contact)||void 0===g?void 0:g.phone)&&(0,r.jsxs)("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:S.contact.phone})]})]}),S.exeat_roles&&S.exeat_roles.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Assigned Roles:"}),(0,r.jsx)("div",{className:"flex flex-wrap justify-center sm:justify-start gap-2",children:S.exeat_roles.map(e=>(0,r.jsx)(l.C,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:(0,c.h)(e)},e.id))})]})]})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 text-primary"}),"Personal Information"]}),(0,r.jsx)(a.SZ,{children:"Your personal details and contact information"})]}),(0,r.jsx)(a.aY,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),(0,r.jsxs)("span",{className:"text-sm text-foreground",children:[S.first_name," ",S.middle_name?S.middle_name+" ":"",S.last_name]})]}),(null===(j=S.contact)||void 0===j?void 0:j.email)&&(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,r.jsx)("span",{className:"text-sm text-foreground",children:S.contact.email})]}),(null===(N=S.contact)||void 0===N?void 0:N.phone)&&(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),(0,r.jsx)("span",{className:"text-sm text-foreground",children:S.contact.phone})]}),S.gender&&(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Gender"}),(0,r.jsx)("span",{className:"text-sm text-foreground capitalize",children:S.gender})]}),S.dob&&(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Date of Birth"}),(0,r.jsx)("span",{className:"text-sm text-foreground",children:S.dob})]}),S.marital_status&&(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Marital Status"}),(0,r.jsx)("span",{className:"text-sm text-foreground capitalize",children:S.marital_status})]}),(null===(v=S.contact)||void 0===v?void 0:v.address)&&(0,r.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),(0,r.jsx)("span",{className:"text-sm text-foreground",children:S.contact.address})]})]})})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{className:"h-5 w-5 text-primary"}),"Work Information"]}),(0,r.jsx)(a.SZ,{children:"Your work profile and employment details"})]}),(0,r.jsx)(a.aY,{className:"space-y-4",children:R&&R.length>0?(0,r.jsx)("div",{className:"space-y-4",children:R.map((e,t)=>(0,r.jsx)("div",{className:"p-4 bg-muted/30 rounded-lg",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[e.staff_no&&(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Staff Number"}),(0,r.jsx)("span",{className:"text-sm text-foreground font-mono",children:e.staff_no})]}),e.department&&(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Department"}),(0,r.jsx)("span",{className:"text-sm text-foreground",children:e.department})]}),e.grade&&(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Grade"}),(0,r.jsx)("span",{className:"text-sm text-foreground",children:e.grade})]})]})},t))}):(0,r.jsxs)("div",{className:"text-center py-6 text-muted-foreground",children:[(0,r.jsx)(p.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"No work profile information available"})]})})]})]}),C&&C.length>0&&(0,r.jsxs)(a.Zb,{className:"mt-6",children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5 text-primary"}),"Emergency Contacts"]}),(0,r.jsx)(a.SZ,{children:"Important contacts for emergency situations"})]}),(0,r.jsx)(a.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:C.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:e.name||(e.surname&&e.other_names?"".concat(e.surname," ").concat(e.other_names):"Unknown Contact")}),e.relationship&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:e.relationship})]}),(0,r.jsxs)("div",{className:"text-right",children:[e.phone_no&&(0,r.jsx)("p",{className:"text-sm font-medium",children:e.phone_no}),e.email&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.email})]})]},t))})})]})]})}},65613:function(e,t,s){"use strict";s.d(t,{Cd:function(){return d},X:function(){return c},bZ:function(){return o}});var r=s(57437),a=s(2265),n=s(90535),l=s(94508);let i=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:a}),s),...n})});o.displayName="Alert";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});d.displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",s),...a})});c.displayName="AlertDescription"},16831:function(e,t,s){"use strict";s.d(t,{F$:function(){return o},Q5:function(){return d},qE:function(){return i}});var r=s(57437),a=s(2265),n=s(27954),l=s(94508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});i.displayName=n.fC.displayName;let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",s),...a})});o.displayName=n.Ee.displayName;let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});d.displayName=n.NY.displayName},35974:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var r=s(57437);s(2265);var a=s(90535),n=s(94508);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...a})}},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var r=s(57437),a=s(2265),n=s(94508);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},93022:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var r=s(57437),a=s(94508);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...s})}},39180:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var r=s(68575),a=s(61796);function n(){let e=(0,r.v9)(a.HF);return{user:e,isLoading:(0,r.v9)(a.xU),fullName:e?"".concat(e.fname," ").concat(e.lname):"",initials:e?"".concat(e.fname[0]).concat(e.lname[0]).toUpperCase():"",avatarUrl:(null==e?void 0:e.passport)?"data:image/jpeg;base64,".concat(e.passport):void 0}}},46144:function(e,t,s){"use strict";s.d(t,{h:function(){return o}});var r=s(79523),a=s(23557);let n=e=>e().auth.token,l=(0,r.ni)({baseUrl:"https://attendance.veritas.edu.ng/api",prepareHeaders:(e,t)=>{let{getState:s}=t,r=n(s);return r&&e.set("Authorization","Bearer ".concat(r)),e.set("Content-Type","application/json"),e.set("Accept","application/json"),e}}),i=async(e,t,s)=>{let r=await l(e,t,s);return r.error&&401===r.error.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login")),r},o=(0,a.LC)({reducerPath:"api",baseQuery:i,tagTypes:["Profile","ExeatCategories","ExeatRequests","ExeatRoles","Staff","ExeatRequests","DashboardStats","Admin","StudentDebts"],endpoints:()=>({})})},16262:function(e,t,s){"use strict";s.d(t,{Mx:function(){return l},YA:function(){return a},_y:function(){return n},iJ:function(){return r}});let r=s(46144).h.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>({url:"/login",method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"/logout",method:"POST"})}),getProfile:e.query({query:()=>"/me",providesTags:["Profile"]})})}),{useLoginMutation:a,useLogoutMutation:n,useGetProfileQuery:l}=r},61796:function(e,t,s){"use strict";s.d(t,{Dj:function(){return u},HF:function(){return x},kS:function(){return m},vN:function(){return f},xU:function(){return p}});var r=s(39129),a=s(16262);let n=e=>{try{return localStorage.getItem(e)}catch(e){return null}},l=()=>{let e=n("user");try{let t=e?JSON.parse(e):null;if(t&&t.exeat_roles&&!t.roles){let e=t.exeat_roles.map(e=>{var t;return(null==e?void 0:null===(t=e.role)||void 0===t?void 0:t.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"});t.roles=e}return t}catch(e){return null}},i={user:l(),token:n("token"),isAuthenticated:!!(n("token")&&l()),isLoading:!1},o=(0,r.oM)({name:"auth",initialState:i,reducers:{startLoading:e=>{e.isLoading=!0},stopLoading:e=>{e.isLoading=!1},logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")},setCredentials:(e,t)=>{let{user:s,role:r,token:a}=t.payload,n=(null==s?void 0:s.exeat_roles)||t.payload.roles,l=Array.isArray(n)?n.map(e=>{var t;return(null==e?void 0:null===(t=e.role)||void 0===t?void 0:t.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"}):[],i={...s,role:r,roles:l};e.user=i,e.token=a,e.isAuthenticated=!0,localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(i))}},extraReducers:e=>{e.addMatcher(a.iJ.endpoints.login.matchPending,e=>{e.isLoading=!0}).addMatcher(a.iJ.endpoints.login.matchFulfilled,(e,t)=>{var s;let{payload:r}=t,a=(null===(s=r.user)||void 0===s?void 0:s.exeat_roles)||r.roles,n=Array.isArray(a)?a.map(e=>{var t;return(null==e?void 0:null===(t=e.role)||void 0===t?void 0:t.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"}):[],l={...r.user,role:r.role,roles:n};e.user=l,e.token=r.token,e.isAuthenticated=!0,e.isLoading=!1,localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(l))}).addMatcher(a.iJ.endpoints.login.matchRejected,e=>{e.isLoading=!1})}}),{startLoading:d,stopLoading:c,logout:m,setCredentials:u}=o.actions;t.ZP=o.reducer;let x=e=>e.auth.user,f=e=>e.auth.isAuthenticated,p=e=>e.auth.isLoading},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},81499:function(e,t,s){"use strict";s.d(t,{h:function(){return r}});let r=e=>{if(!e)return"Unknown Role";if("string"==typeof e)return e;if("object"==typeof e){if(e.role&&"object"==typeof e.role&&e.role.name)return e.role.name;if(e.name)return e.name;if(e.display_name)return e.display_name}return"Unknown Role"}}},function(e){e.O(0,[2915,3557,3147,2971,2117,1744],function(){return e(e.s=37598)}),_N_E=e.O()}]);