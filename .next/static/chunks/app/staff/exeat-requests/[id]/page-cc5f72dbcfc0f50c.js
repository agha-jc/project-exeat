(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{72933:function(e,s,a){Promise.resolve().then(a.bind(a,30749))},30749:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Y}});var t=a(57437),l=a(2265),r=a(99376),n=a(34324),i=a(66070),c=a(62869),m=a(35974),d=a(76818),x=a(95186),o=a(26815),h=a(26110),u=a(25361),p=a(5485),j=a(74376),N=a(35465);let f=(0,a(96471).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);var g=a(98012),v=a(81475),b=a(13147),w=a(19965),y=a(5255),_=a(67350),k=a(87928),Z=a(16049),O=a(88880),C=a(66314),S=a(27107),q=a(35153),P=a(63645),z=a(28233),D=a(16831),M=a(21378),R=a(93022),E=a(53717),F=a(44259);function Y(){var e,s,a,Y,U,I,T;let A=(0,r.useRouter)(),B=parseInt((0,r.useParams)().id),[H,L]=(0,l.useState)(""),[W,J]=(0,l.useState)(!1),[$,G]=(0,l.useState)(!1),[V,K]=(0,l.useState)(null),[Q,X]=(0,l.useState)(!1),[ee,es]=(0,l.useState)({}),[ea,et]=(0,l.useState)(!1),{toast:el}=(0,q.pm)(),{approveExeatRequest:er,rejectExeatRequest:en,sendComment:ei,editExeatRequestWithAccess:ec,hasRole:em}=(0,P.iy)(),{data:ed,isLoading:ex,error:eo}=(0,z.vN)(B,{skip:!B||isNaN(B)}),eh=(null==ed?void 0:null===(e=ed.student)||void 0===e?void 0:e.passport)?"data:image/jpeg;base64,".concat(ed.student.passport):"",eu=e=>{if(("reject"===e||"see_me"===e)&&!H.trim()){el({title:"Comment Required",description:"reject"===e?"Please provide a reason for rejection.":"Please provide a message for the student.",variant:"destructive"});return}K(e),G(!0)},ep=async()=>{if(ed&&V){J(!0);try{if("approve"===V)await er[0]({exeat_request_id:ed.id,comment:H.trim()||void 0}),el({title:"Success",description:"Exeat request approved successfully."}),A.push("/staff/pending");else if("reject"===V)await en[0]({exeat_request_id:ed.id,comment:H.trim()}),el({title:"Success",description:"Exeat request rejected successfully."}),A.push("/staff/pending");else if("see_me"===V){let e=await ei[0]({exeat_request_id:ed.id,comment:H.trim()});if(e.error){console.error("Error sending comment:",e.error);let s="Failed to send comment. Please try again.";if("data"in e.error&&e.error.data){let a=e.error.data;if(a.message&&(s=a.message,a.previous_comment)){let e=a.previous_comment;s+='\n\nPrevious comment: "'.concat(e.message,'" sent by ').concat(e.sent_by," at ").concat(e.sent_at)}}throw Error(s)}el({title:"Success",description:"Comment sent to student successfully."})}L(""),G(!1),K(null)}catch(e){el({title:"Error",description:e.message||"Failed to ".concat("see_me"===V?"send comment":V," request. Please try again."),variant:"destructive"})}finally{J(!1)}}},ej=em("dean")||em("secretary")||em("admin");try{{let e=localStorage.getItem("user");e&&JSON.parse(e)}}catch(e){console.error("Error checking localStorage on page load:",e)}let eN=()=>{Q?(X(!1),es({})):(X(!0),ed&&es({reason:ed.reason,destination:ed.destination,departure_date:ed.departure_date,return_date:ed.return_date,parent_surname:ed.parent_surname,parent_othernames:ed.parent_othernames,parent_phone_no:ed.parent_phone_no,parent_phone_no_two:ed.parent_phone_no_two,parent_email:ed.parent_email}))},ef=(e,s)=>{es(a=>({...a,[e]:s}))},eg=async()=>{if(ed&&0!==Object.keys(ee).length){try{let e=localStorage.getItem("user");e&&JSON.parse(e)}catch(e){console.error("DEBUG: Error checking localStorage:",e)}J(!0);try{await ec(ed.id,ee),el({title:"Success",description:"Exeat request updated successfully."}),X(!1),es({}),window.location.reload()}catch(e){console.error("DEBUG: Edit error:",e),el({title:"Error",description:e.message||"Failed to update exeat request.",variant:"destructive"})}finally{J(!1)}}};if(ex)return(0,t.jsx)(()=>(0,t.jsx)(n.i,{requiredRole:"staff",children:(0,t.jsxs)("div",{className:"w-full px-4 sm:px-6 lg:px-8 h-full min-h-screen",children:[(0,t.jsxs)("div",{className:"mb-8 pt-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(R.O,{className:"h-10 w-32"}),(0,t.jsx)(R.O,{className:"h-10 w-24"})]})}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(R.O,{className:"h-16 w-16 rounded-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.O,{className:"h-9 w-64"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(R.O,{className:"h-8 w-20"}),(0,t.jsx)(R.O,{className:"h-6 w-24"})]})]})]}),(0,t.jsx)(R.O,{className:"h-5 w-96"})]})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(i.Zb,{className:"bg-white/95 backdrop-blur-sm border-slate-200 shadow-sm",children:(0,t.jsx)(i.aY,{className:"p-6",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.O,{className:"h-4 w-16"}),(0,t.jsx)(R.O,{className:"h-6 w-24"})]},s))})})})}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)(i.Zb,{className:"bg-gradient-to-r from-orange-50 to-indigo-50 border-orange-200 shadow-lg",children:[(0,t.jsxs)(i.Ol,{className:"pb-4",children:[(0,t.jsx)(i.ll,{className:"flex items-center gap-2",children:(0,t.jsx)(R.O,{className:"h-6 w-32"})}),(0,t.jsx)(i.SZ,{children:(0,t.jsx)(R.O,{className:"h-4 w-80"})})]}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R.O,{className:"h-5 w-40"}),(0,t.jsx)(R.O,{className:"h-24 w-full"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2",children:[(0,t.jsx)(R.O,{className:"h-12 w-full"}),(0,t.jsx)(R.O,{className:"h-12 w-full"})]})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"flex items-center gap-2",children:(0,t.jsx)(R.O,{className:"h-6 w-40"})})}),(0,t.jsx)(i.aY,{className:"space-y-4",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(R.O,{className:"h-4 w-20"}),(0,t.jsx)(R.O,{className:"h-5 w-32"})]},s))})})]}),(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"flex items-center gap-2",children:(0,t.jsx)(R.O,{className:"h-6 w-36"})})}),(0,t.jsx)(i.aY,{className:"space-y-4",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(6)].map((e,s)=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(R.O,{className:"h-4 w-24"}),(0,t.jsx)(R.O,{className:"h-5 w-28"})]},s))})})]}),(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"flex items-center gap-2",children:(0,t.jsx)(R.O,{className:"h-6 w-48"})})}),(0,t.jsx)(i.aY,{className:"space-y-4",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(R.O,{className:"h-4 w-20"}),(0,t.jsx)(R.O,{className:"h-5 w-32"})]},s))})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-center",children:(0,t.jsx)(R.O,{className:"h-6 w-28 mx-auto"})})}),(0,t.jsx)(i.aY,{className:"flex justify-center",children:(0,t.jsx)(R.O,{className:"h-48 w-48 rounded-full"})})]}),(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-lg",children:(0,t.jsx)(R.O,{className:"h-6 w-32"})})}),(0,t.jsx)(i.aY,{className:"space-y-4",children:(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,t.jsx)(R.O,{className:"h-4 w-16"}),(0,t.jsx)(R.O,{className:"h-4 w-24"})]},s))})})]})]})]})]})}),{});if(eo||!ed){let e=eo?(null==eo?void 0:null===(T=eo.data)||void 0===T?void 0:T.message)?eo.data.message:(null==eo?void 0:eo.message)?eo.message:(null==eo?void 0:eo.error)?eo.error:"string"==typeof eo?eo:"An unexpected error occurred while loading the request.":null;return(0,t.jsx)(n.i,{requiredRole:"staff",children:(0,t.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8 h-full min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Z,{className:"h-12 w-12 mx-auto text-red-500"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-red-200 animate-pulse"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-800",children:eo?"Access Denied":"Request Not Found"}),(0,t.jsx)("p",{className:"text-slate-600 max-w-md",children:e||"Unable to load the exeat request details."})]}),(0,t.jsxs)(c.z,{variant:"outline",className:"mt-4 hover:bg-slate-100 transition-colors",onClick:()=>A.push("/staff/pending"),children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Back to Requests"]})]})})})})}let ev=Math.ceil((new Date(ed.return_date).getTime()-new Date(ed.departure_date).getTime())/864e5);return(0,t.jsxs)(n.i,{requiredRole:"staff",children:[(0,t.jsxs)("div",{className:"w-full px-3 sm:px-4 md:px-6 lg:px-8 h-full min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/20",children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-6 lg:mb-8 pt-4 sm:pt-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[(0,t.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>A.push("/staff/pending"),className:"self-start border-slate-300 hover:bg-slate-100 transition-all duration-200",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Back"})]}),ej&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:Q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.z,{variant:"outline",size:"sm",onClick:eN,className:"border-slate-300 hover:bg-slate-100",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Cancel"})]}),(0,t.jsxs)(c.z,{variant:"default",size:"sm",onClick:()=>{if(0===Object.keys(ee).length){el({title:"No Changes",description:"No changes were made to the exeat request."});return}et(!0)},children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Save"})]})]}):(0,t.jsxs)(c.z,{variant:"outline",size:"sm",onClick:eN,className:"border-slate-300 hover:bg-slate-100",children:[(0,t.jsx)(f,{className:"h-4 w-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Edit"})]})})]}),(0,t.jsxs)("div",{className:"mt-4 sm:mt-6",children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,t.jsx)("span",{className:"text-3xl sm:text-4xl",children:(0,F.tu)(ed.category_id||0,!!ed.is_medical)}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-slate-800 leading-tight",children:"Exeat Request Review"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[(0,t.jsx)(M.t,{status:ed.status,size:"sm"}),(0,t.jsx)(m.C,{variant:"outline",className:"text-xs sm:text-sm",children:(0,F.Oo)(ed.category_id||0,!!ed.is_medical)})]})]})]})}),(0,t.jsxs)("p",{className:"text-sm sm:text-base text-slate-600 mt-3 leading-relaxed",children:["Review and take action on this exeat request from ",(0,t.jsxs)("span",{className:"font-semibold",children:[ed.student.fname," ",ed.student.lname]})]})]})]}),(0,t.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,t.jsx)(i.Zb,{className:"bg-white/95 backdrop-blur-sm border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:(0,t.jsx)(i.aY,{className:"p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Reason"}),(0,t.jsx)("p",{className:"text-slate-800 font-medium text-base sm:text-lg break-words",children:ed.reason})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Destination"}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-slate-800 font-medium text-base sm:text-lg break-words",children:ed.destination})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Duration"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),(0,t.jsxs)("p",{className:"text-slate-800 font-medium text-base sm:text-lg",children:[ev," day",1!==ev?"s":""]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Dates"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),(0,t.jsxs)("p",{className:"text-slate-800 font-medium text-xs sm:text-sm",children:[(0,S.WU)(new Date(ed.departure_date),"MMM d")," - ",(0,S.WU)(new Date(ed.return_date),"MMM d, yyyy")]})]})]})]})})})}),"security_signout"===ed.status&&(0,t.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,t.jsx)(E.Y,{departureDate:ed.departure_date,returnDate:ed.return_date,variant:"staff"})}),(0,t.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,t.jsxs)(i.Zb,{className:"bg-gradient-to-br from-blue-50/50 to-indigo-50/50 border-blue-200/50 shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(i.Ol,{className:"pb-3 sm:pb-4",children:[(0,t.jsxs)(i.ll,{className:"flex items-center gap-2 text-base sm:text-lg",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),(0,F.pu)(ed.status)]}),(0,t.jsx)(i.SZ,{className:"text-xs sm:text-sm",children:(0,F.kK)(ed.status)})]}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,F._0)(ed.status)&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(o._,{htmlFor:"comment",className:"font-medium text-sm sm:text-base flex items-center gap-2 flex-wrap",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:(0,F.bt)(ed.status)}),(0,t.jsx)("span",{className:"text-xs sm:text-sm font-normal text-muted-foreground",children:(0,F.po)(ed.status)})]}),(0,t.jsx)(d.g,{id:"comment",placeholder:(0,F.bJ)(ed.status),value:H,onChange:e=>L(e.target.value),className:"min-h-[100px] text-sm sm:text-base resize-none"})]}),(0,t.jsxs)("div",{className:"grid gap-3 sm:gap-4 pt-2 ".concat((0,F._0)(ed.status)?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:[(0,t.jsxs)(c.z,{onClick:()=>eu("approve"),disabled:W||["rejected","completed"].includes(ed.status),className:"w-full h-11 sm:h-12 text-base sm:text-lg font-semibold disabled:opacity-50",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),(0,t.jsx)("span",{className:"truncate",children:"Approve Request"})]}),!["hostel_signout","hostel_signin","security_signout","security_signin","completed"].includes(ed.status)&&(0,t.jsxs)(c.z,{variant:"outline",onClick:()=>eu("see_me"),disabled:W,className:"w-full h-11 sm:h-12 text-base sm:text-lg font-semibold border-2 transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),(0,t.jsx)("span",{className:"truncate",children:"See Me"})]}),(0,F._0)(ed.status)&&(0,t.jsxs)(c.z,{variant:"destructive",onClick:()=>eu("reject"),disabled:W||["rejected","completed"].includes(ed.status),className:"w-full h-11 sm:h-12 text-base sm:text-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),(0,t.jsx)("span",{className:"truncate",children:"Reject Request"})]})]}),!(0,F._0)(ed.status)&&(0,t.jsx)("div",{className:"text-center py-4 sm:py-6",children:(0,t.jsxs)("div",{className:"text-sm sm:text-base text-muted-foreground",children:["security_signin"===ed.status&&"Student is currently away from campus.","approved"===ed.status&&"This request has been approved and is active.","rejected"===ed.status&&"This request has been rejected.","completed"===ed.status&&"This request has been completed successfully.","parent_consent"===ed.status&&"Awaiting parent/guardian consent.",("hostel_signin"===ed.status||"hostel_signout"===ed.status)&&"Hostel procedures in progress."]})})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm hover:shadow-md transition-all duration-200",children:[(0,t.jsx)(i.Ol,{className:"pb-3 sm:pb-4",children:(0,t.jsxs)(i.ll,{className:"flex items-center gap-2 text-slate-800 text-base sm:text-lg",children:[(0,t.jsx)(_.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Student Information"]})}),(0,t.jsx)(i.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Full Name"}),(0,t.jsxs)("p",{className:"text-slate-800 font-medium text-sm sm:text-base break-words",children:[ed.student.fname," ",ed.student.lname]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Matric Number"}),(0,t.jsx)("p",{className:"text-slate-800 font-mono font-medium text-sm sm:text-base",children:ed.matric_no})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Student ID"}),(0,t.jsx)("p",{className:"text-slate-800 font-medium text-sm sm:text-base",children:ed.student_id})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Accommodation"}),(0,t.jsx)("p",{className:"text-slate-800 text-sm sm:text-base",children:ed.student_accommodation||"Not specified"})]}),(0,t.jsxs)("div",{className:"space-y-1 sm:col-span-2",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Phone"}),(0,t.jsx)("p",{className:"text-slate-800 text-sm sm:text-base",children:ed.student.phone||"Not provided"})]})]})})]}),(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm hover:shadow-md transition-all duration-200",children:[(0,t.jsx)(i.Ol,{className:"pb-3 sm:pb-4",children:(0,t.jsxs)(i.ll,{className:"flex items-center gap-2 text-slate-800 text-base sm:text-lg",children:[(0,t.jsx)(k.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Request Details"]})}),(0,t.jsx)(i.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1 sm:col-span-2",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Reason"}),Q?(0,t.jsx)(d.g,{value:ee.reason||"",onChange:e=>ef("reason",e.target.value),className:"mt-1 text-sm sm:text-base",rows:3}):(0,t.jsx)("p",{className:"text-slate-800 font-medium text-sm sm:text-base break-words",children:ed.reason})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Destination"}),Q?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),(0,t.jsx)(x.I,{value:ee.destination||"",onChange:e=>ef("destination",e.target.value),className:"mt-1 text-sm sm:text-base"})]}):(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-slate-800 font-medium text-sm sm:text-base break-words",children:ed.destination})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Preferred Contact"}),(0,t.jsx)("p",{className:"text-slate-800 text-sm sm:text-base capitalize",children:(null===(s=ed.preferred_mode_of_contact)||void 0===s?void 0:s.replace("_"," "))||"Not specified"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Departure Date"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),Q?(0,t.jsx)(x.I,{type:"date",value:(null===(a=ee.departure_date)||void 0===a?void 0:a.split("T")[0])||"",onChange:e=>ef("departure_date",e.target.value),className:"mt-1 text-sm sm:text-base"}):(0,t.jsx)("p",{className:"text-slate-800 font-medium text-sm sm:text-base",children:(0,S.WU)(new Date(ed.departure_date),"PPP")})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Return Date"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),Q?(0,t.jsx)(x.I,{type:"date",value:(null===(Y=ee.return_date)||void 0===Y?void 0:Y.split("T")[0])||"",onChange:e=>ef("return_date",e.target.value),className:"mt-1 text-sm sm:text-base"}):(0,t.jsx)("p",{className:"text-slate-800 font-medium text-sm sm:text-base",children:(0,S.WU)(new Date(ed.return_date),"PPP")})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Duration"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),(0,t.jsxs)("p",{className:"text-slate-800 font-medium text-sm sm:text-base",children:[ev," day",1!==ev?"s":""]})]})]})]})})]}),(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm hover:shadow-md transition-all duration-200",children:[(0,t.jsx)(i.Ol,{className:"pb-3 sm:pb-4",children:(0,t.jsxs)(i.ll,{className:"flex items-center gap-2 text-slate-800 text-base sm:text-lg",children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Parent/Guardian Information"]})}),(0,t.jsx)(i.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1 sm:col-span-2",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Parent Name"}),(0,t.jsxs)("p",{className:"text-slate-800 font-medium text-sm sm:text-base break-words",children:[ed.parent_surname," ",ed.parent_othernames]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Primary Phone"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),(0,t.jsx)("a",{href:"tel:".concat(ed.parent_phone_no),className:"text-slate-800 font-medium text-sm sm:text-base hover:text-blue-600 transition-colors",children:ed.parent_phone_no})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Secondary Phone"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 text-slate-400 flex-shrink-0"}),ed.parent_phone_no_two?(0,t.jsx)("a",{href:"tel:".concat(ed.parent_phone_no_two),className:"text-slate-800 text-sm sm:text-base hover:text-blue-600 transition-colors",children:ed.parent_phone_no_two}):(0,t.jsx)("p",{className:"text-slate-800 text-sm sm:text-base",children:"Not provided"})]})]}),(0,t.jsxs)("div",{className:"space-y-1 sm:col-span-2",children:[(0,t.jsx)(o._,{className:"text-xs sm:text-sm font-medium text-slate-600",children:"Email"}),(0,t.jsx)("a",{href:"mailto:".concat(ed.parent_email),className:"text-slate-800 text-sm sm:text-base hover:text-blue-600 transition-colors break-all",children:ed.parent_email})]})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm hover:shadow-md transition-all duration-200",children:[(0,t.jsx)(i.Ol,{className:"pb-3 sm:pb-4",children:(0,t.jsx)(i.ll,{className:"text-center text-slate-800 text-sm sm:text-base",children:"Student Photo"})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsx)("div",{className:"relative group flex justify-center",children:(0,t.jsxs)(D.qE,{className:"size-32 sm:size-40 lg:size-48 border-4 border-slate-200 group-hover:border-blue-300 transition-all duration-300",children:[(0,t.jsx)(D.F$,{src:eh,alt:"".concat(ed.student.fname," ").concat(ed.student.lname),className:"object-cover"}),(0,t.jsx)(D.Q5,{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:(null===(U=ed.student.fname)||void 0===U?void 0:U[0])||(null===(I=ed.student.lname)||void 0===I?void 0:I[0])||"S"})]})}),ed.student.phone&&(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>window.open("tel:".concat(ed.student.phone),"_blank"),className:"w-full sm:w-auto",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),(0,t.jsx)("span",{className:"text-xs sm:text-sm",children:"Call Student"})]})})]})]}),(0,t.jsxs)(i.Zb,{className:"bg-white/90 backdrop-blur-sm border-slate-200 shadow-sm hover:shadow-md transition-all duration-200",children:[(0,t.jsx)(i.Ol,{className:"pb-3 sm:pb-4",children:(0,t.jsx)(i.ll,{className:"text-sm sm:text-base lg:text-lg text-slate-800",children:"Request Timeline"})}),(0,t.jsx)(i.aY,{className:"space-y-3 sm:space-y-4",children:(0,t.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-2 p-3 bg-slate-50 rounded-lg",children:[(0,t.jsx)("span",{className:"text-xs sm:text-sm text-slate-600",children:"Created:"}),(0,t.jsx)("span",{className:"text-xs sm:text-sm text-slate-800 font-medium",children:(0,S.WU)(new Date(ed.created_at),"PPp")})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-2 p-3 bg-slate-50 rounded-lg",children:[(0,t.jsx)("span",{className:"text-xs sm:text-sm text-slate-600",children:"Last Updated:"}),(0,t.jsx)("span",{className:"text-xs sm:text-sm text-slate-800 font-medium",children:(0,S.WU)(new Date(ed.updated_at),"PPp")})]})]})})]})]})]})]}),(0,t.jsx)(h.Vq,{open:$,onOpenChange:G,children:(0,t.jsxs)(h.cZ,{className:"sm:max-w-md",children:[(0,t.jsxs)(h.fK,{children:[(0,t.jsxs)(h.$N,{className:"flex items-center gap-2",children:["approve"===V?(0,t.jsx)(y.Z,{className:"h-5 w-5 text-green-600"}):"reject"===V?(0,t.jsx)(j.Z,{className:"h-5 w-5 text-red-600"}):(0,t.jsx)(w.Z,{className:"h-5 w-5 text-primary"}),"approve"===V?"Confirm Approval":"reject"===V?"Confirm Rejection":"Send Comment to Student"]}),(0,t.jsx)(h.Be,{className:"text-slate-600",children:"approve"===V?(0,t.jsxs)(t.Fragment,{children:[(0,F.xE)(ed.status,"".concat(ed.student.fname," ").concat(ed.student.lname),ed.reason,ed.destination,ev),(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"font-medium text-green-700",children:"This action cannot be undone."})]}):"reject"===V?(0,t.jsxs)(t.Fragment,{children:[(0,F.G4)(ed.status,"".concat(ed.student.fname," ").concat(ed.student.lname),ed.reason,ed.destination,ev),(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"font-medium text-red-700",children:"This action cannot be undone."})]}):(0,t.jsxs)(t.Fragment,{children:["Send a message to ",ed.student.fname," ",ed.student.lname," requesting them to see you.",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"font-medium text-primary",children:"The student will be notified of your request."})]})})]}),(0,t.jsxs)(h.cN,{className:"gap-3",children:[(0,t.jsx)(c.z,{variant:"outline",onClick:()=>{G(!1),K(null)},disabled:W,className:"hover:bg-slate-100 transition-colors",children:"Cancel"}),(0,t.jsx)(c.z,{onClick:ep,disabled:W||("reject"===V||"see_me"===V)&&!H.trim(),variant:"approve"===V?"default":"reject"===V?"destructive":"outline",className:"transition-all duration-200 hover:scale-105",children:W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsx)(t.Fragment,{children:"approve"===V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Confirm Approve"]}):"reject"===V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Confirm Reject"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Send Comment"]})})})]})]})}),(0,t.jsx)(h.Vq,{open:ea,onOpenChange:et,children:(0,t.jsxs)(h.cZ,{className:"sm:max-w-md",children:[(0,t.jsxs)(h.fK,{children:[(0,t.jsxs)(h.$N,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"h-5 w-5 text-green-600"}),"Save Changes"]}),(0,t.jsxs)(h.Be,{className:"text-slate-600",children:["Are you sure you want to save the changes to this exeat request for ",null==ed?void 0:ed.student.fname," ",null==ed?void 0:ed.student.lname,"?",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"font-medium text-amber-600",children:"This will update the exeat request information."})]})]}),(0,t.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Changes Summary:"}),(0,t.jsx)("div",{className:"bg-slate-50 p-3 rounded-md text-sm",children:Object.keys(ee).map(e=>{let s=null==ed?void 0:ed[e],a=ee[e];return s!==a?(0,t.jsxs)("div",{className:"mb-2 pb-2 border-b border-slate-200 last:border-0",children:[(0,t.jsx)("div",{className:"font-medium",children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 mt-1",children:[(0,t.jsx)("div",{className:"text-red-600 line-through",children:"object"==typeof s?JSON.stringify(s):String(s||"")}),(0,t.jsx)("div",{className:"text-green-600",children:"object"==typeof a?JSON.stringify(a):String(a||"")})]})]},e):null}).filter(Boolean)})]}),(0,t.jsxs)(h.cN,{className:"gap-3",children:[(0,t.jsx)(c.z,{variant:"outline",onClick:()=>et(!1),disabled:W,className:"hover:bg-slate-100 transition-colors",children:"Cancel"}),(0,t.jsx)(c.z,{onClick:eg,disabled:W,children:W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})]})}},95186:function(e,s,a){"use strict";a.d(s,{I:function(){return i}});var t=a(57437),l=a(2265),r=a(94508),n=a(26815);let i=l.forwardRef((e,s)=>{let{className:a,type:i,label:c,id:m,...d}=e,x=m||l.useId();return(0,t.jsxs)("div",{className:"space-y-1",children:[c&&(0,t.jsx)(n._,{htmlFor:x,children:c}),(0,t.jsx)("input",{id:x,type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...d})]})});i.displayName="Input"},26815:function(e,s,a){"use strict";a.d(s,{_:function(){return m}});var t=a(57437),l=a(2265),r=a(370),n=a(90535),i=a(94508);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.f,{ref:s,className:(0,i.cn)(c(),a),...l})});m.displayName=r.f.displayName},370:function(e,s,a){"use strict";a.d(s,{f:function(){return c}});var t=a(2265);a(54887);var l=a(37053),r=a(57437),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let a=(0,l.Z8)(`Primitive.${s}`),n=t.forwardRef((e,t)=>{let{asChild:l,...n}=e,i=l?a:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(i,{...n,ref:t})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{}),i=t.forwardRef((e,s)=>(0,r.jsx)(n.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var c=i},5485:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},13147:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},98012:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},35465:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},16049:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},67350:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(96471).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[2915,3557,9946,5844,9049,1,8672,9090,9717,141,2971,2117,1744],function(){return e(e.s=72933)}),_N_E=e.O()}]);