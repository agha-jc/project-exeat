(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2031],{50425:function(e,t,s){Promise.resolve().then(s.bind(s,71558))},71558:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var r=s(57437),a=s(66070),n=s(35974),i=s(62869),o=s(18025),l=s(39248),d=s(28233),u=s(2265),c=s(25361),m=s(53459);function f(e){let{isOpen:t,onClose:s,title:a,description:n,confirmLabel:o="Confirm",cancelLabel:l="Cancel",onConfirm:d}=e,[f,x]=(0,u.useState)(!1),[p,g]=(0,u.useState)("");if(!t)return null;let h=async()=>{try{x(!0),g(""),await d()}catch(e){g((null==e?void 0:e.message)||"Action failed")}finally{x(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",onClick:f?void 0:s,children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(c.Z,{className:"h-6 w-6 text-orange-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a}),n&&(0,r.jsx)("p",{className:"text-sm text-gray-500",children:n})]})]}),p&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-red-600",children:p})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(i.z,{variant:"outline",onClick:s,disabled:f,className:"px-4 py-2",children:l}),(0,r.jsx)(i.z,{onClick:h,disabled:f,className:"px-4 py-2",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):o})]})]})})}var x=s(35153),p=s(39180),g=s(99376),h=s(16994),y=s(87928),v=s(69626),j=s(24287),q=s(96471);let b=(0,q.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var N=s(36086),A=s(36549);let R=(0,q.Z)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);var S=s(74376),w=s(91230),T=s(27648),k=s(27107),E=s(94508),_=s(81499);function Z(){let{user:e}=(0,p.t)();(0,g.useRouter)();let{data:t,isLoading:s}=(0,o.Sh)(),{data:c,isLoading:m}=(0,l.DC)(),[q,{isLoading:E}]=(0,d.xA)(),[Z,O]=(0,u.useState)(!1),M=async()=>{try{let e=await q().unwrap();(0,x.Am)({variant:"success",title:"Bulk Approval",description:(null==e?void 0:e.message)||"Bulk approval completed successfully"}),O(!1)}catch(t){var e;(0,x.Am)({variant:"destructive",title:"Bulk Approval Failed",description:(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Bulk approval failed"})}},{data:P,isLoading:z}=(0,o.LB)(),L=(null==t?void 0:t.slice(0,5))||[];return(0,r.jsxs)("div",{className:"space-y-6 p-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Admin Dashboard"}),(0,r.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Welcome back, ",null==e?void 0:e.fname," ",null==e?void 0:e.lname]})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsx)(a.ll,{className:"text-xl",children:"Quick Actions"}),(0,r.jsx)(a.SZ,{children:"Common administrative tasks"})]}),(0,r.jsx)(a.aY,{children:(0,r.jsxs)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(i.z,{asChild:!0,variant:"outline",className:"h-20 flex-col gap-2",children:(0,r.jsxs)(T.default,{href:"/staff/assign-exeat-role",children:[(0,r.jsx)(h.Z,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:"Assign Roles"})]})}),(0,r.jsx)(i.z,{asChild:!0,variant:"outline",className:"h-20 flex-col gap-2",children:(0,r.jsxs)(T.default,{href:"/staff/pending",children:[(0,r.jsx)(y.Z,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:"View Exeats"})]})}),(0,r.jsx)(i.z,{asChild:!0,variant:"outline",className:"h-20 flex-col gap-2",children:(0,r.jsxs)(T.default,{href:"/staff/admin/exeats/create",children:[(0,r.jsx)(v.Z,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:"Apply Exeat For Student"})]})}),(0,r.jsxs)(i.z,{onClick:()=>O(!0),variant:"outline",className:"h-20 flex-col gap-2",disabled:E,children:[(0,r.jsx)(j.Z,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:E?"Approving…":"Bulk Approve (Dean)"})]}),(0,r.jsx)(i.z,{asChild:!0,variant:"outline",className:"h-20 flex-col gap-2",children:(0,r.jsxs)(T.default,{href:"/staff/admin/analytics",children:[(0,r.jsx)(b,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:"Analytics"})]})})]})})]}),P&&(0,r.jsxs)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(C,{title:"Total Students",value:P.overview.total_students,description:"Registered students",icon:h.Z,className:"border-l-4 border-l-primary"}),(0,r.jsx)(C,{title:"Total Staff",value:P.overview.total_staff,description:"Active staff members",icon:N.Z,className:"border-l-4 border-l-green-500"}),(0,r.jsx)(C,{title:"Pending Exeats",value:P.overview.active_exeats,description:"Currently active",icon:A.Z,className:"border-l-4 border-l-blue-500"}),(0,r.jsx)(C,{title:"Students on Exeat",value:P.overview.student_away,description:"Students on exeat",icon:R,className:"border-l-4 border-l-purple-500"})]}),P&&(0,r.jsxs)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3",children:[(0,r.jsx)(C,{title:"Total Requests",value:P.exeat_statistics.total_requests,description:"All time requests",icon:y.Z,className:"border-l-4 border-l-primary"}),(0,r.jsx)(C,{title:"Approved Requests",value:P.overview.approved_exeats,description:"Successfully approved",icon:j.Z,className:"border-l-4 border-l-green-500"}),(0,r.jsx)(C,{title:"Rejected Requests",value:P.exeat_statistics.rejected_requests,description:"Not approved",icon:S.Z,className:"border-l-4 border-l-red-500"})]}),P&&(0,r.jsxs)("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ll,{className:"text-xl",children:"Recent Audit Activity"}),(0,r.jsx)(a.SZ,{children:"Latest system actions and changes"})]}),(0,r.jsx)(i.z,{asChild:!0,variant:"outline",size:"sm",children:(0,r.jsxs)(T.default,{href:"/staff/admin/audit-trail",children:[(0,r.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"View All"]})})]}),(0,r.jsx)(a.aY,{children:0===P.audit_trail.audit_logs.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)(A.Z,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),(0,r.jsx)("p",{children:"No recent audit activity"})]}):(0,r.jsx)("div",{className:"space-y-4",children:P.audit_trail.audit_logs.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(A.Z,{className:"h-4 w-4 text-primary"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("p",{className:"font-medium text-sm truncate",children:[e.action," - ",e.target_type]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground truncate",children:["by ",e.actor.name]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.formatted_time})]})]},e.id))})})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ll,{className:"text-xl",children:"Recent Exeat Activities"}),(0,r.jsx)(a.SZ,{children:"Latest exeat request activities"})]}),(0,r.jsx)(i.z,{asChild:!0,variant:"outline",size:"sm",children:(0,r.jsxs)(T.default,{href:"/staff/pending",children:[(0,r.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"View All"]})})]}),(0,r.jsx)(a.aY,{children:0===P.recent_activities.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)(y.Z,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),(0,r.jsx)("p",{children:"No recent activities"})]}):(0,r.jsx)("div",{className:"space-y-4",children:P.recent_activities.slice(0,10).map(e=>(0,r.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(A.Z,{className:"h-4 w-4 text-primary"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-sm truncate",children:e.action}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground truncate",children:["by ",e.actor," (",e.actor_type,")"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.formatted_time})]})]},e.id))})})]})]}),(0,r.jsx)("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ll,{className:"text-xl",children:"Recent Staff Assignments"}),(0,r.jsx)(a.SZ,{children:"Latest role assignments and updates"})]}),(0,r.jsx)(i.z,{asChild:!0,variant:"outline",size:"sm",children:(0,r.jsxs)(T.default,{href:"/staff/assign-exeat-role",children:[(0,r.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"View All Assignments"]})})]}),(0,r.jsx)(a.aY,{children:s?(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse"}),(0,r.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,r.jsx)("div",{className:"h-4 bg-muted rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-3 bg-muted rounded w-2/3 animate-pulse"})]})]},t))}):0===L.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)(h.Z,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),(0,r.jsx)("p",{children:"No staff assignments yet"}),(0,r.jsx)(i.z,{asChild:!0,variant:"outline",className:"mt-4",children:(0,r.jsxs)(T.default,{href:"/staff/assign-exeat-role",children:[(0,r.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Assign First Role"]})})]}):(0,r.jsx)("div",{className:"space-y-4",children:L.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(h.Z,{className:"h-5 w-5 text-primary"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-sm truncate",children:e.staff_name}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.staff_email})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,r.jsx)(n.C,{variant:"secondary",className:"text-xs",children:e.role_display_name}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,k.WU)(new Date(e.assigned_at),"MMM d")})]})]},"".concat(e.staff_id,"-").concat((0,_.h)(e))))})})]})}),(0,r.jsx)(f,{isOpen:Z,onClose:()=>O(!1),title:"Confirm Bulk Approval",description:"Approve all exeat requests that have passed secretary review and parent consent. This action cannot be undone.",confirmLabel:E?"Approving…":"Approve All",cancelLabel:"Cancel",onConfirm:M})]})}function C(e){let{title:t,value:s,description:n,icon:i,className:o,trend:l,trendValue:d}=e;return(0,r.jsxs)(a.Zb,{className:(0,E.cn)("transition-all duration-200 hover:shadow-md",o),children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[(0,r.jsx)(a.ll,{className:"text-base font-medium",children:t}),(0,r.jsx)(i,{className:"h-5 w-5 text-muted-foreground"})]}),(0,r.jsxs)(a.aY,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-3xl font-bold",children:"number"==typeof s?s.toLocaleString():s}),l&&d&&(0,r.jsxs)("div",{className:(0,E.cn)("flex items-center gap-1 text-sm font-medium","up"===l?"text-green-600":"text-red-600"),children:["up"===l?(0,r.jsx)(b,{className:"h-4 w-4"}):(0,r.jsx)(b,{className:"h-4 w-4 rotate-180"}),d]})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:n})]})]})}},35974:function(e,t,s){"use strict";s.d(t,{C:function(){return o}});var r=s(57437);s(2265);var a=s(90535),n=s(94508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},62869:function(e,t,s){"use strict";s.d(t,{d:function(){return l},z:function(){return d}});var r=s(57437),a=s(2265),n=s(37053),i=s(90535),o=s(94508);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...u}=e,c=d?n.g7:"button";return(0,r.jsx)(c,{className:(0,o.cn)(l({variant:a,size:i,className:s})),ref:t,...u})});d.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return u},ll:function(){return l}});var r=s(57437),a=s(2265),n=s(94508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},39180:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var r=s(68575),a=s(61796);function n(){let e=(0,r.v9)(a.HF);return{user:e,isLoading:(0,r.v9)(a.xU),fullName:e?"".concat(e.fname," ").concat(e.lname):"",initials:e?"".concat(e.fname[0]).concat(e.lname[0]).toUpperCase():"",avatarUrl:(null==e?void 0:e.passport)?"data:image/jpeg;base64,".concat(e.passport):void 0}}},35153:function(e,t,s){"use strict";s.d(t,{Am:function(){return f},pm:function(){return x}});var r=s(2265);let a=0,n=new Map,i=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),m({type:"REMOVE_TOAST",toastId:e})},5e3);n.set(e,t)},l=e=>{let t=i.get(e);t&&(clearTimeout(t),i.delete(e))},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?(l(s),o(s)):e.toasts.forEach(e=>{l(e.id),o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},u=[],c={toasts:[]};function m(e){c=d(c,e),u.forEach(e=>{e(c)})}function f(e){let{duration:t,...s}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=null!=t?t:5e3,o=()=>{l(r),m({type:"DISMISS_TOAST",toastId:r})};m({type:"ADD_TOAST",toast:{...s,id:r,open:!0,duration:n,onOpenChange:e=>{e||o()}}});let d=setTimeout(()=>{o()},n);return i.set(r,d),{id:r,dismiss:o,update:e=>m({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function x(){let[e,t]=r.useState(c);return r.useEffect(()=>(u.push(t),()=>{let e=u.indexOf(t);e>-1&&u.splice(e,1)}),[e]),{...e,toast:f,dismiss:e=>m({type:"DISMISS_TOAST",toastId:e})}}},18025:function(e,t,s){"use strict";s.d(t,{IL:function(){return h},Kp:function(){return y},LB:function(){return d},M0:function(){return o},O6:function(){return p},RE:function(){return c},Sh:function(){return r},TM:function(){return x},TO:function(){return f},Ym:function(){return i},g3:function(){return a},iN:function(){return u},oS:function(){return n},tU:function(){return v},z:function(){return m}});let{useGetStaffAssignmentsQuery:r,useAssignExeatRoleMutation:a,useUnassignExeatRoleMutation:n,useGetRolesQuery:i,useGetStaffListQuery:o,useCreateRoleAssignmentMutation:l,useGetAdminDashboardStatsQuery:d,useGetAdminAuditTrailQuery:u,useGetHostelAssignmentOptionsQuery:c,useCreateHostelAssignmentMutation:m,useGetHostelAssignmentsQuery:f,useUpdateHostelAssignmentStatusMutation:x,useRemoveHostelAssignmentMutation:p,useGetStaffHostelAssignmentsQuery:g,useGetHostelAssignedStaffQuery:h,useGetStudentDebtsQuery:y,useClearStudentDebtMutation:v}=s(46144).h.injectEndpoints({endpoints:e=>({getStaffAssignments:e.query({query:()=>"/admin/staff/assignments",transformResponse:e=>{var t;return(null==e?void 0:e.history)&&Array.isArray(e.history)?e.history:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.history)&&Array.isArray(e.data.history)?e.data.history:(null==e?void 0:e.data)&&Array.isArray(e.data)?e.data:Array.isArray(e)?e:(console.warn("Unexpected response structure for getStaffAssignments:",e),[])},providesTags:["Staff"]}),assignExeatRole:e.mutation({query:e=>{let{staffId:t,exeatRoleId:s}=e;return{url:"/admin/staff/".concat(t,"/assign-exeat-role"),method:"POST",body:{exeat_role_id:s}}},transformResponse:e=>e.data,invalidatesTags:["Staff"]}),unassignExeatRole:e.mutation({query:e=>{let{staffId:t,exeatRoleId:s}=e;return{url:"/admin/staff/".concat(t,"/unassign-exeat-role"),method:"DELETE",body:JSON.stringify({exeat_role_id:s}),headers:{"Content-Type":"application/json"}}},transformResponse:e=>{var t,s;return(null==e?void 0:e.success)!==void 0?e:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.success)!==void 0?e.data:(null==e?void 0:e.message)?{success:!0,message:e.message}:(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)?{success:!0,message:e.data.message}:"string"==typeof e?{success:!0,message:e}:{success:!0,message:"Role unassigned successfully"}},transformErrorResponse:e=>(console.error("Unassign role error response:",e),e),invalidatesTags:["Staff"]}),getRoles:e.query({query:()=>"/admin/roles",transformResponse:e=>{var t;return(null==e?void 0:e.roles)&&Array.isArray(e.roles)?e.roles:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.roles)&&Array.isArray(e.data.roles)?e.data.roles:(null==e?void 0:e.data)&&Array.isArray(e.data)?e.data:Array.isArray(e)?e:(console.warn("Unexpected response structure for getRoles:",e),[])},providesTags:["ExeatRoles"]}),getStaffList:e.query({query:()=>"/admin/staff",transformResponse:e=>{var t;return(null==e?void 0:e.staff)&&Array.isArray(e.staff)?e.staff:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.staff)&&Array.isArray(e.data.staff)?e.data.staff:(null==e?void 0:e.data)&&Array.isArray(e.data)?e.data:Array.isArray(e)?e:(console.warn("Unexpected response structure for getStaffList:",e),[])},providesTags:["Staff"]}),createRoleAssignment:e.mutation({query:e=>({url:"/admin/roles",method:"POST",body:e}),transformResponse:e=>e.data,invalidatesTags:["Staff","ExeatRoles"]}),getAdminDashboardStats:e.query({query:()=>"/dashboard/admin",transformResponse:e=>e.data,providesTags:["DashboardStats"]}),getAdminAuditTrail:e.query({query:function(){let{page:e=1,per_page:t=20}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:"/dashboard/dean",params:{page:e,per_page:t}}},transformResponse:e=>e,providesTags:["Admin"]}),getHostelAssignmentOptions:e.query({query:e=>{let{per_page:t=15,page:s=1}=e;return{url:"/admin/hostel-assignments/options",params:{per_page:t,page:s}}},transformResponse:e=>e.data,providesTags:["Admin"]}),createHostelAssignment:e.mutation({query:e=>({url:"/admin/hostel-assignments",method:"POST",body:e}),transformResponse:e=>e,invalidatesTags:["Admin"]}),getHostelAssignments:e.query({query:e=>({url:"/admin/hostel-assignments",params:e}),transformResponse:e=>e,providesTags:["Admin"]}),updateHostelAssignmentStatus:e.mutation({query:e=>{let{id:t,status:s}=e;return{url:"/admin/hostel-assignments/".concat(t),method:"PUT",body:{status:s}}},transformResponse:e=>e,invalidatesTags:["Admin"]}),removeHostelAssignment:e.mutation({query:e=>({url:"/admin/hostel-assignments/".concat(e),method:"DELETE"}),transformResponse:e=>e,invalidatesTags:["Admin"]}),getStaffHostelAssignments:e.query({query:e=>"/admin/hostel-assignments/staff/".concat(e),transformResponse:e=>e,providesTags:["Admin"]}),getHostelAssignedStaff:e.query({query:e=>"/admin/hostel-assignments/hostel/".concat(e),transformResponse:e=>e,providesTags:["Admin"]}),getStudentDebts:e.query({query:e=>({url:"/admin/student-debts",params:e}),transformResponse:e=>e,providesTags:["Admin"]}),clearStudentDebt:e.mutation({query:e=>{let{id:t,data:s}=e;return{url:"/admin/student-debts/".concat(t,"/clear"),method:"POST",body:s}},transformResponse:e=>e,invalidatesTags:["Admin"]})})})},46144:function(e,t,s){"use strict";s.d(t,{h:function(){return l}});var r=s(79523),a=s(23557);let n=e=>e().auth.token,i=(0,r.ni)({baseUrl:"https://attendance.veritas.edu.ng/api",prepareHeaders:(e,t)=>{let{getState:s}=t,r=n(s);return r&&e.set("Authorization","Bearer ".concat(r)),e.set("Content-Type","application/json"),e.set("Accept","application/json"),e}}),o=async(e,t,s)=>{let r=await i(e,t,s);return r.error&&401===r.error.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login")),r},l=(0,a.LC)({reducerPath:"api",baseQuery:o,tagTypes:["Profile","ExeatCategories","ExeatRequests","ExeatRoles","Staff","ExeatRequests","DashboardStats","Admin","StudentDebts"],endpoints:()=>({})})},16262:function(e,t,s){"use strict";s.d(t,{Mx:function(){return i},YA:function(){return a},_y:function(){return n},iJ:function(){return r}});let r=s(46144).h.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>({url:"/login",method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"/logout",method:"POST"})}),getProfile:e.query({query:()=>"/me",providesTags:["Profile"]})})}),{useLoginMutation:a,useLogoutMutation:n,useGetProfileQuery:i}=r},61796:function(e,t,s){"use strict";s.d(t,{Dj:function(){return m},HF:function(){return f},kS:function(){return c},vN:function(){return x},xU:function(){return p}});var r=s(39129),a=s(16262);let n=e=>{try{return localStorage.getItem(e)}catch(e){return null}},i=()=>{let e=n("user");try{let t=e?JSON.parse(e):null;if(t&&t.exeat_roles&&!t.roles){let e=t.exeat_roles.map(e=>{var t;return(null==e?void 0:null===(t=e.role)||void 0===t?void 0:t.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"});t.roles=e}return t}catch(e){return null}},o={user:i(),token:n("token"),isAuthenticated:!!(n("token")&&i()),isLoading:!1},l=(0,r.oM)({name:"auth",initialState:o,reducers:{startLoading:e=>{e.isLoading=!0},stopLoading:e=>{e.isLoading=!1},logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")},setCredentials:(e,t)=>{let{user:s,role:r,token:a}=t.payload,n=(null==s?void 0:s.exeat_roles)||t.payload.roles,i=Array.isArray(n)?n.map(e=>{var t;return(null==e?void 0:null===(t=e.role)||void 0===t?void 0:t.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"}):[],o={...s,role:r,roles:i};e.user=o,e.token=a,e.isAuthenticated=!0,localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(o))}},extraReducers:e=>{e.addMatcher(a.iJ.endpoints.login.matchPending,e=>{e.isLoading=!0}).addMatcher(a.iJ.endpoints.login.matchFulfilled,(e,t)=>{var s;let{payload:r}=t,a=(null===(s=r.user)||void 0===s?void 0:s.exeat_roles)||r.roles,n=Array.isArray(a)?a.map(e=>{var t;return(null==e?void 0:null===(t=e.role)||void 0===t?void 0:t.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"}):[],i={...r.user,role:r.role,roles:n};e.user=i,e.token=r.token,e.isAuthenticated=!0,e.isLoading=!1,localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(i))}).addMatcher(a.iJ.endpoints.login.matchRejected,e=>{e.isLoading=!1})}}),{startLoading:d,stopLoading:u,logout:c,setCredentials:m}=l.actions;t.ZP=l.reducer;let f=e=>e.auth.user,x=e=>e.auth.isAuthenticated,p=e=>e.auth.isLoading},39248:function(e,t,s){"use strict";s.d(t,{DC:function(){return i},NL:function(){return r},Ve:function(){return l},Y2:function(){return n},c4:function(){return o}});let{useGetCategoriesQuery:r,useGetStudentProfileFromExeatQuery:a,useCreateExeatRequestMutation:n,useGetExeatRequestsQuery:i,useGetExeatRequestDetailsQuery:o,useGetExeatRequestHistoryQuery:l}=s(46144).h.injectEndpoints({endpoints:e=>({getExeatRequests:e.query({query:()=>"/student/exeat-requests",providesTags:["ExeatRequests"]}),getCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e}),getStudentProfileFromExeat:e.query({query:()=>"/me",transformResponse:e=>{var t;if(!e.success||!(null===(t=e.data)||void 0===t?void 0:t.profile))throw Error("Failed to load profile data");return e.data}}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequestHistory:e.query({query:e=>"/student/exeat-requests/".concat(e,"/history"),providesTags:["ExeatRequests"]}),getExeatRequestDetails:e.query({query:e=>"/student/exeat-requests/".concat(e),providesTags:["ExeatRequests"]})})})},28233:function(e,t,s){"use strict";s.d(t,{CD:function(){return j},Og:function(){return u},RX:function(){return p},Rk:function(){return o},Sr:function(){return a},Tq:function(){return c},Vm:function(){return l},b:function(){return r},cu:function(){return n},js:function(){return g},mM:function(){return v},oZ:function(){return x},s$:function(){return m},ui:function(){return y},vN:function(){return i},w9:function(){return f},xA:function(){return q},yH:function(){return d}});let{useGetStaffProfileQuery:r,useGetAllExeatRequestsQuery:a,useGetExeatRequestsByStatusQuery:n,useGetExeatRequestByIdQuery:i,useGetExeatRequestsByStudentIdQuery:o,useApproveExeatRequestMutation:l,useRejectExeatRequestMutation:d,useSignStudentOutMutation:u,useSignStudentInMutation:c,useGetExeatStatisticsQuery:m,useGetCompletedExeatRequestsQuery:f,useGetCompletedExeatRequestDetailsQuery:x,useGetRejectedExeatRequestsQuery:p,useGetRejectedExeatRequestDetailsQuery:g,useGetStaffDashboardStatsQuery:h,useSendCommentMutation:y,useEditExeatRequestMutation:v,useDeanApplyExeatRequestMutation:j,useDeanBulkApproveExeatsMutation:q}=s(46144).h.injectEndpoints({endpoints:e=>({getStaffProfile:e.query({query:()=>"/me",transformResponse:e=>e.user,providesTags:["Profile"]}),getAllExeatRequests:e.query({query:()=>"/staff/exeat-requests",transformResponse:e=>e.exeat_requests,providesTags:["ExeatRequests"]}),getExeatRequestsByStudentId:e.query({query:e=>({url:"/staff/exeat-requests",params:{student_id:e}}),transformResponse:e=>{var t;return Array.isArray(e)?e:"exeat_requests"in e?e.exeat_requests:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.exeat_requests)?e.data.exeat_requests:[]},providesTags:["ExeatRequests"]}),getExeatRequestsByStatus:e.query({query:e=>"/staff/exeat-requests?status=".concat(e),transformResponse:e=>e.exeat_requests,providesTags:["ExeatRequests"]}),getExeatRequestById:e.query({query:e=>"/staff/exeat-requests/".concat(e),transformResponse:e=>{if((null==e?void 0:e.message)&&e.message.includes("permission"))throw Error(e.message);if(null==e?void 0:e.exeat_request)return e.exeat_request;throw Error("Invalid response format from server")},providesTags:(e,t,s)=>[{type:"ExeatRequests",id:s}]}),approveExeatRequest:e.mutation({query:e=>{let{exeat_request_id:t,comment:s}=e;return{url:"/staff/exeat-requests/".concat(t,"/approve"),method:"POST",body:{comment:s}}},invalidatesTags:["ExeatRequests"]}),rejectExeatRequest:e.mutation({query:e=>{let{exeat_request_id:t,comment:s}=e;return{url:"/staff/exeat-requests/".concat(t,"/reject"),method:"POST",body:{comment:s}}},invalidatesTags:["ExeatRequests"]}),signStudentOut:e.mutation({query:e=>{let{exeat_request_id:t,comment:s}=e;return{url:"/staff/exeat-requests/".concat(t,"/sign-out"),method:"POST",body:{comment:s}}},invalidatesTags:["ExeatRequests"]}),signStudentIn:e.mutation({query:e=>{let{exeat_request_id:t,comment:s}=e;return{url:"/staff/exeat-requests/".concat(t,"/sign-in"),method:"POST",body:{comment:s}}},invalidatesTags:["ExeatRequests"]}),getExeatStatistics:e.query({query:()=>"/staff/exeat-statistics",transformResponse:e=>e.data,providesTags:["Staff"]}),getCompletedExeatRequests:e.query({query:function(){let{page:e=1,per_page:t=50}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:"/exeats/by-status/completed",params:{page:e,per_page:t}}},transformResponse:e=>e,providesTags:["ExeatRequests"]}),getCompletedExeatRequestDetails:e.query({query:e=>"/exeats/by-status/completed/".concat(e),transformResponse:e=>e,providesTags:["ExeatRequests"]}),getStaffDashboardStats:e.query({query:()=>"/staff/dashboard",transformResponse:e=>e,providesTags:["DashboardStats"]}),getRejectedExeatRequests:e.query({query:function(){let{page:e=1,per_page:t=50}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:"/exeats/by-status/rejected",params:{page:e,per_page:t}}},transformResponse:e=>e,providesTags:["ExeatRequests"]}),getRejectedExeatRequestDetails:e.query({query:e=>"/exeats/by-status/rejected/".concat(e),transformResponse:e=>e,providesTags:["ExeatRequests"]}),sendComment:e.mutation({query:e=>{let{exeat_request_id:t,comment:s}=e;return{url:"/staff/exeat-requests/".concat(t,"/send-comment"),method:"POST",body:{comment:s,priority:"high"}}},invalidatesTags:["ExeatRequests"]}),editExeatRequest:e.mutation({query:e=>{let{exeat_request_id:t,payload:s}=e;return{url:"/staff/exeat-requests/".concat(t),method:"PUT",body:s}},invalidatesTags:["ExeatRequests"]}),deanApplyExeatRequest:e.mutation({query:e=>({url:"/dean/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),deanBulkApproveExeats:e.mutation({query:()=>({url:"/dean/exeat-requests/bulkAprroval",method:"POST"}),invalidatesTags:["ExeatRequests"]})})})},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},81499:function(e,t,s){"use strict";s.d(t,{h:function(){return r}});let r=e=>{if(!e)return"Unknown Role";if("string"==typeof e)return e;if("object"==typeof e){if(e.role&&"object"==typeof e.role&&e.role.name)return e.role.name;if(e.name)return e.name;if(e.display_name)return e.display_name}return"Unknown Role"}},36549:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},91230:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},25361:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},24287:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},74376:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},87928:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},53459:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},69626:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},36086:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},16994:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(96471).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[2915,3557,9946,3448,2971,2117,1744],function(){return e(e.s=50425)}),_N_E=e.O()}]);