(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8625],{9379:function(e,s,t){Promise.resolve().then(t.bind(t,33983))},33983:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return O}});var a=t(57437),l=t(2265),n=t(66070),r=t(62869),i=t(35974),d=t(95186),c=t(53647),o=t(18025),m=t(24287),f=t(74376),u=t(25361),x=t(69626),h=t(29935),p=t(49812),j=t(23818),N=t(67350),g=t(13147),v=t(55672),w=t(15847),y=t(43728),b=t(27107),Z=t(27648),C=t(33145),A=t(99376),_=t(35153),k=t(84190),R=t(37099);let z=[{value:"all",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function O(){var e,s;let[t,O]=(0,l.useState)(""),[S,F]=(0,l.useState)("all"),[Y,T]=(0,l.useState)(1),[E,U]=(0,l.useState)(15),[V,L]=(0,l.useState)(!1),[M,I]=(0,l.useState)(null),X=(0,A.useRouter)(),{data:$,isLoading:D,refetch:B}=(0,o.TO)({status:"all"===S?void 0:S,page:Y,per_page:E}),{data:G}=(0,o.M0)(),[P]=(0,o.TM)(),[Q]=(0,o.O6)(),W=(null==$?void 0:null===(e=$.data)||void 0===e?void 0:e.data)||[],H=(null==$?void 0:null===(s=$.data)||void 0===s?void 0:s.total)||0,J=e=>{let s=null==G?void 0:G.find(s=>s.id===e);return s?"".concat(s.fname," ").concat(s.lname):"Staff ID: ".concat(e)},q=W.filter(e=>{let s=t.toLowerCase();return""===t||e.hostel.name.toLowerCase().includes(s)||"".concat(e.staff.fname," ").concat(e.staff.lname).toLowerCase().includes(s)||e.staff.fname.toLowerCase().includes(s)||e.staff.lname.toLowerCase().includes(s)}),K=W.filter(e=>"active"===e.status).length,ee=W.filter(e=>"inactive"===e.status).length,es=async(e,s)=>{try{await P({id:e,status:s}).unwrap(),(0,_.Am)({title:"Success",description:"Assignment ".concat("active"===s?"activated":"deactivated"," successfully.")}),B()}catch(e){(0,_.Am)({title:"Error",description:"Failed to update assignment status.",variant:"destructive"})}},et=e=>{I(e),L(!0)},ea=async()=>{if(M)try{await Q(M).unwrap(),(0,_.Am)({title:"Success",description:"Assignment removed successfully."}),B()}catch(e){(0,_.Am)({title:"Error",description:"Failed to remove assignment.",variant:"destructive"})}finally{L(!1),I(null)}},el=e=>{switch(e){case"active":return(0,a.jsx)(m.Z,{className:"h-4 w-4 text-green-600"});case"inactive":return(0,a.jsx)(f.Z,{className:"h-4 w-4 text-red-600"});default:return(0,a.jsx)(u.Z,{className:"h-4 w-4 text-yellow-600"})}},en=e=>{switch(e){case"active":return(0,a.jsx)(i.C,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"});case"inactive":return(0,a.jsx)(i.C,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Inactive"});default:return(0,a.jsx)(i.C,{variant:"outline",children:"Unknown"})}};return(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Hostel Assignments"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage staff assignments to hostels"})]}),(0,a.jsx)(r.z,{asChild:!0,className:"w-full sm:w-auto",children:(0,a.jsxs)(Z.default,{href:"/staff/admin/hostel-assignments/create",children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"New Assignment"]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Assignments"}),(0,a.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:H}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All hostel assignments"})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Active Assignments"}),(0,a.jsx)(m.Z,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:K}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Inactive Assignments"}),(0,a.jsx)(f.Z,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:ee}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently inactive"})]})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5"}),"Filters"]})}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,a.jsx)(d.I,{placeholder:"Search by hostel name or staff name...",value:t,onChange:e=>O(e.target.value),className:"pl-10"})]}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)(c.Ph,{value:S,onValueChange:F,children:[(0,a.jsx)(c.i4,{children:(0,a.jsx)(c.ki,{placeholder:"Filter by status"})}),(0,a.jsx)(c.Bw,{children:z.map(e=>(0,a.jsx)(c.Ql,{value:e.value,children:e.label},e.value))})]})})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsx)(n.ll,{children:"Assignments"}),(0,a.jsxs)(n.SZ,{children:[q.length," of ",H," assignments"]})]}),(0,a.jsx)(n.aY,{children:D?(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg animate-pulse",children:[(0,a.jsx)("div",{className:"h-12 w-12 bg-gray-200 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16"})]},s))}):0===q.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No assignments found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:t||"all"!==S?"Try adjusting your search or filters.":"Get started by creating a new assignment."}),!t&&"all"===S&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(r.z,{asChild:!0,children:(0,a.jsxs)(Z.default,{href:"/staff/admin/hostel-assignments/create",children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"New Assignment"]})})})]}):(0,a.jsx)("div",{className:"space-y-4",children:q.map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[(0,a.jsx)("div",{className:"size-16 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 overflow-hidden",children:e.staff.passport?(0,a.jsx)(C.default,{src:"data:image/jpeg;base64,".concat(e.staff.passport),alt:"".concat(e.staff.fname," ").concat(e.staff.lname,"'s passport"),width:48,height:48,className:"h-full w-full object-contain",unoptimized:!0}):(0,a.jsx)(N.Z,{className:"h-6 w-6 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.hostel.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[el(e.status),en(e.status)]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.staff.fname," ",e.staff.lname]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Assigned: ",(0,b.WU)(new Date(e.assigned_at),"MMM d, yyyy")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)(N.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Assigned by: ",J(e.assigned_by)]})]}),e.notes&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground italic",children:["Note: ",e.notes]})]})]}),(0,a.jsx)("div",{className:"flex-shrink-0 w-full sm:w-auto",children:(0,a.jsxs)(k.h_,{children:[(0,a.jsx)(k.$F,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",size:"icon",className:"w-full sm:w-auto",children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(k.AW,{align:"end",className:"w-48",children:[(0,a.jsxs)(k.Xi,{onClick:()=>X.push("/staff/admin/hostel-assignments/hostel/".concat(e.vuna_accomodation_id,"/staff")),children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"View Hostel"]}),(0,a.jsxs)(k.Xi,{onClick:()=>X.push("/staff/admin/hostel-assignments/".concat(e.id,"/edit")),children:[(0,a.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsx)(k.Xi,{onClick:()=>es(e.id,"active"===e.status?"inactive":"active"),children:"active"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Activate"]})}),(0,a.jsxs)(k.Xi,{onClick:()=>et(e.id),className:"text-destructive",children:[(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Remove"]})]})]})})]},e.id))})})]}),(0,a.jsx)(R.aR,{open:V,onOpenChange:L,children:(0,a.jsxs)(R._T,{children:[(0,a.jsxs)(R.fY,{children:[(0,a.jsx)(R.f$,{children:"Remove Assignment"}),(0,a.jsx)(R.yT,{children:"Are you sure you want to remove this hostel assignment? This action cannot be undone."})]}),(0,a.jsxs)(R.xo,{children:[(0,a.jsx)(R.le,{children:"Cancel"}),(0,a.jsx)(R.OL,{onClick:ea,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remove"})]})]})})]})}},84190:function(e,s,t){"use strict";t.d(s,{$F:function(){return m},AW:function(){return u},Ju:function(){return h},Qk:function(){return f},VD:function(){return p},Xi:function(){return x},h_:function(){return o}});var a=t(57437),l=t(2265),n=t(12465),r=t(76848),i=t(59559),d=t(78084),c=t(94508);let o=n.fC,m=n.xz,f=n.ZA;n.Uv,n.Tr,n.Ee,l.forwardRef((e,s)=>{let{className:t,inset:l,children:i,...d}=e;return(0,a.jsxs)(n.fF,{ref:s,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",l&&"pl-8",t),...d,children:[i,(0,a.jsx)(r.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.tu,{ref:s,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})}).displayName=n.tu.displayName;let u=l.forwardRef((e,s)=>{let{className:t,sideOffset:l=4,...r}=e;return(0,a.jsx)(n.Uv,{children:(0,a.jsx)(n.VY,{ref:s,sideOffset:l,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})});u.displayName=n.VY.displayName;let x=l.forwardRef((e,s)=>{let{className:t,inset:l,...r}=e;return(0,a.jsx)(n.ck,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",t),...r})});x.displayName=n.ck.displayName,l.forwardRef((e,s)=>{let{className:t,children:l,checked:r,...d}=e;return(0,a.jsxs)(n.oC,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...d,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})}),l]})}).displayName=n.oC.displayName,l.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(n.Rk,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(d.Z,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=n.Rk.displayName;let h=l.forwardRef((e,s)=>{let{className:t,inset:l,...r}=e;return(0,a.jsx)(n.__,{ref:s,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",t),...r})});h.displayName=n.__.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...l})});p.displayName=n.Z0.displayName},53647:function(e,s,t){"use strict";t.d(s,{Bw:function(){return h},Ph:function(){return o},Ql:function(){return p},i4:function(){return f},ki:function(){return m}});var a=t(57437),l=t(2265),n=t(74797),r=t(3289),i=t(47969),d=t(59559),c=t(94508);let o=n.fC;n.ZA;let m=n.B4,f=l.forwardRef((e,s)=>{let{className:t,children:l,...i}=e;return(0,a.jsxs)(n.xz,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[l,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(r.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=n.xz.displayName;let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});u.displayName=n.u_.displayName;let x=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(r.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let h=l.forwardRef((e,s)=>{let{className:t,children:l,position:r="popper",...i}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,a.jsx)(u,{}),(0,a.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(x,{})]})})});h.displayName=n.VY.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=n.__.displayName;let p=l.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(n.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:l})]})});p.displayName=n.ck.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=n.Z0.displayName}},function(e){e.O(0,[2915,3557,9946,3448,5844,9049,2061,9923,3145,1,7873,5359,1824,4879,2971,2117,1744],function(){return e(e.s=9379)}),_N_E=e.O()}]);