(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9288],{36278:function(e,t,s){Promise.resolve().then(s.bind(s,67760))},67760:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Y}});var a=s(57437),n=s(2265),r=s(99376),i=s(66070),o=s(62869),l=s(26815),d=s(76818),c=s(78667),u=s(98575),f=s(73966),m=s(6741),p=s(80886),h=s(6718),x=s(90420),g=s(71599),v=s(82912),y="Checkbox",[b,j]=(0,f.b)(y),[N,w]=b(y);function A(e){let{__scopeCheckbox:t,checked:s,children:r,defaultChecked:i,disabled:o,form:l,name:d,onCheckedChange:c,required:u,value:f="on",internal_do_not_use_render:m}=e,[h,x]=(0,p.T)({prop:s,defaultProp:null!=i&&i,onChange:c,caller:y}),[g,v]=n.useState(null),[b,j]=n.useState(null),w=n.useRef(!1),A=!g||!!l||!!g.closest("form"),_={checked:h,disabled:o,setChecked:x,control:g,setControl:v,name:d,form:l,value:f,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:!q(i)&&i,isFormControl:A,bubbleInput:b,setBubbleInput:j};return(0,a.jsx)(N,{scope:t,..._,children:"function"==typeof m?m(_):r})}var _="CheckboxTrigger",S=n.forwardRef((e,t)=>{let{__scopeCheckbox:s,onKeyDown:r,onClick:i,...o}=e,{control:l,value:d,disabled:c,checked:f,required:p,setControl:h,setChecked:x,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:b}=w(_,s),j=(0,u.e)(t,h),N=n.useRef(f);return n.useEffect(()=>{let e=null==l?void 0:l.form;if(e){let t=()=>x(N.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,x]),(0,a.jsx)(v.WV.button,{type:"button",role:"checkbox","aria-checked":q(f)?"mixed":f,"aria-required":p,"data-state":M(f),"data-disabled":c?"":void 0,disabled:c,value:d,...o,ref:j,onKeyDown:(0,m.Mj)(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,m.Mj)(i,e=>{x(e=>!!q(e)||!e),b&&y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});S.displayName=_;var k=n.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:n,checked:r,defaultChecked:i,required:o,disabled:l,value:d,onCheckedChange:c,form:u,...f}=e;return(0,a.jsx)(A,{__scopeCheckbox:s,checked:r,defaultChecked:i,disabled:l,required:o,onCheckedChange:c,name:n,form:u,value:d,internal_do_not_use_render:e=>{let{isFormControl:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{...f,ref:t,__scopeCheckbox:s}),n&&(0,a.jsx)(C,{__scopeCheckbox:s})]})}})});k.displayName=y;var R="CheckboxIndicator",T=n.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:n,...r}=e,i=w(R,s);return(0,a.jsx)(g.z,{present:n||q(i.checked)||!0===i.checked,children:(0,a.jsx)(v.WV.span,{"data-state":M(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...e.style}})})});T.displayName=R;var E="CheckboxBubbleInput",C=n.forwardRef((e,t)=>{let{__scopeCheckbox:s,...r}=e,{control:i,hasConsumerStoppedPropagationRef:o,checked:l,defaultChecked:d,required:c,disabled:f,name:m,value:p,form:g,bubbleInput:y,setBubbleInput:b}=w(E,s),j=(0,u.e)(t,b),N=(0,h.D)(l),A=(0,x.t)(i);n.useEffect(()=>{if(!y)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!o.current;if(N!==l&&e){let s=new Event("click",{bubbles:t});y.indeterminate=q(l),e.call(y,!q(l)&&l),y.dispatchEvent(s)}},[y,N,l,o]);let _=n.useRef(!q(l)&&l);return(0,a.jsx)(v.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=d?d:_.current,required:c,disabled:f,name:m,value:p,form:g,...r,tabIndex:-1,ref:j,style:{...r.style,...A,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function q(e){return"indeterminate"===e}function M(e){return q(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=E;var O=s(59559),Z=s(94508);let D=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(k,{ref:t,className:(0,Z.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...n,children:(0,a.jsx)(T,{className:(0,Z.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(O.Z,{className:"h-4 w-4"})})})});D.displayName=k.displayName;var z=s(18025),I=s(5485),V=s(29935),H=s(67350),L=s(53459),P=s(35465),F=s(27648),U=s(35153);function Y(){var e;let t=(0,r.useRouter)(),[s,u]=(0,n.useState)({vuna_accomodation_id:"",staff_id:"",auto_assign_role:!1,notes:""}),[f,m]=(0,n.useState)(!1),{data:p,isLoading:h}=(0,z.RE)({per_page:100,page:1}),{data:x,isLoading:g}=(0,z.M0)(),[v]=(0,z.z)(),y=(null==p?void 0:null===(e=p.hostels)||void 0===e?void 0:e.data)||[],b=(0,n.useMemo)(()=>y?y.map(e=>({value:e.id.toString(),label:e.name,description:"".concat(e.gender," hostel")})):[],[y]),j=(0,n.useMemo)(()=>x?x.map(e=>({value:String(e.id),label:"".concat(e.fname).concat(e.middle_name?" "+e.middle_name:""," ").concat(e.lname),description:e.email})):[],[x]),N=x?x.map(e=>({id:e.id,fname:e.fname,lname:e.lname,middle_name:e.middle_name,email:e.email})):[],w=(e,t)=>{u(s=>({...s,[e]:t}))},A=async e=>{if(e.preventDefault(),!s.vuna_accomodation_id||!s.staff_id){(0,U.Am)({title:"Validation Error",description:"Please select both a hostel and staff member.",variant:"destructive"});return}m(!0);try{let e=await v({vuna_accomodation_id:parseInt(s.vuna_accomodation_id),staff_id:parseInt(s.staff_id),auto_assign_role:s.auto_assign_role,notes:s.notes||void 0}).unwrap();(0,U.Am)({title:"Success",description:e.message||"Hostel assignment created successfully."}),t.push("/staff/admin/hostel-assignments")}catch(e){var a;console.error("Error creating assignment:",e),(0,U.Am)({title:"Error",description:(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to create hostel assignment.",variant:"destructive"})}finally{m(!1)}},_=y.find(e=>e.id.toString()===s.vuna_accomodation_id),S=N.find(e=>e.id.toString()===s.staff_id);return(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,a.jsx)(o.z,{variant:"ghost",size:"icon",asChild:!0,className:"self-start",children:(0,a.jsx)(F.default,{href:"/staff/admin/hostel-assignments",children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Create Hostel Assignment"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Assign a staff member to manage a hostel"})]})]}),(0,a.jsxs)("form",{onSubmit:A,className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(V.Z,{className:"h-5 w-5"}),"Assignment Details"]}),(0,a.jsx)(i.SZ,{children:"Select the hostel and staff member for this assignment"})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"hostel",children:"Hostel *"}),(0,a.jsx)(c.V,{options:b,value:s.vuna_accomodation_id,onValueChange:e=>w("vuna_accomodation_id",e),placeholder:"Select a hostel",searchPlaceholder:"Search hostels by name or gender...",emptyMessage:"No hostels found",disabled:h}),h&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading hostels..."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"staff",children:"Staff Member *"}),(0,a.jsx)(c.V,{options:j,value:s.staff_id,onValueChange:e=>w("staff_id",e),placeholder:"Select a staff member",searchPlaceholder:"Search staff by name or email...",emptyMessage:"No staff members found",disabled:h||g}),(h||g)&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading staff..."})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(D,{id:"auto_assign_role",checked:s.auto_assign_role,onCheckedChange:e=>w("auto_assign_role",e)}),(0,a.jsx)(l._,{htmlFor:"auto_assign_role",className:"text-sm",children:"Automatically assign hostel admin role"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"notes",children:"Notes (Optional)"}),(0,a.jsx)(d.g,{id:"notes",placeholder:"Add any additional notes about this assignment...",value:s.notes,onChange:e=>w("notes",e.target.value),rows:3})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{children:"Assignment Preview"}),(0,a.jsx)(i.SZ,{children:"Review the assignment details before creating"})]}),(0,a.jsx)(i.aY,{className:"space-y-4",children:_&&S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"p-4 border rounded-lg bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(V.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:_.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[_.gender," hostel"]})]})]})}),(0,a.jsx)("div",{className:"p-4 border rounded-lg bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(H.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold",children:[S.fname," ",S.lname]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:S.email})]})]})}),s.auto_assign_role&&(0,a.jsx)("div",{className:"p-3 border rounded-lg bg-blue-50 border-blue-200",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Auto-assign:"})," Hostel admin role will be automatically assigned"]})}),s.notes&&(0,a.jsx)("div",{className:"p-3 border rounded-lg bg-gray-50",children:(0,a.jsxs)("p",{className:"text-sm text-gray-800",children:[(0,a.jsx)("strong",{children:"Notes:"})," ",s.notes]})})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(V.Z,{className:"mx-auto h-12 w-12 mb-2"}),(0,a.jsx)("p",{children:"Select a hostel and staff member to see preview"})]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-3 sm:gap-4",children:[(0,a.jsx)(o.z,{type:"button",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:(0,a.jsx)(F.default,{href:"/staff/admin/hostel-assignments",children:"Cancel"})}),(0,a.jsx)(o.z,{type:"submit",disabled:f||!s.vuna_accomodation_id||!s.staff_id,className:"w-full sm:w-auto min-w-[120px]",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Z,{className:"mr-2 h-4 w-4"}),"Create Assignment"]})})]})]})]})}},62869:function(e,t,s){"use strict";s.d(t,{d:function(){return l},z:function(){return d}});var a=s(57437),n=s(2265),r=s(37053),i=s(90535),o=s(94508);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:s})),ref:t,...c})});d.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var a=s(57437),n=s(2265),r=s(94508);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},26110:function(e,t,s){"use strict";s.d(t,{$N:function(){return p},Be:function(){return h},Vq:function(){return l},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=s(57437),n=s(2265),r=s(70001),i=s(44986),o=s(94508);let l=r.fC;r.xz;let d=r.h_;r.x8;let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});c.displayName=r.aV.displayName;let u=n.forwardRef((e,t)=>{let{className:s,children:n,...l}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(r.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[n,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=r.VY.displayName;let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};f.displayName="DialogHeader";let m=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};m.displayName="DialogFooter";let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",s),...n})});p.displayName=r.Dx.displayName;let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...n})});h.displayName=r.dk.displayName},95186:function(e,t,s){"use strict";s.d(t,{I:function(){return o}});var a=s(57437),n=s(2265),r=s(94508),i=s(26815);let o=n.forwardRef((e,t)=>{let{className:s,type:o,label:l,id:d,...c}=e,u=d||n.useId();return(0,a.jsxs)("div",{className:"space-y-1",children:[l&&(0,a.jsx)(i._,{htmlFor:u,children:l}),(0,a.jsx)("input",{id:u,type:o,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...c})]})});o.displayName="Input"},26815:function(e,t,s){"use strict";s.d(t,{_:function(){return d}});var a=s(57437),n=s(2265),r=s(370),i=s(90535),o=s(94508);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.f,{ref:t,className:(0,o.cn)(l(),s),...n})});d.displayName=r.f.displayName},57054:function(e,t,s){"use strict";s.d(t,{J2:function(){return o},xo:function(){return l},yk:function(){return d}});var a=s(57437),n=s(2265),r=s(51777),i=s(94508);let o=r.fC,l=r.xz,d=n.forwardRef((e,t)=>{let{className:s,align:n="center",sideOffset:o=4,...l}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsx)(r.VY,{ref:t,align:n,sideOffset:o,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})})});d.displayName=r.VY.displayName},78667:function(e,t,s){"use strict";s.d(t,{V:function(){return p}});var a=s(57437),n=s(2265),r=s(23818),i=s(44986),o=s(59559),l=s(40822),d=s(94508),c=s(62869),u=s(26110),f=s(57054),m=s(95186);function p(e){let{options:t,value:s,onValueChange:p,placeholder:h="Select an option",searchPlaceholder:x="Search...",emptyMessage:g="No results found",disabled:v=!1,className:y}=e,[b,j]=n.useState(!1),[N,w]=n.useState(""),[A,_]=n.useState(!1);n.useEffect(()=>{let e=()=>{_(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let S=n.useMemo(()=>{let e=N.toLowerCase();return t.filter(t=>{var s;return t.label.toLowerCase().includes(e)||(null===(s=t.description)||void 0===s?void 0:s.toLowerCase().includes(e))})},[t,N]),k=t.find(e=>e.value===s),R=e=>{p(e),j(!1),w("")},T=e=>{j(e),e||w("")};n.useEffect(()=>{b||w("")},[b]);let E=()=>(0,a.jsxs)("div",{className:"flex flex-col h-full min-h-0",children:[(0,a.jsx)("div",{className:"p-3 border-b flex-shrink-0 bg-white",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(m.I,{placeholder:x,value:N,onChange:e=>w(e.target.value),className:"pl-9 pr-9 h-10",autoFocus:!0}),N&&(0,a.jsx)(c.z,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0",onClick:()=>w(""),children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto min-h-0",children:(0,a.jsx)("div",{className:"p-2",children:0===S.length?(0,a.jsx)("div",{className:"py-8 text-center text-sm text-muted-foreground",children:g}):S.map(e=>(0,a.jsxs)("button",{onClick:()=>R(e.value),className:(0,d.cn)("w-full flex items-center gap-3 px-3 py-3 text-sm rounded-md hover:bg-accent transition-colors text-left",s===e.value&&"bg-accent"),children:[(0,a.jsx)(o.Z,{className:(0,d.cn)("h-4 w-4 flex-shrink-0",s===e.value?"opacity-100":"opacity-0")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium leading-tight",children:e.label}),e.description&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground truncate mt-0.5",children:e.description})]})]},e.value))})})]});return A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.z,{variant:"outline",role:"combobox","aria-expanded":b,className:(0,d.cn)("w-full justify-between",y),onClick:()=>j(!0),disabled:v,children:[(0,a.jsx)("span",{className:"truncate",children:k?k.label:h}),(0,a.jsx)(l.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),(0,a.jsx)(u.Vq,{open:b,onOpenChange:T,children:(0,a.jsxs)(u.cZ,{className:"max-w-[95vw] w-full p-0 gap-0 flex flex-col !top-4 !translate-y-0 !bottom-auto data-[state=open]:slide-in-from-top-4 data-[state=closed]:slide-out-to-top-4 rounded-b-lg rounded-t-lg",style:{maxHeight:"55vh",minHeight:"300px"},onInteractOutside:e=>{j(!1),w("")},onEscapeKeyDown:e=>{j(!1),w("")},children:[(0,a.jsx)(u.fK,{className:"px-4 py-3 border-b flex-shrink-0 bg-white rounded-t-lg",children:(0,a.jsx)(u.$N,{className:"text-base",children:h})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:(0,a.jsx)(E,{})})]})})]}):(0,a.jsxs)(f.J2,{open:b,onOpenChange:T,children:[(0,a.jsx)(f.xo,{asChild:!0,children:(0,a.jsxs)(c.z,{variant:"outline",role:"combobox","aria-expanded":b,className:(0,d.cn)("w-full justify-between",y),disabled:v,children:[(0,a.jsx)("span",{className:"truncate",children:k?k.label:h}),(0,a.jsx)(l.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,a.jsx)(f.yk,{className:"w-[--radix-popover-trigger-width] p-0 max-h-[400px] flex flex-col",align:"start",children:(0,a.jsx)(E,{})})]})}},76818:function(e,t,s){"use strict";s.d(t,{g:function(){return i}});var a=s(57437),n=s(2265),r=s(94508);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});i.displayName="Textarea"},35153:function(e,t,s){"use strict";s.d(t,{Am:function(){return m},pm:function(){return p}});var a=s(2265);let n=0,r=new Map,i=new Map,o=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),f({type:"REMOVE_TOAST",toastId:e})},5e3);r.set(e,t)},l=e=>{let t=i.get(e);t&&(clearTimeout(t),i.delete(e))},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?(l(s),o(s)):e.toasts.forEach(e=>{l(e.id),o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],u={toasts:[]};function f(e){u=d(u,e),c.forEach(e=>{e(u)})}function m(e){let{duration:t,...s}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=null!=t?t:5e3,o=()=>{l(a),f({type:"DISMISS_TOAST",toastId:a})};f({type:"ADD_TOAST",toast:{...s,id:a,open:!0,duration:r,onOpenChange:e=>{e||o()}}});let d=setTimeout(()=>{o()},r);return i.set(a,d),{id:a,dismiss:o,update:e=>f({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function p(){let[e,t]=a.useState(u);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>f({type:"DISMISS_TOAST",toastId:e})}}},18025:function(e,t,s){"use strict";s.d(t,{IL:function(){return g},Kp:function(){return v},LB:function(){return d},M0:function(){return o},O6:function(){return h},RE:function(){return u},Sh:function(){return a},TM:function(){return p},TO:function(){return m},Ym:function(){return i},g3:function(){return n},iN:function(){return c},oS:function(){return r},tU:function(){return y},z:function(){return f}});let{useGetStaffAssignmentsQuery:a,useAssignExeatRoleMutation:n,useUnassignExeatRoleMutation:r,useGetRolesQuery:i,useGetStaffListQuery:o,useCreateRoleAssignmentMutation:l,useGetAdminDashboardStatsQuery:d,useGetAdminAuditTrailQuery:c,useGetHostelAssignmentOptionsQuery:u,useCreateHostelAssignmentMutation:f,useGetHostelAssignmentsQuery:m,useUpdateHostelAssignmentStatusMutation:p,useRemoveHostelAssignmentMutation:h,useGetStaffHostelAssignmentsQuery:x,useGetHostelAssignedStaffQuery:g,useGetStudentDebtsQuery:v,useClearStudentDebtMutation:y}=s(46144).h.injectEndpoints({endpoints:e=>({getStaffAssignments:e.query({query:()=>"/admin/staff/assignments",transformResponse:e=>{var t;return(null==e?void 0:e.history)&&Array.isArray(e.history)?e.history:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.history)&&Array.isArray(e.data.history)?e.data.history:(null==e?void 0:e.data)&&Array.isArray(e.data)?e.data:Array.isArray(e)?e:(console.warn("Unexpected response structure for getStaffAssignments:",e),[])},providesTags:["Staff"]}),assignExeatRole:e.mutation({query:e=>{let{staffId:t,exeatRoleId:s}=e;return{url:"/admin/staff/".concat(t,"/assign-exeat-role"),method:"POST",body:{exeat_role_id:s}}},transformResponse:e=>e.data,invalidatesTags:["Staff"]}),unassignExeatRole:e.mutation({query:e=>{let{staffId:t,exeatRoleId:s}=e;return{url:"/admin/staff/".concat(t,"/unassign-exeat-role"),method:"DELETE",body:JSON.stringify({exeat_role_id:s}),headers:{"Content-Type":"application/json"}}},transformResponse:e=>{var t,s;return(null==e?void 0:e.success)!==void 0?e:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.success)!==void 0?e.data:(null==e?void 0:e.message)?{success:!0,message:e.message}:(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)?{success:!0,message:e.data.message}:"string"==typeof e?{success:!0,message:e}:{success:!0,message:"Role unassigned successfully"}},transformErrorResponse:e=>(console.error("Unassign role error response:",e),e),invalidatesTags:["Staff"]}),getRoles:e.query({query:()=>"/admin/roles",transformResponse:e=>{var t;return(null==e?void 0:e.roles)&&Array.isArray(e.roles)?e.roles:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.roles)&&Array.isArray(e.data.roles)?e.data.roles:(null==e?void 0:e.data)&&Array.isArray(e.data)?e.data:Array.isArray(e)?e:(console.warn("Unexpected response structure for getRoles:",e),[])},providesTags:["ExeatRoles"]}),getStaffList:e.query({query:()=>"/admin/staff",transformResponse:e=>{var t;return(null==e?void 0:e.staff)&&Array.isArray(e.staff)?e.staff:(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.staff)&&Array.isArray(e.data.staff)?e.data.staff:(null==e?void 0:e.data)&&Array.isArray(e.data)?e.data:Array.isArray(e)?e:(console.warn("Unexpected response structure for getStaffList:",e),[])},providesTags:["Staff"]}),createRoleAssignment:e.mutation({query:e=>({url:"/admin/roles",method:"POST",body:e}),transformResponse:e=>e.data,invalidatesTags:["Staff","ExeatRoles"]}),getAdminDashboardStats:e.query({query:()=>"/dashboard/admin",transformResponse:e=>e.data,providesTags:["DashboardStats"]}),getAdminAuditTrail:e.query({query:function(){let{page:e=1,per_page:t=20}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{url:"/dashboard/dean",params:{page:e,per_page:t}}},transformResponse:e=>e,providesTags:["Admin"]}),getHostelAssignmentOptions:e.query({query:e=>{let{per_page:t=15,page:s=1}=e;return{url:"/admin/hostel-assignments/options",params:{per_page:t,page:s}}},transformResponse:e=>e.data,providesTags:["Admin"]}),createHostelAssignment:e.mutation({query:e=>({url:"/admin/hostel-assignments",method:"POST",body:e}),transformResponse:e=>e,invalidatesTags:["Admin"]}),getHostelAssignments:e.query({query:e=>({url:"/admin/hostel-assignments",params:e}),transformResponse:e=>e,providesTags:["Admin"]}),updateHostelAssignmentStatus:e.mutation({query:e=>{let{id:t,status:s}=e;return{url:"/admin/hostel-assignments/".concat(t),method:"PUT",body:{status:s}}},transformResponse:e=>e,invalidatesTags:["Admin"]}),removeHostelAssignment:e.mutation({query:e=>({url:"/admin/hostel-assignments/".concat(e),method:"DELETE"}),transformResponse:e=>e,invalidatesTags:["Admin"]}),getStaffHostelAssignments:e.query({query:e=>"/admin/hostel-assignments/staff/".concat(e),transformResponse:e=>e,providesTags:["Admin"]}),getHostelAssignedStaff:e.query({query:e=>"/admin/hostel-assignments/hostel/".concat(e),transformResponse:e=>e,providesTags:["Admin"]}),getStudentDebts:e.query({query:e=>({url:"/admin/student-debts",params:e}),transformResponse:e=>e,providesTags:["Admin"]}),clearStudentDebt:e.mutation({query:e=>{let{id:t,data:s}=e;return{url:"/admin/student-debts/".concat(t,"/clear"),method:"POST",body:s}},transformResponse:e=>e,invalidatesTags:["Admin"]})})})},46144:function(e,t,s){"use strict";s.d(t,{h:function(){return l}});var a=s(79523),n=s(23557);let r=e=>e().auth.token,i=(0,a.ni)({baseUrl:"https://attendance.veritas.edu.ng/api",prepareHeaders:(e,t)=>{let{getState:s}=t,a=r(s);return a&&e.set("Authorization","Bearer ".concat(a)),e.set("Content-Type","application/json"),e.set("Accept","application/json"),e}}),o=async(e,t,s)=>{let a=await i(e,t,s);return a.error&&401===a.error.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login")),a},l=(0,n.LC)({reducerPath:"api",baseQuery:o,tagTypes:["Profile","ExeatCategories","ExeatRequests","ExeatRoles","Staff","ExeatRequests","DashboardStats","Admin","StudentDebts"],endpoints:()=>({})})},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(61994),n=s(53335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}},6718:function(e,t,s){"use strict";s.d(t,{D:function(){return n}});var a=s(2265);function n(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},5485:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(96471).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29935:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(96471).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},35465:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(96471).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},67350:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(96471).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[2915,3557,3448,5844,9049,2061,1,573,2971,2117,1744],function(){return e(e.s=36278)}),_N_E=e.O()}]);