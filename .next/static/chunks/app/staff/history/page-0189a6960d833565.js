(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5478],{16269:function(e,s,t){Promise.resolve().then(t.bind(t,38344))},38344:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return _}});var a=t(57437),l=t(28233),n=t(66070),i=t(35974),r=t(16831),c=t(62869),d=t(95186),m=t(93022),x=t(73578),o=t(10346),h=t(27107),u=t(24287),j=t(23818),p=t(87928),N=t(13147),f=t(98012),g=t(56141),v=t(82521),w=t(76848),b=t(2265),y=t(99376);function _(){var e,s,t;let[_,C]=(0,b.useState)(1),[Z]=(0,b.useState)(50),[k,q]=(0,b.useState)(""),z=(0,y.useRouter)(),{data:S,isLoading:O}=(0,l.w9)({page:_,per_page:Z}),E=e=>{z.push("/staff/exeat-requests/completed/".concat(e))},P=(null==S?void 0:null===(e=S.data)||void 0===e?void 0:e.data)||[];null==S||S.data;let D=null==S?void 0:S.pagination,L=P.filter(e=>{let s=k.toLowerCase();return e.student.name.toLowerCase().includes(s)||e.student.email.toLowerCase().includes(s)||e.reason.toLowerCase().includes(s)||e.destination.toLowerCase().includes(s)}),M=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase(),R=e=>{try{return(0,h.WU)(new Date(e),"PP")}catch(s){return e}};return O?(0,a.jsx)("div",{className:"min-h-screen",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(m.O,{className:"h-8 w-64 mb-2"}),(0,a.jsx)(m.O,{className:"h-4 w-96"})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(m.O,{className:"h-6 w-48"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,s)=>(0,a.jsx)(m.O,{className:"h-16 w-full"},s))})})]})]})}):(0,a.jsx)("div",{className:"min-h-screen",children:(0,a.jsxs)("div",{className:"w-full p-4",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Staff Exeat History"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"View all your completed exeat requests"})]})}),(null==S?void 0:S.status_summary)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:S.status_summary.total_count})]}),(0,a.jsx)(u.Z,{className:"h-8 w-8 text-green-600"})]})})}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Medical Requests"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:S.status_summary.medical_count})]}),(0,a.jsx)(u.Z,{className:"h-8 w-8 text-blue-600"})]})})}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Regular Requests"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:S.status_summary.regular_count})]}),(0,a.jsx)(u.Z,{className:"h-8 w-8 text-purple-600"})]})})})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(d.I,{placeholder:"Search by student name, email, reason, or destination...",value:k,onChange:e=>{q(e.target.value),1!==_&&C(1)},className:"pl-10"})]})}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsx)(n.ll,{children:"Completed Exeat Requests"}),(0,a.jsx)(n.SZ,{children:D?(0,a.jsxs)(a.Fragment,{children:["Showing ",null!==(s=D.from)&&void 0!==s?s:0," to ",null!==(t=D.to)&&void 0!==t?t:0," of ",D.total," completed requests",k&&" (".concat(L.length," match").concat(1!==L.length?"es":""," on this page)")]}):"".concat(L.length," of ").concat(P.length," requests")})]}),(0,a.jsxs)(n.aY,{children:[0===L.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(p.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"No completed requests found"}),(0,a.jsx)("p",{className:"text-sm",children:"Completed exeat requests will appear here"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"lg:hidden space-y-4",children:L.map(e=>(0,a.jsxs)(n.Zb,{className:"p-4 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>E(e.id),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,a.jsxs)(r.qE,{className:"h-10 w-10 flex-shrink-0",children:[(0,a.jsx)(r.F$,{src:e.student.passport?"data:image/jpeg;base64,".concat(e.student.passport):"",alt:e.student.name}),(0,a.jsx)(r.Q5,{className:"text-xs",children:M(e.student.name)})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-base truncate",children:e.student.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.student.email})]})]}),(0,a.jsx)(i.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:e.status})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{children:[R(e.departure_date)," - ",R(e.return_date)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{children:e.destination})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 text-sm",children:(0,a.jsx)(i.C,{variant:e.is_medical?"destructive":"default",className:"text-xs",children:e.category})})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:e.reason}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Completed on ",R(e.updated_at)]}),(0,a.jsxs)(c.z,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),E(e.id)},className:"text-xs hover:bg-primary hover:text-primary-foreground transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]},e.id))}),(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsxs)(x.iA,{children:[(0,a.jsx)(x.xD,{children:(0,a.jsxs)(x.SC,{children:[(0,a.jsx)(x.ss,{children:"Student"}),(0,a.jsx)(x.ss,{children:"Category"}),(0,a.jsx)(x.ss,{children:"Dates"}),(0,a.jsx)(x.ss,{children:"Destination"}),(0,a.jsx)(x.ss,{children:"Completed"}),(0,a.jsx)(x.ss,{className:"w-[120px]",children:"Actions"})]})}),(0,a.jsx)(x.RM,{children:L.map(e=>(0,a.jsxs)(x.SC,{className:"hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>E(e.id),children:[(0,a.jsx)(x.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(r.qE,{className:"h-8 w-8",children:[(0,a.jsx)(r.F$,{src:e.student.passport?"data:image/jpeg;base64,".concat(e.student.passport):"",alt:e.student.name}),(0,a.jsx)(r.Q5,{className:"text-xs",children:M(e.student.name)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.student.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.student.email})]})]})}),(0,a.jsx)(x.pj,{children:(0,a.jsx)("div",{className:"flex gap-1",children:(0,a.jsx)(i.C,{variant:e.is_medical?"destructive":"default",children:e.category})})}),(0,a.jsx)(x.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{children:R(e.departure_date)}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["to ",R(e.return_date)]})]})}),(0,a.jsx)(x.pj,{children:e.destination}),(0,a.jsx)(x.pj,{className:"text-sm text-muted-foreground",children:R(e.updated_at)}),(0,a.jsx)(x.pj,{children:(0,a.jsxs)(c.z,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),E(e.id)},className:"text-xs hover:bg-primary hover:text-primary-foreground transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"View"]})})]},e.id))})]})})]}),D&&D.last_page>1&&(0,a.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",D.current_page," of ",D.last_page]}),(0,a.jsx)(o.tl,{children:(0,a.jsxs)(o.ng,{children:[(0,a.jsx)(o.nt,{children:(0,a.jsxs)(c.z,{variant:"ghost",size:"sm",onClick:()=>C(Math.max(1,_-1)),disabled:1===_,className:"gap-1",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4"}),"Previous"]})}),(()=>{if(!D)return[];let e=[],s=D.last_page,t=D.current_page;if(s<=7)for(let t=1;t<=s;t++)e.push(t);else{e.push(1),t>3&&e.push("ellipsis");let a=Math.max(2,t-1),l=Math.min(s-1,t+1);for(let s=a;s<=l;s++)e.push(s);t<s-2&&e.push("ellipsis"),e.push(s)}return e})().map((e,s)=>(0,a.jsx)(o.nt,{children:"ellipsis"===e?(0,a.jsx)(o.Dj,{}):(0,a.jsx)(c.z,{variant:e===D.current_page?"outline":"ghost",size:"sm",onClick:()=>C(e),className:"min-w-[40px]",children:e})},s)),(0,a.jsx)(o.nt,{children:(0,a.jsxs)(c.z,{variant:"ghost",size:"sm",onClick:()=>C(Math.min(D.last_page,_+1)),disabled:_===D.last_page,className:"gap-1",children:["Next",(0,a.jsx)(w.Z,{className:"h-4 w-4"})]})})]})})]})]})]})]})})}},24287:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(96471).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}},function(e){e.O(0,[2915,3557,9946,3799,6588,2971,2117,1744],function(){return e(e.s=16269)}),_N_E=e.O()}]);