(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{96735:function(e,s,t){Promise.resolve().then(t.bind(t,9163))},9163:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return X}});var a=t(57437),l=t(33145),r=t(66070),n=t(62869),i=t(35974),d=t(39180),o=t(27107),c=t(54233),m=t(81475),u=t(87928),x=t(16994),h=t(99049),p=t(24287),f=t(98012),g=t(74376),j=t(19965),v=t(16942),N=t(61846),b=t(88880),w=t(27648),y=t(39248),O=t(66163),q=t(93022),_=t(2265),k=t(43643),Z=t(94508);let R=_.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(k.fC,{ref:s,className:(0,Z.cn)("relative overflow-hidden",t),...r,children:[(0,a.jsx)(k.l_,{className:"h-full w-full rounded-[inherit]",children:l}),(0,a.jsx)(E,{}),(0,a.jsx)(k.Ns,{})]})});R.displayName=k.fC.displayName;let E=_.forwardRef((e,s)=>{let{className:t,orientation:l="vertical",...r}=e;return(0,a.jsx)(k.gb,{ref:s,orientation:l,className:(0,Z.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:(0,a.jsx)(k.q4,{className:"relative flex-1 rounded-full bg-border"})})});function S(){return(0,a.jsxs)("div",{className:"space-y-4 md:space-y-6 overflow-x-hidden",role:"status","aria-label":"Loading dashboard content",children:[(0,a.jsx)(D,{}),(0,a.jsx)(C,{}),(0,a.jsx)(A,{}),(0,a.jsx)(T,{}),(0,a.jsx)(M,{}),(0,a.jsx)(V,{}),(0,a.jsx)("span",{className:"sr-only",children:"Loading dashboard content, please wait..."})]})}function D(){return(0,a.jsx)(r.Zb,{className:"p-4 md:p-6",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 md:gap-6",children:[(0,a.jsx)(q.O,{className:"h-16 w-16 md:h-20 md:w-20 rounded-lg flex-shrink-0"}),(0,a.jsxs)("div",{className:"space-y-2 min-w-0 flex-1",children:[(0,a.jsx)(q.O,{className:"h-7 md:h-9 w-48 md:w-64"}),(0,a.jsx)(q.O,{className:"h-5 md:h-6 w-64 md:w-80"})]})]}),(0,a.jsx)(q.O,{className:"h-12 md:h-14 w-full sm:w-48 md:w-56 rounded-md"})]})})}function C(){return(0,a.jsxs)(r.Zb,{className:(0,Z.cn)("p-4 md:p-6 border-2 transition-all duration-300","bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 shadow-green-100"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,a.jsx)(q.O,{className:"h-6 w-6 rounded"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.O,{className:"h-6 md:h-7 w-48 md:w-56"}),(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-64 md:w-80"})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 md:gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(q.O,{className:"h-8 md:h-9 w-8 md:w-10 mx-auto mb-1"}),(0,a.jsx)("div",{className:"text-xs md:text-sm text-muted-foreground",children:(0,a.jsx)(q.O,{className:"h-3 w-8 mx-auto"})})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(q.O,{className:"h-8 md:h-9 w-8 md:w-10 mx-auto mb-1"}),(0,a.jsx)("div",{className:"text-xs md:text-sm text-muted-foreground",children:(0,a.jsx)(q.O,{className:"h-3 w-10 mx-auto"})})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(q.O,{className:"h-8 md:h-9 w-8 md:w-10 mx-auto mb-1"}),(0,a.jsx)("div",{className:"text-xs md:text-sm text-muted-foreground",children:(0,a.jsx)(q.O,{className:"h-3 w-12 mx-auto"})})]})]})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(q.O,{className:"w-full h-2 rounded-full"}),(0,a.jsx)(q.O,{className:"h-3 w-48 mt-1 mx-auto"})]})]})}function A(){return(0,a.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,a.jsx)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(L,{},"priority-".concat(s)))}),(0,a.jsx)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(P,{},"outcome-".concat(s)))})]})}function L(){return(0,a.jsxs)(r.Zb,{className:"border-l-4 border-l-blue-500 h-full flex flex-col transition-all duration-200 min-h-[120px] md:min-h-[140px]",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between pb-2 space-y-0 flex-shrink-0 p-4 md:p-6",children:[(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-16 sm:w-20 md:w-28"}),(0,a.jsx)(q.O,{className:"h-4 w-4 md:h-5 md:w-5 rounded flex-shrink-0"})]}),(0,a.jsxs)(r.aY,{className:"flex-1 flex flex-col justify-between p-4 md:p-6 pt-0",children:[(0,a.jsx)(q.O,{className:"h-7 md:h-9 w-10 md:w-12 mb-2 md:mb-3"}),(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-24 md:w-32"})]})]})}function P(){return(0,a.jsxs)(r.Zb,{className:"border-l-4 border-l-green-500 h-full flex flex-col transition-all duration-200",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between pb-2 space-y-0 flex-shrink-0 p-4 md:p-6",children:[(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-16 md:w-20"}),(0,a.jsx)(q.O,{className:"h-3 w-3 md:h-4 md:w-4 rounded flex-shrink-0"})]}),(0,a.jsxs)(r.aY,{className:"flex-1 flex flex-col justify-between p-4 md:p-6 pt-0",children:[(0,a.jsx)(q.O,{className:"h-6 md:h-8 w-10 md:w-12 mb-2"}),(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-20 md:w-28"})]})]})}function T(e){let{className:s,itemCount:t=2}=e;return(0,a.jsxs)(r.Zb,{className:(0,Z.cn)("p-4 md:p-6",s),role:"region","aria-label":"Loading actionable insights",children:[(0,a.jsx)(r.Ol,{className:"pb-4 md:pb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(q.O,{className:"h-5 w-5 rounded"}),(0,a.jsx)(q.O,{className:"h-5 md:h-6 w-36 md:w-48"})]})}),(0,a.jsx)(r.aY,{className:"space-y-4",children:(0,a.jsx)("div",{role:"list","aria-label":"Loading actionable items",children:[...Array(t)].map((e,s)=>(0,a.jsx)("div",{role:"listitem",children:(0,a.jsx)(z,{priority:0===s?"high":"medium"})},"insight-skeleton-".concat(s)))})})]})}function z(e){let{priority:s="medium"}=e;return(0,a.jsx)("div",{className:(0,Z.cn)("group relative p-4 md:p-6 rounded-lg border-l-4 transition-all duration-200","min-h-[100px] md:min-h-[120px]",{high:"border-l-red-500 bg-red-50/50",medium:"border-l-orange-500 bg-orange-50/50",low:"border-l-blue-500 bg-blue-50/50"}[s]),children:(0,a.jsxs)("div",{className:"flex items-start gap-4 md:gap-6",children:[(0,a.jsx)("div",{className:(0,Z.cn)("flex-shrink-0 p-3 md:p-4 rounded-lg transition-colors duration-200",{high:"bg-red-100",medium:"bg-orange-100",low:"bg-blue-100"}[s]),children:(0,a.jsx)(q.O,{className:"h-5 w-5 rounded"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-3 md:space-y-4",children:[(0,a.jsx)("div",{className:"flex items-start justify-between gap-3 md:gap-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 flex-wrap",children:[(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-32 md:w-40"}),(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-6 md:w-8 rounded-full"})]})}),(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-full"}),(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-3/4"})," ",(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 md:pt-3",children:[(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-20 md:w-24"}),(0,a.jsx)("div",{className:"opacity-0 transition-opacity duration-200",children:(0,a.jsx)(q.O,{className:"h-4 w-4 md:h-5 md:w-5 rounded"})})]})]})]})})}function M(){return(0,a.jsxs)("div",{className:"grid gap-4 md:gap-6 grid-cols-1 lg:grid-cols-7",children:[(0,a.jsx)(Y,{}),(0,a.jsx)(U,{})]})}function Y(){return(0,a.jsxs)(r.Zb,{className:"lg:col-span-4 p-4 md:p-6",children:[(0,a.jsxs)(r.Ol,{className:"pb-4 md:pb-6",children:[(0,a.jsx)(q.O,{className:"h-5 md:h-6 w-28 md:w-32 mb-2"}),(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-48 md:w-64"})]}),(0,a.jsx)(r.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(q.O,{className:"h-12 md:h-14 w-full rounded-md"}),(0,a.jsx)(q.O,{className:"h-12 md:h-14 w-full rounded-md"})]})})]})}function U(){return(0,a.jsxs)(r.Zb,{className:"lg:col-span-3 p-4 md:p-6",children:[(0,a.jsxs)(r.Ol,{className:"pb-4 md:pb-6",children:[(0,a.jsx)(q.O,{className:"h-5 md:h-6 w-32 md:w-36 mb-2"}),(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-40 md:w-48"})]}),(0,a.jsxs)(r.aY,{className:"space-y-4 md:space-y-6",children:[(0,a.jsx)("div",{className:"space-y-4",role:"region","aria-label":"Loading essential student information",children:[void 0,void 0].map((e,s)=>(0,a.jsx)(I,{},"essential-".concat(s)))}),(0,a.jsx)("div",{className:"pt-4 md:pt-6 space-y-4 border-t border-border/50",role:"region","aria-label":"Loading additional student details",children:[void 0,void 0].map((e,s)=>(0,a.jsx)(I,{},"additional-".concat(s)))})]})]})}function I(){return(0,a.jsxs)("div",{className:"flex items-center gap-3 md:gap-4 min-h-[48px]",children:[(0,a.jsx)(q.O,{className:"h-5 w-5 rounded flex-shrink-0"}),(0,a.jsxs)("div",{className:"space-y-1 min-w-0 flex-1",children:[(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-28 md:w-32"}),(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-20 md:w-24"})]})]})}function V(){return(0,a.jsxs)(r.Zb,{className:"p-4 md:p-6",children:[(0,a.jsxs)(r.Ol,{className:"pb-4 md:pb-6",children:[(0,a.jsx)(q.O,{className:"h-5 md:h-6 w-32 md:w-40 mb-2"}),(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-56 md:w-72"})]}),(0,a.jsx)(r.aY,{children:(0,a.jsx)(R,{className:"h-[400px] md:h-[450px] w-full rounded-md border",children:(0,a.jsx)("div",{className:"space-y-4 p-4 md:p-6",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(H,{},"exeat-".concat(s)))})})})]})}function H(){return(0,a.jsx)("div",{className:(0,Z.cn)("group relative p-4 md:p-6 rounded-lg transition-all duration-200","border border-border/50 hover:border-border overflow-x-hidden","animate-pulse min-h-[120px] md:min-h-[140px]"),children:(0,a.jsxs)("div",{className:"flex items-start gap-4 md:gap-6",children:[(0,a.jsx)("div",{className:(0,Z.cn)("flex-shrink-0 p-3 md:p-4 rounded-lg transition-all duration-200","bg-primary/5 border border-primary/10"),children:(0,a.jsx)(q.O,{className:"h-5 w-5 md:h-6 md:w-6 rounded"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-3 md:space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3 md:gap-4",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-2",children:[(0,a.jsx)(q.O,{className:"h-4 md:h-5 w-16 md:w-20"})," ",(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(q.O,{className:"h-2 w-2 rounded-full hidden sm:block"})," ",(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-20 md:w-24"})," "]})]})}),(0,a.jsx)(q.O,{className:"h-5 md:h-6 w-20 md:w-24 rounded-full flex-shrink-0"})]}),(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-full"}),(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-3/4"})," ",(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-start sm:items-center gap-3 sm:gap-x-6 md:gap-x-8 sm:gap-y-3 pt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 min-h-[44px]",children:[(0,a.jsx)(q.O,{className:"h-4 w-4 md:h-5 md:w-5 rounded flex-shrink-0"}),(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-24 md:w-32"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 min-h-[44px]",children:[(0,a.jsx)(q.O,{className:"h-4 w-4 md:h-5 md:w-5 rounded flex-shrink-0"}),(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-20 md:w-28"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 min-h-[44px]",children:[(0,a.jsx)(q.O,{className:"h-4 w-4 md:h-5 md:w-5 rounded flex-shrink-0"}),(0,a.jsx)(q.O,{className:"h-3 md:h-4 w-18 md:w-24"})]})]})]}),(0,a.jsx)("div",{className:"absolute right-3 md:right-6 top-1/2 -translate-y-1/2",children:(0,a.jsx)("div",{className:(0,Z.cn)("p-2 md:p-3 rounded-full transition-all duration-200","opacity-0 bg-primary/10 border border-primary/20"),children:(0,a.jsx)(q.O,{className:"h-4 w-4 md:h-5 md:w-5 rounded"})})})]})})}E.displayName=k.gb.displayName;var J=t(99376),F=t(21378),W=t(25361),K=t(91230);function B(e){let{exeatRequests:s,className:t,isLoading:l=!1}=e;if(l)return(0,a.jsx)(T,{className:t});let n=function(e){let s=[],t=e.filter(e=>"parent_consent"===e.status);t.length>0&&s.push({id:"parent-consent",icon:x.Z,title:"Parent consent required",description:"".concat(t.length," request").concat(t.length>1?"s":""," awaiting parent approval. Contact your parents to approve these requests."),action:"View Requests",priority:"high",count:t.length,href:"/student/exeats?filter=parent_consent"});let a=e.filter(e=>["hostel_signin","hostel_signout"].includes(e.status));if(a.length>0){let e=a.filter(e=>"hostel_signout"===e.status),t=a.filter(e=>"hostel_signin"===e.status);e.length>0&&s.push({id:"hostel-signout",icon:h.Z,title:"Hostel sign-out required",description:"".concat(e.length," approved request").concat(e.length>1?"s":""," ready for departure. Visit the hostel office to sign out."),action:"Visit Hostel Office",priority:"high",count:e.length,href:"/student/exeats?filter=hostel_signout"}),t.length>0&&s.push({id:"hostel-signin",icon:h.Z,title:"Hostel sign-in required",description:"".concat(t.length," request").concat(t.length>1?"s":""," awaiting your return. Visit the hostel office to sign in."),action:"Complete Sign-in",priority:"high",count:t.length,href:"/student/exeats?filter=hostel_signin"})}let l=e.filter(e=>["cmd_review","secretary_review","dean_review"].includes(e.status)),r=new Date;r.setDate(r.getDate()-5);let n=l.filter(e=>new Date(e.created_at)<r);n.length>0&&s.push({id:"long-review",icon:m.Z,title:"Requests under extended review",description:"".concat(n.length," request").concat(n.length>1?"s":""," have been under review for over 5 days. Consider following up if urgent."),action:"Check Status",priority:"medium",count:n.length,href:"/student/exeats?filter=review"});let i=e.filter(e=>1===e.is_medical&&["pending","cmd_review"].includes(e.status));i.length>0&&s.push({id:"medical-docs",icon:u.Z,title:"Medical documentation may be needed",description:"".concat(i.length," medical request").concat(i.length>1?"s":""," in process. Ensure you have proper medical documentation ready."),action:"Review Requests",priority:"medium",count:i.length,href:"/student/exeats?filter=medical"});let d=new Date;d.setDate(d.getDate()+1);let o=new Date;o.setDate(o.getDate()+7);let c=e.filter(e=>{let s=new Date(e.departure_date);return"approved"===e.status&&s>=d&&s<=o});c.length>0&&s.push({id:"upcoming-departures",icon:m.Z,title:"Upcoming approved departures",description:"".concat(c.length," approved request").concat(c.length>1?"s":""," with departure dates in the next week. Prepare for your trip."),action:"View Details",priority:"medium",count:c.length,href:"/student/exeats?filter=approved"});let p={high:0,medium:1,low:2};return s.sort((e,s)=>p[e.priority]-p[s.priority]).slice(0,4)}(s);return 0===n.length?null:(0,a.jsxs)(r.Zb,{className:(0,Z.cn)("p-4 md:p-6 overflow-x-hidden",t),role:"region","aria-labelledby":"actionable-insights-title",children:[(0,a.jsx)(r.Ol,{className:"pb-4 md:pb-6",children:(0,a.jsxs)(r.ll,{id:"actionable-insights-title",className:"text-lg md:text-xl font-semibold flex items-center gap-3 overflow-x-hidden",children:[(0,a.jsx)(W.Z,{className:"h-5 w-5 text-orange-500 flex-shrink-0","aria-hidden":"true"}),(0,a.jsx)("span",{className:"truncate",children:"Needs Your Attention"})]})}),(0,a.jsx)(r.aY,{className:"space-y-4",children:(0,a.jsx)("div",{role:"list","aria-label":"Actionable items requiring your attention",children:n.map(e=>(0,a.jsx)("div",{role:"listitem",children:(0,a.jsx)($,{item:e})},e.id))})})]})}function $(e){let{item:s}=e,{icon:t,title:l,description:r,action:d,priority:o,count:c,href:m,onClick:u}=s,x=(0,a.jsx)("div",{className:(0,Z.cn)("group relative p-4 md:p-6 rounded-lg border-l-4 transition-all duration-200","hover:shadow-md hover:-translate-y-0.5 cursor-pointer overflow-x-hidden","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","touch-manipulation min-h-[100px] md:min-h-[120px]",{high:"border-l-red-500 bg-red-50/50 hover:bg-red-50/70",medium:"border-l-orange-500 bg-orange-50/50 hover:bg-orange-50/70",low:"border-l-blue-500 bg-blue-50/50 hover:bg-blue-50/70"}[o]),children:(0,a.jsxs)("div",{className:"flex items-start gap-4 md:gap-6",children:[(0,a.jsx)("div",{className:(0,Z.cn)("flex-shrink-0 p-3 md:p-4 rounded-lg transition-colors duration-200",{high:"text-red-600 bg-red-100",medium:"text-orange-600 bg-orange-100",low:"text-blue-600 bg-blue-100"}[o]),children:(0,a.jsx)(t,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-3 md:space-y-4 overflow-x-hidden",children:[(0,a.jsx)("div",{className:"flex items-start justify-between gap-3 md:gap-4 overflow-x-hidden",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 flex-wrap min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"text-sm md:text-base font-semibold text-foreground leading-tight truncate",children:l}),c&&c>0&&(0,a.jsx)(i.C,{variant:"outline",className:(0,Z.cn)("text-xs md:text-sm font-medium px-2 md:px-3 py-1 md:py-1.5 self-start sm:self-auto",{high:"bg-red-100 text-red-800 border-red-200",medium:"bg-orange-100 text-orange-800 border-orange-200",low:"bg-blue-100 text-blue-800 border-blue-200"}[o]),children:c})]})}),(0,a.jsx)("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed break-words overflow-wrap-anywhere",children:r}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 md:pt-3",children:[(0,a.jsx)(n.z,{variant:"ghost",size:"sm",className:(0,Z.cn)("text-sm md:text-base font-medium p-0 h-auto transition-colors duration-200","hover:text-primary/80 focus:text-primary/80 touch-manipulation min-h-[48px] flex items-center","high"===o?"text-red-600 hover:text-red-700":"medium"===o?"text-orange-600 hover:text-orange-700":"text-blue-600 hover:text-blue-700"),children:d}),(0,a.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,a.jsx)(K.Z,{className:(0,Z.cn)("h-4 w-4 md:h-5 md:w-5","high"===o?"text-red-600":"medium"===o?"text-orange-600":"text-blue-600")})})]})]})]})});return m?(0,a.jsx)(w.default,{href:m,className:"block","aria-label":"".concat(l,": ").concat(r),children:x}):u?(0,a.jsx)("div",{onClick:u,role:"button",tabIndex:0,"aria-label":"".concat(l,": ").concat(r),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),u())},children:x}):(0,a.jsx)("div",{"aria-label":"".concat(l,": ").concat(r),children:x})}var G=t(53717),Q=t(42676);function X(){var e,s,t,q,_;let{user:k,isLoading:R}=(0,d.t)(),E=(0,J.useRouter)(),{data:D,isLoading:C}=(0,y.DC)(),A=(null==D?void 0:D.exeat_requests)||[],{data:L}=(0,y.NL)(),{data:P}=(0,O.rm)(),T=(null==P?void 0:P.comments)||[],z=Object.fromEntries(((null==L?void 0:L.categories)||[]).map(e=>[e.id,e.name.charAt(0).toUpperCase()+e.name.slice(1)]));if(R||C)return(0,a.jsx)(S,{});let M=e=>"approved"===e.status,Y=e=>["hostel_signout","security_signout","security_signin"].includes(e.status),U=e=>"completed"===e.status,I=A.filter(e=>["cmd_review","secretary_review","dean_review"].includes(e.status)).length,V=A.filter(e=>"parent_consent"===e.status).length,H=A.filter(e=>["hostel_signin","hostel_signout"].includes(e.status)).length,W=A.filter(e=>M(e)).length,K=A.filter(e=>Y(e)).length,$=A.filter(e=>U(e)).length,X=A.filter(e=>"rejected"===e.status).length,et=A.filter(e=>!["completed","rejected"].includes(e.status)).length,ea=A.find(e=>{try{if("completed"===e.status||"security_signin"!==e.status)return!1;let s=new Date(e.return_date);if(isNaN(s.getTime()))return console.warn("Invalid return date format for exeat:",e.id,e.return_date),!1;return!0}catch(s){return console.error("Error processing exeat dates:",s,e),!1}});return(0,a.jsxs)("div",{className:"space-y-4 md:space-y-6 lg:space-y-8",children:[(0,a.jsx)(r.Zb,{className:"p-4 md:p-6",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 md:gap-6",children:[(0,a.jsx)("div",{className:"relative h-16 w-16 md:h-20 md:w-20 rounded-lg overflow-hidden bg-primary/10 flex-shrink-0",children:(null==k?void 0:k.passport)?(0,a.jsx)(l.default,{src:"data:image/jpeg;base64,".concat(k.passport),alt:"".concat(k.fname," ").concat(k.lname),fill:!0,className:"object-cover object-top",priority:!0}):(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-xl md:text-2xl font-medium text-primary",children:[null==k?void 0:null===(s=k.fname)||void 0===s?void 0:null===(e=s[0])||void 0===e?void 0:e.toUpperCase(),null==k?void 0:null===(q=k.lname)||void 0===q?void 0:null===(t=q[0])||void 0===t?void 0:t.toUpperCase()]})})}),(0,a.jsxs)("div",{className:"space-y-2 min-w-0 flex-1",children:[(0,a.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold leading-tight",children:["Welcome back, ",null==k?void 0:k.fname,"! \uD83D\uDC4B"]}),(0,a.jsx)("p",{className:"text-base md:text-lg text-muted-foreground leading-relaxed",children:"Here's an overview of your exeat requests and important information"})]})]}),(0,a.jsxs)(n.z,{size:"lg",className:"h-12 md:h-14 w-full sm:w-auto sm:max-w-[200px] md:max-w-[220px] transition-all duration-200 hover:shadow-md focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 touch-manipulation text-base px-4 sm:px-6",onClick:()=>E.push("/student/apply-exeat"),children:[(0,a.jsx)(c.Z,{className:"mr-2 h-5 w-5"}),(0,a.jsx)("span",{children:"New Exeat Request"})]})]})}),(0,a.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(ee,{title:"Active Requests",value:et,description:"Currently in process",icon:m.Z,className:"border-l-4 border-l-blue-500 h-full",priority:"high"}),(0,a.jsx)(ee,{title:"Pending Review",value:I,description:"Under staff review",icon:u.Z,className:"border-l-4 border-l-yellow-500 h-full",priority:"high"}),(0,a.jsx)(ee,{title:"Parent Consent",value:V,description:"Awaiting parent approval",icon:x.Z,className:"border-l-4 border-l-purple-500 h-full",priority:"high"}),(0,a.jsx)(ee,{title:"Hostel Process",value:H,description:"Sign in/out pending",icon:h.Z,className:"border-l-4 border-l-orange-500 h-full",priority:"high"})]}),(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(ee,{title:"Approved",value:W,description:"Ready for departure",icon:p.Z,className:"border-l-4 border-l-green-500 h-full",priority:"medium"}),(0,a.jsx)(ee,{title:"Currently Out",value:K,description:"Student away from school",icon:f.Z,className:"border-l-4 border-l-indigo-500 h-full",priority:"medium"}),(0,a.jsx)(ee,{title:"Completed",value:$,description:"Successfully returned",icon:p.Z,className:"border-l-4 border-l-emerald-500 h-full",priority:"medium"}),(0,a.jsx)(ee,{title:"Rejected",value:X,description:"Not approved",icon:g.Z,className:"border-l-4 border-l-red-500 h-full",priority:"medium"})]})]}),(0,a.jsx)(B,{exeatRequests:A,isLoading:C}),T.length>0&&(0,a.jsxs)(r.Zb,{className:"p-4 md:p-6",children:[(0,a.jsx)(r.Ol,{className:"pb-2 md:pb-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(r.ll,{className:"text-lg md:text-xl font-semibold flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5"}),"Messages from Staff"]}),(0,a.jsxs)(r.SZ,{className:"text-base md:text-lg",children:[T.length," new message",1!==T.length?"s":""," from staff members"]})]}),(0,a.jsx)(w.default,{href:"/student/comments",children:(0,a.jsx)(n.z,{variant:"outline",size:"sm",className:"whitespace-nowrap",children:"View All"})})]})}),(0,a.jsxs)(r.aY,{className:"p-0",children:[(0,a.jsx)("div",{className:"divide-y rounded-md border border-border/50 overflow-hidden",children:T.slice(0,3).map((e,s)=>(0,a.jsx)(w.default,{href:"/student/comments",className:(0,Z.cn)("block p-4 sm:p-5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 hover:bg-muted/50 transition-colors"),children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,a.jsx)(i.C,{variant:"outline",className:"capitalize",children:(0,Q.li)(e.status)})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed line-clamp-2 break-words",children:e.raw_comment})]})},s))}),T.length>3&&(0,a.jsx)("div",{className:"p-4 text-center border-t",children:(0,a.jsx)(w.default,{href:"/student/comments",children:(0,a.jsxs)(n.z,{variant:"ghost",size:"sm",children:["View ",T.length-3," more message",T.length-3!=1?"s":""]})})})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:gap-6 grid-cols-1 lg:grid-cols-7",children:[(0,a.jsx)("div",{className:"lg:col-span-4",children:ea?(0,a.jsx)(G.Y,{departureDate:ea.departure_date,returnDate:ea.return_date,variant:"student"}):(0,a.jsxs)(r.Zb,{className:"p-4 md:p-6",children:[(0,a.jsxs)(r.Ol,{className:"pb-2 md:pb-4",children:[(0,a.jsx)(r.ll,{className:"text-lg md:text-xl font-semibold",children:"No Active Exeat"}),(0,a.jsx)(r.SZ,{className:"text-base md:text-lg",children:"You have no active exeat at the moment."})]}),(0,a.jsx)(r.aY,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)(w.default,{href:"/student/apply-exeat",children:(0,a.jsxs)(n.z,{children:[(0,a.jsx)(c.Z,{className:"mr-2 h-4 w-4"})," Apply for Exeat"]})}),(0,a.jsx)(w.default,{href:"/student/exeats",children:(0,a.jsxs)(n.z,{variant:"outline",children:[(0,a.jsx)(v.Z,{className:"mr-2 h-4 w-4"})," View History"]})})]})})]})}),(0,a.jsxs)(r.Zb,{className:"lg:col-span-3 p-4 md:p-6",children:[(0,a.jsxs)(r.Ol,{className:"pb-4 md:pb-6",children:[(0,a.jsx)(r.ll,{className:"text-lg md:text-xl font-semibold",children:"Your Information"}),(0,a.jsx)(r.SZ,{className:"text-base md:text-lg",children:"Essential academic and contact details"})]}),(0,a.jsxs)(r.aY,{className:"space-y-4 md:space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",role:"region","aria-label":"Essential student information",children:[(0,a.jsx)(es,{icon:N.Z,label:"Matric Number",value:((_=function(e){if(!e||"string"!=typeof e||!/@.*\.veritas\.edu\.ng$/.test(e))return null;let s=e.split("@")[0];return s&&s.includes("/")?s:null}(null==k?void 0:k.email))?_.toUpperCase():"Not available")||(null==k?void 0:k.matric_no)||"Not available"}),(0,a.jsx)(es,{icon:b.Z,label:"Contact",value:null==k?void 0:k.phone,fallback:"Not specified"})]}),(0,a.jsxs)("div",{className:"pt-4 md:pt-6 space-y-4 border-t border-border/50",role:"region","aria-label":"Additional student details",children:[(0,a.jsx)(es,{icon:f.Z,label:"Address",value:null==k?void 0:k.address,fallback:"Not specified"}),(null==k?void 0:k.email)&&(0,a.jsx)(es,{icon:x.Z,label:"Email",value:k.email})]})]})]})]}),(0,a.jsxs)(r.Zb,{className:"p-4 md:p-6",children:[(0,a.jsx)(r.Ol,{className:"pb-2 md:pb-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(r.ll,{className:"text-lg md:text-xl font-semibold",children:"Recent Requests"}),(0,a.jsx)(r.SZ,{className:"text-base md:text-lg",children:"Latest applications and status"})]}),A.length>10&&(0,a.jsx)(w.default,{href:"/student/exeats",children:(0,a.jsxs)(n.z,{variant:"outline",size:"sm",className:"whitespace-nowrap",children:[(0,a.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"View All"]})})]})}),(0,a.jsx)(r.aY,{className:"p-0",children:0===A.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,a.jsx)("p",{className:"text-base",children:"No exeat requests found"})}):(0,a.jsx)("div",{className:"divide-y rounded-md border border-border/50 overflow-hidden",children:A.slice(0,10).map(e=>(0,a.jsx)(w.default,{href:"/student/exeats/".concat(e.id),className:(0,Z.cn)("block p-4 sm:p-5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"),children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"text-base font-semibold capitalize truncate",children:z[e.category_id]||(e.is_medical?"Medical":"Unknown")}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,o.WU)(new Date(e.created_at),"MMM d, yyyy")})]}),(0,a.jsx)(F.t,{status:e.status,size:"sm"})]}),e.reason&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed line-clamp-2 break-words",children:e.reason}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 text-xs sm:text-sm text-muted-foreground",children:[(0,a.jsx)("span",{className:"truncate max-w-[180px] sm:max-w-[260px] font-medium",children:e.destination}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,a.jsxs)("span",{className:"font-medium",children:[(0,o.WU)(new Date(e.departure_date),"MMM d")," - ",(0,o.WU)(new Date(e.return_date),"MMM d")]}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,a.jsx)("span",{className:"font-medium capitalize break-words",children:e.preferred_mode_of_contact})]})]})},e.id))})})]})]})}function ee(e){let{title:s,value:t,description:l,icon:n,className:i,priority:d="medium"}=e;return(0,a.jsxs)(r.Zb,{className:(0,Z.cn)("flex flex-col transition-all duration-200 hover:shadow-md touch-manipulation min-h-[120px] md:min-h-[140px]",i),children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between pb-2 space-y-0 flex-shrink-0 p-4 md:p-6",children:[(0,a.jsx)(r.ll,{className:(0,Z.cn)("font-medium leading-tight","high"===d?"text-sm md:text-base":"text-xs md:text-sm"),children:s}),(0,a.jsx)(n,{className:(0,Z.cn)("text-muted-foreground flex-shrink-0","high"===d?"h-4 w-4 md:h-5 md:w-5":"h-4 w-4")})]}),(0,a.jsxs)(r.aY,{className:"flex-1 flex flex-col justify-between p-4 md:p-6 pt-0",children:[(0,a.jsx)("div",{className:(0,Z.cn)("font-bold mb-2 md:mb-3","high"===d?"text-2xl md:text-3xl":"text-xl md:text-2xl"),children:t}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground leading-tight",children:l})]})]})}function es(e){let{icon:s,label:t,value:l,fallback:r="Not available"}=e,n=l||r,i=!l;return(0,a.jsxs)("div",{className:"flex items-center gap-3 md:gap-4 min-h-[48px] touch-manipulation",children:[(0,a.jsx)(s,{className:"h-5 w-5 text-muted-foreground flex-shrink-0","aria-hidden":"true"}),(0,a.jsxs)("div",{className:"space-y-1 min-w-0 flex-1",children:[(0,a.jsx)("p",{className:(0,Z.cn)("text-sm md:text-base font-medium leading-none truncate",i&&"text-muted-foreground"),title:n,children:n}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:t})]})]})}},93022:function(e,s,t){"use strict";t.d(s,{O:function(){return r}});var a=t(57437),l=t(94508);function r(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...t})}},39180:function(e,s,t){"use strict";t.d(s,{t:function(){return r}});var a=t(68575),l=t(61796);function r(){let e=(0,a.v9)(l.HF);return{user:e,isLoading:(0,a.v9)(l.xU),fullName:e?"".concat(e.fname," ").concat(e.lname):"",initials:e?"".concat(e.fname[0]).concat(e.lname[0]).toUpperCase():"",avatarUrl:(null==e?void 0:e.passport)?"data:image/jpeg;base64,".concat(e.passport):void 0}}},16262:function(e,s,t){"use strict";t.d(s,{Mx:function(){return n},YA:function(){return l},_y:function(){return r},iJ:function(){return a}});let a=t(46144).h.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>({url:"/login",method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"/logout",method:"POST"})}),getProfile:e.query({query:()=>"/me",providesTags:["Profile"]})})}),{useLoginMutation:l,useLogoutMutation:r,useGetProfileQuery:n}=a},61796:function(e,s,t){"use strict";t.d(s,{Dj:function(){return u},HF:function(){return x},kS:function(){return m},vN:function(){return h},xU:function(){return p}});var a=t(39129),l=t(16262);let r=e=>{try{return localStorage.getItem(e)}catch(e){return null}},n=()=>{let e=r("user");try{let s=e?JSON.parse(e):null;if(s&&s.exeat_roles&&!s.roles){let e=s.exeat_roles.map(e=>{var s;return(null==e?void 0:null===(s=e.role)||void 0===s?void 0:s.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"});s.roles=e}return s}catch(e){return null}},i={user:n(),token:r("token"),isAuthenticated:!!(r("token")&&n()),isLoading:!1},d=(0,a.oM)({name:"auth",initialState:i,reducers:{startLoading:e=>{e.isLoading=!0},stopLoading:e=>{e.isLoading=!1},logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")},setCredentials:(e,s)=>{let{user:t,role:a,token:l}=s.payload,r=(null==t?void 0:t.exeat_roles)||s.payload.roles,n=Array.isArray(r)?r.map(e=>{var s;return(null==e?void 0:null===(s=e.role)||void 0===s?void 0:s.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"}):[],i={...t,role:a,roles:n};e.user=i,e.token=l,e.isAuthenticated=!0,localStorage.setItem("token",l),localStorage.setItem("user",JSON.stringify(i))}},extraReducers:e=>{e.addMatcher(l.iJ.endpoints.login.matchPending,e=>{e.isLoading=!0}).addMatcher(l.iJ.endpoints.login.matchFulfilled,(e,s)=>{var t;let{payload:a}=s,l=(null===(t=a.user)||void 0===t?void 0:t.exeat_roles)||a.roles,r=Array.isArray(l)?l.map(e=>{var s;return(null==e?void 0:null===(s=e.role)||void 0===s?void 0:s.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"}):[],n={...a.user,role:a.role,roles:r};e.user=n,e.token=a.token,e.isAuthenticated=!0,e.isLoading=!1,localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(n))}).addMatcher(l.iJ.endpoints.login.matchRejected,e=>{e.isLoading=!1})}}),{startLoading:o,stopLoading:c,logout:m,setCredentials:u}=d.actions;s.ZP=d.reducer;let x=e=>e.auth.user,h=e=>e.auth.isAuthenticated,p=e=>e.auth.isLoading},39248:function(e,s,t){"use strict";t.d(s,{DC:function(){return n},NL:function(){return a},Ve:function(){return d},Y2:function(){return r},c4:function(){return i}});let{useGetCategoriesQuery:a,useGetStudentProfileFromExeatQuery:l,useCreateExeatRequestMutation:r,useGetExeatRequestsQuery:n,useGetExeatRequestDetailsQuery:i,useGetExeatRequestHistoryQuery:d}=t(46144).h.injectEndpoints({endpoints:e=>({getExeatRequests:e.query({query:()=>"/student/exeat-requests",providesTags:["ExeatRequests"]}),getCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e}),getStudentProfileFromExeat:e.query({query:()=>"/me",transformResponse:e=>{var s;if(!e.success||!(null===(s=e.data)||void 0===s?void 0:s.profile))throw Error("Failed to load profile data");return e.data}}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequestHistory:e.query({query:e=>"/student/exeat-requests/".concat(e,"/history"),providesTags:["ExeatRequests"]}),getExeatRequestDetails:e.query({query:e=>"/student/exeat-requests/".concat(e),providesTags:["ExeatRequests"]})})})},66163:function(e,s,t){"use strict";t.d(s,{Kp:function(){return i},N3:function(){return o},TK:function(){return d},h_:function(){return a},rm:function(){return c}});let{useGetStudentProfileQuery:a,useGetExeatCategoriesQuery:l,useCreateExeatRequestMutation:r,useGetExeatRequestsQuery:n,useGetStudentDebtsQuery:i,useInitializePaymentMutation:d,useVerifyPaymentQuery:o,useGetExeatCommentsQuery:c}=t(46144).h.injectEndpoints({endpoints:e=>({getStudentProfile:e.query({query:()=>"/me",transformResponse:e=>e.profile,providesTags:["Profile"]}),getExeatCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e.data.categories,providesTags:["ExeatCategories"]}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequests:e.query({query:()=>"/student/exeat-requests",transformResponse:e=>e.data.requests,providesTags:["ExeatRequests"]}),getStudentDebts:e.query({query:e=>({url:"/student/debts",params:e}),transformResponse:e=>e,providesTags:["StudentDebts"]}),initializePayment:e.mutation({query:e=>{let{id:s,data:t}=e;return{url:"/student/debts/".concat(s,"/payment-proof"),method:"POST",body:t}},transformResponse:e=>e,invalidatesTags:["StudentDebts"]}),verifyPayment:e.query({query:e=>{let{id:s,reference:t}=e;return{url:"/student/debts/".concat(s,"/verify-payment-api"),params:{reference:t}}},transformResponse:e=>e,providesTags:["StudentDebts"]}),getExeatComments:e.query({query:()=>"/student/exeat-requests/comments",transformResponse:e=>e,providesTags:["ExeatRequests"]})})})}},function(e){e.O(0,[2915,3557,9946,3448,3145,7641,9090,2971,2117,1744],function(){return e(e.s=96735)}),_N_E=e.O()}]);