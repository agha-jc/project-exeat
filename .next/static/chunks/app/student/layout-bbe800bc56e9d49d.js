(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5697],{69121:function(e,s,t){Promise.resolve().then(t.bind(t,8154))},8154:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return L}});var n=t(57437),a=t(2265),r=t(27648),l=t(99376),i=t(80461),c=t(16262),o=t(44986),d=t(43335),u=t(87928),h=t(16942),x=t(19965),m=t(63390),f=t(78968),j=t(3683),p=t(94508),v=t(62869);function g(e){let{open:s,onClose:t,onApplyExeat:g,currentUser:N}=e,b=(0,l.useRouter)(),[w,y]=(0,a.useState)(!1),{user:C,fullName:k,initials:Z,avatarUrl:z}=N,[L]=(0,c._y)(),E=()=>{y(!0),t()},S=(0,l.usePathname)(),U=e=>S===e,_=e=>{let{href:s,icon:a,children:l}=e,i=U(s);return(0,n.jsx)(r.default,{href:s,className:"w-full",onClick:()=>{window.innerWidth<1024&&t()},children:(0,n.jsxs)(v.z,{variant:"ghost",className:(0,p.cn)("w-full justify-start",i&&"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground"),children:[(0,n.jsx)(a,{className:"mr-2 h-4 w-4"}),l]})})};return(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-30 lg:hidden",onClick:t}),(0,n.jsxs)("aside",{className:(0,p.cn)("fixed top-14 left-0 z-40 w-[280px] h-[calc(100vh-3.5rem)]","bg-white border-r border-border","transition-all duration-300 ease-in-out",!s&&"-translate-x-full","lg:translate-x-0"),children:[s&&(0,n.jsx)("div",{className:"absolute -right-12 top-3 lg:hidden",children:(0,n.jsx)(v.z,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-full bg-white shadow-md border-border",onClick:t,children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,n.jsx)("nav",{className:"p-2 overflow-y-auto h-[calc(100%-4rem)]",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(_,{href:"/student/dashboard",icon:d.Z,children:"Dashboard"}),(0,n.jsx)(_,{href:"/student/apply-exeat",icon:u.Z,children:"Apply for Exeat"}),(0,n.jsx)(_,{href:"/student/exeats",icon:h.Z,children:"Exeat History"}),(0,n.jsx)(_,{href:"/student/comments",icon:x.Z,children:"Staff Messages"}),(0,n.jsx)(_,{href:"/student/debts",icon:m.Z,children:"My Debts"}),(0,n.jsxs)("div",{className:"pt-4 mt-4 border-t",children:[(0,n.jsx)(_,{href:"/student/profile",icon:f.Z,children:"Profile"}),(0,n.jsxs)(v.z,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{E(),window.innerWidth<1024&&t()},children:[(0,n.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})})]}),(0,n.jsx)(i.Z,{isOpen:w,onClose:()=>y(!1),userName:k||"User",onLogoutSuccess:()=>{b.replace("/login")}})]})}var N=t(33145),b=t(96818),w=t(67350),y=t(84190),C=t(16831);function k(e){let{onMenuClick:s,currentUser:t}=e,[r,c]=(0,a.useState)(!1),{user:o,fullName:d,initials:u,avatarUrl:h}=t,x=(0,l.useRouter)();return(0,n.jsxs)("header",{className:"fixed top-0 z-50 w-full border-b bg-white",children:[(0,n.jsxs)("div",{className:"flex h-14 items-center px-4 lg:px-6",children:[(0,n.jsxs)(v.z,{variant:"ghost",size:"icon",className:"lg:hidden mr-2",onClick:s,children:[(0,n.jsx)(b.Z,{className:"h-5 w-5"}),(0,n.jsx)("span",{className:"sr-only",children:"Toggle menu"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(N.default,{src:"/veritas-logo.png",alt:"Veritas University Logo",width:28,height:28,className:"object-contain",priority:!0}),(0,n.jsx)("span",{className:"hidden lg:inline-block text-lg font-semibold text-primary",children:"Veritas University"})]}),(0,n.jsx)("div",{className:"hidden lg:block h-4 w-px bg-border mx-2"}),(0,n.jsx)("div",{className:"text-sm font-medium",children:"Digital Exeat System"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("span",{className:"hidden sm:block text-sm text-muted-foreground",children:["Welcome, ",null==o?void 0:o.fname]}),(0,n.jsxs)(y.h_,{children:[(0,n.jsx)(y.$F,{asChild:!0,children:(0,n.jsx)(v.z,{variant:"ghost",size:"icon",className:"relative h-8 w-8 rounded-full",children:(0,n.jsxs)(C.qE,{className:"h-8 w-8",children:[(0,n.jsx)(C.F$,{src:h,alt:o?"".concat(o.fname," ").concat(o.lname):"User avatar"}),(0,n.jsx)(C.Q5,{className:"bg-primary/10 text-primary",children:u})]})})}),(0,n.jsxs)(y.AW,{className:"w-56",align:"end",children:[(0,n.jsx)(y.Ju,{className:"font-normal",children:(0,n.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium leading-none",children:d}),(0,n.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:null==o?void 0:o.email})]})}),(0,n.jsx)(y.VD,{}),(0,n.jsxs)(y.Qk,{children:[(0,n.jsx)(y.Xi,{asChild:!0,children:(0,n.jsxs)("a",{href:"/student/profile",className:"cursor-pointer",children:[(0,n.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),"Profile"]})}),(0,n.jsxs)(y.Xi,{className:"text-destructive focus:text-destructive",onClick:()=>{c(!0)},children:[(0,n.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]})]}),(0,n.jsx)(i.Z,{isOpen:r,onClose:()=>c(!1),userName:d,onLogoutSuccess:()=>{x.replace("/login")}})]})}var Z=t(39180),z=t(34324);function L(e){let{children:s}=e,[t,r]=(0,a.useState)(!1),[l,i]=(0,a.useState)(!1),c=(0,Z.t)();return(0,n.jsx)(z.i,{requiredRole:"student",children:(0,n.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,n.jsx)(k,{onMenuClick:()=>r(!0),currentUser:c}),(0,n.jsxs)("div",{className:"flex-1 flex pt-14",children:[(0,n.jsx)(g,{open:t,onClose:()=>r(!1),onApplyExeat:()=>i(!0),currentUser:c}),(0,n.jsx)("main",{className:"flex-1 relative overflow-x-hidden lg:ml-[280px]",children:(0,n.jsx)("div",{className:"p-4 md:p-6 max-w-full overflow-x-hidden",children:s})})]})]})})}},34324:function(e,s,t){"use strict";t.d(s,{i:function(){return c}});var n=t(57437),a=t(2265),r=t(99376),l=t(68575),i=t(61796);function c(e){let{children:s,requiredRole:t}=e,c=(0,r.useRouter)(),o=(0,l.v9)(i.HF),d=(0,l.v9)(i.vN);return((0,a.useEffect)(()=>{if(!d){c.push("/login");return}if(t&&(null==o?void 0:o.role)){let e=o.role.toLowerCase(),s=t.toLowerCase(),n="student"===e?"student":"staff";n!==("student"===s?"student":"staff")&&c.push("student"===n?"/student/dashboard":"/staff/dashboard")}},[d,o,t,c]),!d||t&&(null==o?void 0:o.role)&&("student"===o.role.toLowerCase()?"student":"staff")!=("student"===t.toLowerCase()?"student":"staff"))?null:(0,n.jsx)(n.Fragment,{children:s})}},39180:function(e,s,t){"use strict";t.d(s,{t:function(){return r}});var n=t(68575),a=t(61796);function r(){let e=(0,n.v9)(a.HF);return{user:e,isLoading:(0,n.v9)(a.xU),fullName:e?"".concat(e.fname," ").concat(e.lname):"",initials:e?"".concat(e.fname[0]).concat(e.lname[0]).toUpperCase():"",avatarUrl:(null==e?void 0:e.passport)?"data:image/jpeg;base64,".concat(e.passport):void 0}}},19965:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(96471).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])}},function(e){e.O(0,[2915,3557,3448,5844,9049,2061,9923,3145,5359,4273,9585,2971,2117,1744],function(){return e(e.s=69121)}),_N_E=e.O()}]);