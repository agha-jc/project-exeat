(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6106],{51017:function(e,t,r){Promise.resolve().then(r.bind(r,71643))},71643:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var s=r(57437),a=r(99376),n=r(16478),i=r(87928),d=r(36086),c=r(16049),o=r(67350),l=r(91120),u=r(99049),m=r(98012);let p=(0,r(96471).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var x=r(24287),h=r(74376),g=r(36549),f=r(81475),y=r(3683),v=r(25361),b=r(5485),j=r(13147),w=r(19965),N=r(62869),_=r(66070),k=r(35974),q=r(93022),Z=r(65613),R=r(39248),M=r(66163),S=r(42676),C=r(27107);let P={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5}},E={animate:{transition:{staggerChildren:.1}}};function D(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(q.O,{className:"h-10 w-20"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.O,{className:"h-8 w-64"}),(0,s.jsx)(q.O,{className:"h-4 w-48"})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(_.Zb,{children:[(0,s.jsx)(_.Ol,{children:(0,s.jsx)(q.O,{className:"h-6 w-32"})}),(0,s.jsxs)(_.aY,{className:"space-y-4",children:[(0,s.jsx)(q.O,{className:"h-4 w-full"}),(0,s.jsx)(q.O,{className:"h-4 w-3/4"}),(0,s.jsx)(q.O,{className:"h-4 w-1/2"})]})]}),(0,s.jsxs)(_.Zb,{children:[(0,s.jsx)(_.Ol,{children:(0,s.jsx)(q.O,{className:"h-6 w-32"})}),(0,s.jsxs)(_.aY,{className:"space-y-4",children:[(0,s.jsx)(q.O,{className:"h-4 w-full"}),(0,s.jsx)(q.O,{className:"h-4 w-3/4"}),(0,s.jsx)(q.O,{className:"h-4 w-1/2"})]})]})]})]})}function A(e){var t,r,a,v,b,j,w;let{approvals:N,auditLogs:q,exeatRequest:Z}=e,R=[{key:"submitted",label:"Request Submitted",icon:i.Z,description:"Exeat request has been submitted",roleMatch:null},...Z.is_medical?[{key:"cmd_review",label:"CMD Review",icon:d.Z,description:"Chief Medical Director review",roleMatch:"cmd"}]:[],{key:"secretary_review",label:"Secretary Review",icon:c.Z,description:"Secretary approval",roleMatch:"secretary"},{key:"parent_consent",label:"Parent Consent",icon:o.Z,description:"Parent/Guardian approval",roleMatch:"unknown"},{key:"dean_review",label:"Dean/Deputy Dean Review",icon:l.Z,description:"Dean final approval",roleMatch:"dean"},{key:"hostel_signout",label:"Hostel Sign Out",icon:u.Z,description:"Sign out from hostel",roleMatch:"hostel_admin"},{key:"security_signout",label:"Security Sign Out",icon:d.Z,description:"Final security clearance",roleMatch:"security"},{key:"departed_school",label:"Departed School",icon:m.Z,description:"Successfully left school premises",roleMatch:"security"},{key:"security_signin",label:"Return & Sign In",icon:p,description:"Student has departed school - awaiting return and security sign-in upon arrival back to campus",roleMatch:"security"}],M=e=>{let t=R.find(t=>t.key===e);return t&&t.roleMatch?"security_signin"===e?"completed"===Z.status?N.find(e=>e.role===t.roleMatch):null:N.find(e=>e.role===t.roleMatch):null},P=(()=>{if("rejected"===Z.status)for(let e=R.length-1;e>=0;e--){let t=M(R[e].key);if(t&&"rejected"===t.status)return e}let e=M("security_signout"),t=e&&"approved"===e.status;if(console.log("Security sign out status:",{approval:e,hasDepartedSchool:t,exeatStatus:Z.status}),t){let e=R.findIndex(e=>"departed_school"===e.key);if(-1!==e)return e}let r=-1;for(let e=0;e<R.length;e++){let t=R[e],s=M(t.key);s&&"approved"===s.status?r=e:"submitted"===t.key&&(r=e)}if("security_signin"===Z.status){let e=R.findIndex(e=>"security_signin"===e.key);return e>=0?e:R.length-1}if("approved"===Z.status){let e=R.findIndex(e=>"departed_school"===e.key);return e>=0?e:R.length-2}if("completed"===Z.status)return R.length-1;if("secretary_review"===Z.status){let e=R.findIndex(e=>"secretary_review"===e.key);return e>=0?e:Z.is_medical?2:1}if(Z.status.includes("_review")){let e=R.findIndex(e=>e.key===Z.status);if(e>=0)return e}if(Z.status.includes("_review")&&!t&&r+1===R.findIndex(e=>"security_signin"===e.key))return r;if(r>=0){let e=r+1;return e>=R.length-1?R.length-1:e}return 0})(),E=e=>e?"".concat(e.fname," ").concat(e.lname).trim():null,D=(e,t,r)=>{let s={submitted:{completed:"Exeat request has been submitted",current:"Request is being processed",pending:"Submit exeat request to begin approval process"},cmd_review:{completed:"Chief Medical Director approval received",current:"Awaiting Chief Medical Director review",pending:"Chief Medical Director review required"},secretary_review:{completed:"Secretary approval received",current:"Awaiting Secretary approval",pending:"Secretary approval required"},parent_consent:{completed:"Parent/Guardian consent received",current:"Awaiting parent/guardian approval",pending:"Parent/Guardian consent required"},dean_review:{completed:"Dean final approval received",current:"Awaiting Dean final approval",pending:"Dean final approval required"},hostel_signout:{completed:"Successfully signed out from hostel",current:"Ready for hostel sign-out",pending:"Hostel sign-out required before departure"},security_signout:{completed:"Security clearance granted - departure authorized",current:"Awaiting final security clearance",pending:"Security clearance required for departure"},departed_school:{completed:"Student has successfully left school premises",current:"Student is preparing to depart school",pending:"Departure from school premises"},security_signin:{completed:"Student has returned and signed back in",current:"Student has departed - awaiting return and security sign-in",pending:"Return to school and security sign-in required"}}[e.key];return s?"completed"===t?s.completed:"current"===t?s.current:"rejected"===t?"".concat(s.current," - Request was rejected"):s.pending:e.description},A=(e,t)=>{if("rejected"===Z.status){let r=M(t);return r&&"rejected"===r.status?"rejected":e<=P?e<P?"completed":"rejected":"pending"}if("security_signin"===Z.status){if("security_signin"===t)return"current";let e=R.findIndex(e=>"departed_school"===e.key);return(R.findIndex(e=>"security_signout"===e.key),R.findIndex(e=>e.key===t)<=e)?"completed":"pending"}return"approved"===Z.status?"departed_school"===t?"current":["security_signout","hostel_signout","dean_review","parent_consent","secretary_review","cmd_review"].includes(t)?"completed":"pending":"completed"===Z.status||e<P?"completed":e===P?"current":"pending"},O=e=>{switch(e){case"completed":return x.Z;case"rejected":return h.Z;case"current":return g.Z;default:return f.Z}};return(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:(0,s.jsxs)(_.Zb,{className:"overflow-hidden border-0 shadow-lg",children:[(0,s.jsxs)(_.Ol,{className:"border-b",children:[(0,s.jsxs)(_.ll,{className:"flex items-center gap-3 text-lg",children:[(0,s.jsx)(g.Z,{className:"h-5 w-5 text-primary"}),(0,s.jsx)("span",{className:"text-primary",children:"Request Timeline"})]}),(0,s.jsx)(_.SZ,{className:"text-sm text-gray-600",children:"Track the progress of your exeat request through the approval workflow"})]}),(0,s.jsxs)(_.aY,{className:"p-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-100 rounded-full"}),(0,s.jsx)("div",{className:"absolute left-6 top-0 w-0.5 rounded-full transition-all duration-1000 ease-out",style:{height:"".concat((P+("approved"===Z.status||"completed"===Z.status?1:0))/R.length*100,"%"),background:"rejected"===Z.status?"linear-gradient(to bottom, #f87171, #dc2626)":"approved"===Z.status||"completed"===Z.status?"linear-gradient(to bottom, #34d399, #059669)":"linear-gradient(to bottom, #60a5fa, #3b82f6)"}}),(0,s.jsx)("div",{className:"space-y-6",children:R.map((e,t)=>{let r=A(t,e.key),a=M(e.key),i=O(r),d=e.icon,c="completed"===r,l="current"===r,u="rejected"===r;return(0,s.jsx)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t,duration:.5},className:"relative",children:(0,s.jsxs)("div",{className:"flex items-start gap-6",children:[(0,s.jsxs)(n.E.div,{whileHover:{scale:1.1},className:"relative flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 ".concat(c?"bg-gradient-to-br from-green-400 to-green-500 text-white shadow-green-200":u?"bg-gradient-to-br from-red-400 to-red-500 text-white shadow-red-200":l?"bg-gradient-to-br from-blue-400 to-blue-500 text-white shadow-blue-200":"bg-gradient-to-br from-gray-200 to-gray-300 text-gray-600"),children:[(0,s.jsx)(i,{className:"h-5 w-5"}),l&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-full bg-blue-400 animate-ping opacity-20"})]}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsxs)(n.E.div,{whileHover:{scale:1.02},className:"p-4 rounded-xl border transition-all duration-200 ".concat(c?"bg-green-50 border-green-200 shadow-sm":u?"bg-red-50 border-red-200 shadow-sm":l?"bg-blue-50 border-blue-200 shadow-md ring-2 ring-blue-100":"bg-white border-gray-200 hover:shadow-sm"),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg ".concat(c?"bg-green-100":u?"bg-red-100":l?"bg-blue-100":"bg-gray-100"),children:(0,s.jsx)(d,{className:"h-4 w-4 ".concat(c?"text-green-600":u?"text-red-600":l?"text-blue-600":"text-gray-500")})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm text-gray-900",children:e.label}),(0,s.jsx)("p",{className:"text-xs text-gray-500 break-words",children:D(e,r,a)})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[l&&(0,s.jsx)(k.C,{className:"bg-blue-100 text-blue-700 border-blue-200 animate-pulse",children:"Current"}),"pending"!==r&&!l&&(0,s.jsx)(k.C,{variant:c?"default":"destructive",className:c?"bg-green-100 text-green-700 border-green-200":"",children:r})]})]}),(a||"security_signin"===e.key)&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"border-t pt-3 mt-3 space-y-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-3",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.C,{variant:"approved"===a.status?"default":"rejected"===a.status?"destructive":"secondary",className:"text-xs ".concat("approved"===a.status?"bg-green-100 text-green-700 border-green-200":"rejected"===a.status?"bg-red-100 text-red-700 border-red-200":"bg-gray-100 text-gray-700 border-gray-200"),children:a.status}),E(a.staff)&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[(0,s.jsx)(o.Z,{className:"h-3 w-3"}),(0,s.jsxs)("span",{className:"break-words",children:["by ",E(a.staff)]})]})]}):"security_signin"===e.key&&a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.C,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-700 border-orange-200",children:"Departed"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[(0,s.jsx)(y.Z,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Student has left school premises"})]})]}):null}),(null==a?void 0:a.comment)&&(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 border-l-2 border-gray-200",children:(0,s.jsxs)("p",{className:"text-xs text-gray-700 italic whitespace-pre-wrap break-words",children:['"',a.comment,'"']})}),(null==a?void 0:a.updated_at)?(0,s.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,s.jsx)(f.Z,{className:"h-3 w-3"}),(0,C.WU)(new Date(a.updated_at),"PPp")]}):"security_signin"===e.key&&"current"===r&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,s.jsx)(f.Z,{className:"h-3 w-3"}),(0,C.WU)(new Date(Z.created_at),"PPp")]})]}),"submitted"===e.key&&!a&&(0,s.jsx)("div",{className:"border-t pt-3 mt-3",children:(0,s.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,s.jsx)(f.Z,{className:"h-3 w-3"}),(0,C.WU)(new Date(Z.created_at),"PPp")]})})]})})]})},e.key)})})]}),(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},className:"mt-8",children:(0,s.jsx)("div",{className:"p-6 rounded-xl border-2 ".concat((null===(t=R[P])||void 0===t?void 0:t.key)==="departed_school"?"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200":"approved"===Z.status||"completed"===Z.status?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200":"rejected"===Z.status?"bg-gradient-to-r from-red-50 to-rose-50 border-red-200":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"),children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-full ".concat((null===(r=R[P])||void 0===r?void 0:r.key)==="departed_school"?"bg-blue-100":"approved"===Z.status||"completed"===Z.status?"bg-green-100":"rejected"===Z.status?"bg-red-100":"bg-blue-100"),children:"rejected"===Z.status?(0,s.jsx)(h.Z,{className:"h-6 w-6 text-red-600"}):(null===(a=R[P])||void 0===a?void 0:a.key)==="departed_school"?(0,s.jsx)(y.Z,{className:"h-6 w-6 text-blue-600"}):"approved"===Z.status||"completed"===Z.status?(0,s.jsx)(x.Z,{className:"h-6 w-6 text-green-600"}):(0,s.jsx)(f.Z,{className:"h-6 w-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:"Overall Status"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 break-words",children:"rejected"===Z.status?"Request has been rejected":"security_signin"===Z.status?"\uD83C\uDFEB You have departed school premises - please return by ".concat(Z.return_date?(0,C.WU)(new Date(Z.return_date),"MMM d, yyyy"):"return date"," and sign in at security"):(null===(v=R[P])||void 0===v?void 0:v.key)==="departed_school"?"You have departed school premises - expected return on ".concat(Z.return_date?(0,C.WU)(new Date(Z.return_date),"MMM d, yyyy"):"return date"):"approved"===Z.status?"âœ… All approvals received - ready for departure from school":"completed"===Z.status?"Request completed successfully":"Currently at: ".concat((null===(b=R[P])||void 0===b?void 0:b.label)||"Unknown stage")})]})]}),(0,s.jsx)(k.C,{variant:"approved"===Z.status||"completed"===Z.status||"security_signin"===Z.status?"default":"rejected"===Z.status?"destructive":"secondary",className:"px-4 py-2 text-sm font-medium ".concat("security_signin"===Z.status?"bg-orange-100 text-orange-700 border-orange-200":(null===(j=R[P])||void 0===j?void 0:j.key)==="departed_school"?"bg-blue-100 text-blue-700 border-blue-200":"approved"===Z.status||"completed"===Z.status?"bg-green-100 text-green-700 border-green-200":"rejected"===Z.status?"bg-red-100 text-red-700 border-red-200":"bg-blue-100 text-blue-700 border-blue-200"),children:(null===(w=R[P])||void 0===w?void 0:w.key)==="departed_school"?"Awaiting Return":(0,S.li)(Z.status)})]})})})]})]})})}function O(){var e;let t=(0,a.useParams)(),r=(0,a.useRouter)(),d=null==t?void 0:t.id,c=parseInt(d,10),{data:l,isLoading:u,error:p,refetch:g}=(0,R.c4)(c,{skip:!c||isNaN(c)}),{data:y,isLoading:q,error:O}=(0,R.Ve)(c,{skip:!c||isNaN(c)}),{data:z,isLoading:T}=(0,M.rm)();if(!d||isNaN(c))return(0,s.jsx)("div",{className:"container max-w-4xl mx-auto py-8",children:(0,s.jsxs)(Z.bZ,{variant:"destructive",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4"}),(0,s.jsx)(Z.X,{children:"Invalid exeat request ID. Please check the URL and try again."})]})});if(u)return(0,s.jsx)("div",{className:"container max-w-4xl mx-auto py-8",children:(0,s.jsx)(D,{})});if(p)return(0,s.jsxs)("div",{className:"container max-w-4xl mx-auto py-8",children:[(0,s.jsxs)(Z.bZ,{variant:"destructive",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4"}),(0,s.jsx)(Z.X,{children:"Failed to load exeat request details. Please try again."})]}),(0,s.jsx)(N.z,{onClick:()=>g(),className:"mt-4",children:"Try Again"})]});if(!(null==l?void 0:l.exeat_request))return(0,s.jsx)("div",{className:"container max-w-4xl mx-auto py-8",children:(0,s.jsxs)(Z.bZ,{children:[(0,s.jsx)(v.Z,{className:"h-4 w-4"}),(0,s.jsx)(Z.X,{children:"Exeat request not found."})]})});let H=l.exeat_request;return(e=>{switch(e.toLowerCase()){case"approved":case"completed":return x.Z;case"rejected":return h.Z;default:return f.Z}})(H.status),(0,s.jsxs)(n.E.div,{className:"py-8",initial:"initial",animate:"animate",variants:E,children:[(0,s.jsxs)(n.E.div,{variants:P,className:"flex items-center gap-4 mb-8",children:[(0,s.jsxs)(N.z,{variant:"outline",size:"sm",onClick:()=>r.back(),children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,s.jsx)("div",{className:"min-w-0",children:(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold break-words",children:"Exeat Request Details"})})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsx)(n.E.div,{variants:P,children:(0,s.jsxs)(_.Zb,{children:[(0,s.jsx)(_.Ol,{children:(0,s.jsxs)(_.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"h-5 w-5"}),"Request Information"]})}),(0,s.jsxs)(_.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Reason"}),(0,s.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap break-words",children:H.reason||"No reason provided"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Destination"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"break-words",children:H.destination||"N/A"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Preferred Contact"}),(0,s.jsx)("p",{className:"capitalize break-words",children:(null===(e=H.preferred_mode_of_contact)||void 0===e?void 0:e.replace("_"," "))||"Any"})]})]})]})}),(0,s.jsx)(n.E.div,{variants:P,children:(0,s.jsxs)(_.Zb,{children:[(0,s.jsx)(_.Ol,{children:(0,s.jsxs)(_.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Z,{className:"h-5 w-5"}),"Timeline"]})}),(0,s.jsxs)(_.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Requested On"}),(0,s.jsx)("p",{children:H.created_at?(0,C.WU)(new Date(H.created_at),"PPP"):"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Departure Date"}),(0,s.jsx)("p",{children:H.departure_date?(0,C.WU)(new Date(H.departure_date),"PPP"):"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Expected Return"}),(0,s.jsx)("p",{children:H.return_date?(0,C.WU)(new Date(H.return_date),"PPP"):"N/A"})]}),H.updated_at&&H.updated_at!==H.created_at&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Last Updated"}),(0,s.jsx)("p",{children:(0,C.WU)(new Date(H.updated_at),"PPP")})]})]})]})})]}),(null==y?void 0:y.history)&&(0,s.jsx)(n.E.div,{variants:P,className:"mt-6",children:(0,s.jsx)(A,{approvals:y.history.approvals,auditLogs:y.history.audit_logs,exeatRequest:{...y.history.exeat_request,return_date:H.return_date}})}),(0,s.jsx)(n.E.div,{variants:P,className:"mt-6",children:(0,s.jsxs)(_.Zb,{children:[(0,s.jsx)(_.Ol,{children:(0,s.jsxs)(_.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5"}),"Parent/Guardian Contact"]})}),(0,s.jsx)(_.aY,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Full Name"}),(0,s.jsx)("p",{children:H.parent_surname&&H.parent_othernames?"".concat(H.parent_othernames," ").concat(H.parent_surname):"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Email"}),(0,s.jsx)("p",{className:"text-sm break-words",children:H.parent_email||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Primary Phone"}),(0,s.jsx)("p",{className:"font-mono text-sm break-words",children:H.parent_phone_no||"N/A"})]}),H.parent_phone_no_two&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Secondary Phone"}),(0,s.jsx)("p",{className:"font-mono text-sm break-words",children:H.parent_phone_no_two})]})]})})]})}),z&&z.comments&&z.comments.length>0&&(0,s.jsx)(n.E.div,{variants:P,className:"mt-6",children:(0,s.jsxs)(_.Zb,{children:[(0,s.jsxs)(_.Ol,{children:[(0,s.jsxs)(_.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(w.Z,{className:"h-5 w-5"}),"Messages from Staff"]}),(0,s.jsx)(_.SZ,{children:"Comments and messages sent to you by staff members"})]}),(0,s.jsx)(_.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:z.comments.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-4 mb-2",children:(0,s.jsx)(k.C,{variant:"outline",className:"capitalize",children:(0,S.li)(e.status)})}),(0,s.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap break-words",children:e.raw_comment})]},t))})})]})})]})}},65613:function(e,t,r){"use strict";r.d(t,{Cd:function(){return o},X:function(){return l},bZ:function(){return c}});var s=r(57437),a=r(2265),n=r(90535),i=r(94508);let d=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(d({variant:a}),r),...n})});c.displayName="Alert";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});o.displayName="AlertTitle";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...a})});l.displayName="AlertDescription"},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return d}});var s=r(57437);r(2265);var a=r(90535),n=r(94508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return o}});var s=r(57437),a=r(2265),n=r(37053),i=r(90535),d=r(94508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:o=!1,...l}=e,u=o?n.g7:"button";return(0,s.jsx)(u,{className:(0,d.cn)(c({variant:a,size:i,className:r})),ref:t,...l})});o.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return d},SZ:function(){return o},Zb:function(){return i},aY:function(){return l},ll:function(){return c}});var s=r(57437),a=r(2265),n=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});d.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});l.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},93022:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});var s=r(57437),a=r(94508);function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...r})}},46144:function(e,t,r){"use strict";r.d(t,{h:function(){return c}});var s=r(79523),a=r(23557);let n=e=>e().auth.token,i=(0,s.ni)({baseUrl:"https://attendance.veritas.edu.ng/api",prepareHeaders:(e,t)=>{let{getState:r}=t,s=n(r);return s&&e.set("Authorization","Bearer ".concat(s)),e.set("Content-Type","application/json"),e.set("Accept","application/json"),e}}),d=async(e,t,r)=>{let s=await i(e,t,r);return s.error&&401===s.error.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login")),s},c=(0,a.LC)({reducerPath:"api",baseQuery:d,tagTypes:["Profile","ExeatCategories","ExeatRequests","ExeatRoles","Staff","ExeatRequests","DashboardStats","Admin","StudentDebts"],endpoints:()=>({})})},39248:function(e,t,r){"use strict";r.d(t,{DC:function(){return i},NL:function(){return s},Ve:function(){return c},Y2:function(){return n},c4:function(){return d}});let{useGetCategoriesQuery:s,useGetStudentProfileFromExeatQuery:a,useCreateExeatRequestMutation:n,useGetExeatRequestsQuery:i,useGetExeatRequestDetailsQuery:d,useGetExeatRequestHistoryQuery:c}=r(46144).h.injectEndpoints({endpoints:e=>({getExeatRequests:e.query({query:()=>"/student/exeat-requests",providesTags:["ExeatRequests"]}),getCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e}),getStudentProfileFromExeat:e.query({query:()=>"/me",transformResponse:e=>{var t;if(!e.success||!(null===(t=e.data)||void 0===t?void 0:t.profile))throw Error("Failed to load profile data");return e.data}}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequestHistory:e.query({query:e=>"/student/exeat-requests/".concat(e,"/history"),providesTags:["ExeatRequests"]}),getExeatRequestDetails:e.query({query:e=>"/student/exeat-requests/".concat(e),providesTags:["ExeatRequests"]})})})},66163:function(e,t,r){"use strict";r.d(t,{Kp:function(){return d},N3:function(){return o},TK:function(){return c},h_:function(){return s},rm:function(){return l}});let{useGetStudentProfileQuery:s,useGetExeatCategoriesQuery:a,useCreateExeatRequestMutation:n,useGetExeatRequestsQuery:i,useGetStudentDebtsQuery:d,useInitializePaymentMutation:c,useVerifyPaymentQuery:o,useGetExeatCommentsQuery:l}=r(46144).h.injectEndpoints({endpoints:e=>({getStudentProfile:e.query({query:()=>"/me",transformResponse:e=>e.profile,providesTags:["Profile"]}),getExeatCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e.data.categories,providesTags:["ExeatCategories"]}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequests:e.query({query:()=>"/student/exeat-requests",transformResponse:e=>e.data.requests,providesTags:["ExeatRequests"]}),getStudentDebts:e.query({query:e=>({url:"/student/debts",params:e}),transformResponse:e=>e,providesTags:["StudentDebts"]}),initializePayment:e.mutation({query:e=>{let{id:t,data:r}=e;return{url:"/student/debts/".concat(t,"/payment-proof"),method:"POST",body:r}},transformResponse:e=>e,invalidatesTags:["StudentDebts"]}),verifyPayment:e.query({query:e=>{let{id:t,reference:r}=e;return{url:"/student/debts/".concat(t,"/verify-payment-api"),params:{reference:r}}},transformResponse:e=>e,providesTags:["StudentDebts"]}),getExeatComments:e.query({query:()=>"/student/exeat-requests/comments",transformResponse:e=>e,providesTags:["ExeatRequests"]})})})},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var s=r(61994),a=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}},42676:function(e,t,r){"use strict";r.d(t,{li:function(){return a},nd:function(){return n},z2:function(){return s}});let s=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200 hover:bg-green-200";case"completed":return"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200";case"rejected":return"bg-red-100 text-red-800 border-red-200 hover:bg-red-200";case"cmd_review":case"secretary_review":case"dean_review":return"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200";case"parent_consent":return"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200";case"hostel_signin":case"hostel_signout":return"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200";case"recommendation1":case"recommendation2":case"dean_approval":case"hostel_approval":return"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200";default:return"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200"}},a=e=>{switch(e){case"pending":return"Awaiting Initial Review";case"cmd_review":return"Medical Director Review";case"secretary_review":return"Secretary Review";case"parent_consent":return"Awaiting Parent Approval";case"dean_review":return"Dean/Deputy Dean Review";case"hostel_signin":return"Ready for Hostel Sign-In";case"hostel_signout":return"Ready for Hostel Sign-Out";case"security_signin":return"Student Away - Awaiting Return";case"security_signout":return"Ready for Security Sign-Out";case"recommendation1":return"Under Initial Review";case"recommendation2":return"Under Final Review";case"dean_approval":return"Awaiting Dean Approval";case"hostel_approval":return"Hostel Processing";case"approved":return"Request Approved";case"rejected":return"Request Not Approved";case"completed":return"Request Completed";default:return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},n=e=>{let t=["reason","destination","departure_date","return_date","comment"];return["admin","dean"].includes(e)?[...t,"parent_surname","parent_othernames","parent_phone_no","parent_phone_no_two","parent_email","preferred_mode_of_contact","category_id","is_medical"]:t}},99376:function(e,t,r){"use strict";var s=r(35475);r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}}),r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},36549:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},5485:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},91120:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},13147:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},25361:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},24287:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},74376:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},81475:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},87928:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},99049:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},3683:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},98012:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},19965:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},36086:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},16049:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},67350:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(96471).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[2915,3557,9946,6478,2971,2117,1744],function(){return e(e.s=51017)}),_N_E=e.O()}]);