(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{3671:function(e,t,r){Promise.resolve().then(r.t.bind(r,47960,23)),Promise.resolve().then(r.bind(r,89501)),Promise.resolve().then(r.bind(r,59556)),Promise.resolve().then(r.t.bind(r,86944,23))},89501:function(e,t,r){"use strict";r.d(t,{Providers:function(){return d}});var n=r(57437),o=r(68575),a=r(39129),s=r(46144),i=r(61796);let l=(0,a.xC)({reducer:{auth:i.ZP,[s.h.reducerPath]:s.h.reducer},middleware:e=>e().concat(s.h.middleware)});function d(e){let{children:t}=e;return(0,n.jsx)(o.zt,{store:l,children:t})}},59556:function(e,t,r){"use strict";r.d(t,{Toaster:function(){return h}});var n=r(57437),o=r(35153),a=r(2265),s=r(41915),i=r(90535),l=r(44986),d=r(94508);let u=s.zt,c=a.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(s.l_,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...o})});c.displayName=s.l_.displayName;let f=(0,i.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"border-red-500 bg-red-500 text-white dark:border-red-900 dark:bg-red-900 dark:text-red-50",success:"border-green-500 bg-green-500 text-white dark:border-green-900 dark:bg-green-900 dark:text-green-50"}},defaultVariants:{variant:"default"}}),m=a.forwardRef((e,t)=>{let{className:r,variant:o,...a}=e;return(0,n.jsx)(s.fC,{ref:t,className:(0,d.cn)(f({variant:o}),r),...a})});m.displayName=s.fC.displayName,a.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(s.aU,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-red-300/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-500",r),...o})}).displayName=s.aU.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(s.x8,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-50/50 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-500 group-[.destructive]:focus:ring-offset-red-500",r),"toast-close":"",...o,children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})});p.displayName=s.x8.displayName;let g=a.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(s.Dx,{ref:t,className:(0,d.cn)("text-sm font-semibold",r),...o})});g.displayName=s.Dx.displayName;let v=a.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(s.dk,{ref:t,className:(0,d.cn)("text-sm opacity-90",r),...o})});function h(){let{toasts:e}=(0,o.pm)();return(0,n.jsxs)(u,{children:[e.map(function(e){let{id:t,title:r,description:o,action:a,duration:s,...i}=e;return(0,n.jsxs)(m,{...i,duration:null!=s?s:5e3,children:[(0,n.jsxs)("div",{className:"grid gap-1",children:[r&&(0,n.jsx)(g,{children:r}),o&&(0,n.jsx)(v,{children:o})]}),a,(0,n.jsx)(p,{})]},t)}),(0,n.jsx)(c,{})]})}v.displayName=s.dk.displayName},35153:function(e,t,r){"use strict";r.d(t,{Am:function(){return m},pm:function(){return p}});var n=r(2265);let o=0,a=new Map,s=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),f({type:"REMOVE_TOAST",toastId:e})},5e3);a.set(e,t)},l=e=>{let t=s.get(e);t&&(clearTimeout(t),s.delete(e))},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?(l(r),i(r)):e.toasts.forEach(e=>{l(e.id),i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},u=[],c={toasts:[]};function f(e){c=d(c,e),u.forEach(e=>{e(c)})}function m(e){let{duration:t,...r}=e,n=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),a=null!=t?t:5e3,i=()=>{l(n),f({type:"DISMISS_TOAST",toastId:n})};f({type:"ADD_TOAST",toast:{...r,id:n,open:!0,duration:a,onOpenChange:e=>{e||i()}}});let d=setTimeout(()=>{i()},a);return s.set(n,d),{id:n,dismiss:i,update:e=>f({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function p(){let[e,t]=n.useState(c);return n.useEffect(()=>(u.push(t),()=>{let e=u.indexOf(t);e>-1&&u.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>f({type:"DISMISS_TOAST",toastId:e})}}},46144:function(e,t,r){"use strict";r.d(t,{h:function(){return l}});var n=r(79523),o=r(23557);let a=e=>e().auth.token,s=(0,n.ni)({baseUrl:"https://attendance.veritas.edu.ng/api",prepareHeaders:(e,t)=>{let{getState:r}=t,n=a(r);return n&&e.set("Authorization","Bearer ".concat(n)),e.set("Content-Type","application/json"),e.set("Accept","application/json"),e}}),i=async(e,t,r)=>{let n=await s(e,t,r);return n.error&&401===n.error.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login")),n},l=(0,o.LC)({reducerPath:"api",baseQuery:i,tagTypes:["Profile","ExeatCategories","ExeatRequests","ExeatRoles","Staff","ExeatRequests","DashboardStats","Admin","StudentDebts"],endpoints:()=>({})})},16262:function(e,t,r){"use strict";r.d(t,{Mx:function(){return s},YA:function(){return o},_y:function(){return a},iJ:function(){return n}});let n=r(46144).h.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>({url:"/login",method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"/logout",method:"POST"})}),getProfile:e.query({query:()=>"/me",providesTags:["Profile"]})})}),{useLoginMutation:o,useLogoutMutation:a,useGetProfileQuery:s}=n},61796:function(e,t,r){"use strict";r.d(t,{Dj:function(){return f},HF:function(){return m},kS:function(){return c},vN:function(){return p},xU:function(){return g}});var n=r(39129),o=r(16262);let a=e=>{try{return localStorage.getItem(e)}catch(e){return null}},s=()=>{let e=a("user");try{let t=e?JSON.parse(e):null;if(t&&t.exeat_roles&&!t.roles){let e=t.exeat_roles.map(e=>{var t;return(null==e?void 0:null===(t=e.role)||void 0===t?void 0:t.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"});t.roles=e}return t}catch(e){return null}},i={user:s(),token:a("token"),isAuthenticated:!!(a("token")&&s()),isLoading:!1},l=(0,n.oM)({name:"auth",initialState:i,reducers:{startLoading:e=>{e.isLoading=!0},stopLoading:e=>{e.isLoading=!1},logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("user")},setCredentials:(e,t)=>{let{user:r,role:n,token:o}=t.payload,a=(null==r?void 0:r.exeat_roles)||t.payload.roles,s=Array.isArray(a)?a.map(e=>{var t;return(null==e?void 0:null===(t=e.role)||void 0===t?void 0:t.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"}):[],i={...r,role:n,roles:s};e.user=i,e.token=o,e.isAuthenticated=!0,localStorage.setItem("token",o),localStorage.setItem("user",JSON.stringify(i))}},extraReducers:e=>{e.addMatcher(o.iJ.endpoints.login.matchPending,e=>{e.isLoading=!0}).addMatcher(o.iJ.endpoints.login.matchFulfilled,(e,t)=>{var r;let{payload:n}=t,o=(null===(r=n.user)||void 0===r?void 0:r.exeat_roles)||n.roles,a=Array.isArray(o)?o.map(e=>{var t;return(null==e?void 0:null===(t=e.role)||void 0===t?void 0:t.name)?e.role.name:(null==e?void 0:e.name)?e.name:(null==e?void 0:e.display_name)?e.display_name:"string"==typeof e?e:"Unknown Role"}):[],s={...n.user,role:n.role,roles:a};e.user=s,e.token=n.token,e.isAuthenticated=!0,e.isLoading=!1,localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(s))}).addMatcher(o.iJ.endpoints.login.matchRejected,e=>{e.isLoading=!1})}}),{startLoading:d,stopLoading:u,logout:c,setCredentials:f}=l.actions;t.ZP=l.reducer;let m=e=>e.auth.user,p=e=>e.auth.isAuthenticated,g=e=>e.auth.isLoading},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(61994),o=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}},47960:function(){}},function(e){e.O(0,[3587,6509,2915,3557,5844,9923,3805,2971,2117,1744],function(){return e(e.s=3671)}),_N_E=e.O()}]);