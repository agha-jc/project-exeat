(()=>{var e={};e.id=2354,e.ids=[2354],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},53666:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>c}),t(79739),t(17896),t(85880),t(96560);var a=t(23191),r=t(88716),n=t(37922),d=t.n(n),l=t(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);t.d(s,i);let c=["",{children:["student",{children:["debts",{children:["[id]",{children:["pay",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,79739)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\student\\debts\\[id]\\pay\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,17896)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\student\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,85880)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\not-found.tsx"]}],o=["c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\student\\debts\\[id]\\pay\\page.tsx"],u="/student/debts/[id]/pay/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/student/debts/[id]/pay/page",pathname:"/student/debts/[id]/pay",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},17684:(e,s,t)=>{Promise.resolve().then(t.bind(t,28227))},28227:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(10326),r=t(17577),n=t(35047),d=t(33071),l=t(90772),i=t(567),c=t(87673),o=t(31048),u=t(77780),m=t(28834),x=t(74926),h=t(85131),p=t(9921),y=t(46721),f=t(86747),j=t(43022),g=t(60883),b=t(72669),v=t(94872),N=t(98181),w=t(90434),P=t(94215);function _(){let e;let s=(0,n.useParams)();(0,n.useRouter)();let t=parseInt(s.id),[_,q]=(0,r.useState)(""),[Z,k]=(0,r.useState)(!1),[C,D]=(0,r.useState)(null),{data:z,isLoading:R}=(0,u.Kp)({page:1,per_page:1e3}),[T]=(0,u.TK)(),A=z?.data?.data?.find(e=>e.id===t),M=async()=>{if(A){k(!0);try{let e=await T({id:t,data:{payment_method:"paystack"}}).unwrap();e.data?.authorization_url&&(D(e.data.authorization_url),window.location.href=e.data.authorization_url,(0,P.Am)({title:"Redirecting to Payment",description:"You will be redirected to complete your payment."}))}catch(e){console.error("Payment initialization error:",e),(0,P.Am)({title:"Payment Error",description:e?.data?.message||"Failed to initialize payment. Please try again.",variant:"destructive"})}finally{k(!1)}}};return R?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(l.z,{variant:"ghost",size:"icon",asChild:!0,children:a.jsx(w.default,{href:"/student/debts",children:a.jsx(p.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Pay Debt"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Loading debt details..."})]})]}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(y.Z,{className:"h-8 w-8 animate-spin"})})]}):A?"cleared"===A.payment_status?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(l.z,{variant:"ghost",size:"icon",asChild:!0,children:a.jsx(w.default,{href:"/student/debts",children:a.jsx(p.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Debt Cleared"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"This debt has already been cleared."})]})]}),a.jsx(d.Zb,{children:(0,a.jsxs)(d.aY,{className:"text-center py-12",children:[a.jsx(h.Z,{className:"mx-auto h-12 w-12 text-green-600 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payment Complete"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"This debt has been successfully cleared."}),a.jsx("div",{className:"space-y-2",children:a.jsx(l.z,{asChild:!0,children:a.jsx(w.default,{href:"/student/debts",children:"Back to Debts"})})})]})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(l.z,{variant:"ghost",size:"icon",asChild:!0,children:a.jsx(w.default,{href:"/student/debts",children:a.jsx(p.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Pay Debt"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete payment for your exeat debt"})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsxs)(d.ll,{className:"flex items-center gap-2",children:[a.jsx(f.Z,{className:"h-5 w-5"}),"Debt Details"]}),a.jsx(d.SZ,{children:"Information about the debt you're paying"})]}),(0,a.jsxs)(d.aY,{className:"space-y-4",children:[a.jsx("div",{className:"p-4 border rounded-lg bg-muted/50",children:a.jsx("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:(e=A.amount,new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(parseFloat(e)))}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total amount to pay"})]})})}),a.jsx("div",{className:"p-4 border rounded-lg bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(e=>{switch(e){case"unpaid":return a.jsx(m.Z,{className:"h-4 w-4 text-red-600"});case"paid":return a.jsx(x.Z,{className:"h-4 w-4 text-yellow-600"});case"cleared":return a.jsx(h.Z,{className:"h-4 w-4 text-green-600"});default:return a.jsx(x.Z,{className:"h-4 w-4 text-gray-600"})}})(A.payment_status)}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Payment Status"}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:(e=>{switch(e){case"unpaid":return a.jsx(i.C,{variant:"destructive",children:"Unpaid"});case"paid":return a.jsx(i.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Paid"});case"cleared":return a.jsx(i.C,{variant:"default",className:"bg-green-100 text-green-800",children:"Cleared"});default:return a.jsx(i.C,{variant:"outline",children:"Unknown"})}})(A.payment_status)})]})]})}),a.jsx("div",{className:"p-4 border rounded-lg bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(j.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Related Exeat Request"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:A.exeat_request.reason}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[a.jsx(g.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[(0,N.WU)(new Date(A.exeat_request.departure_date),"MMM d")," - ",(0,N.WU)(new Date(A.exeat_request.return_date),"MMM d, yyyy")]})]})]})]})}),A.overdue_hours>0&&a.jsx("div",{className:"p-4 border rounded-lg bg-red-50 border-red-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(b.Z,{className:"h-5 w-5 text-red-600"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-red-800",children:"Overdue"}),(0,a.jsxs)("p",{className:"text-sm text-red-600",children:["This debt is ",A.overdue_hours," hours overdue"]})]})]})}),A.payment_reference&&a.jsx("div",{className:"p-3 border rounded-lg bg-gray-50",children:(0,a.jsxs)("p",{className:"text-sm text-gray-800",children:[a.jsx("strong",{children:"Payment Reference:"})," ",A.payment_reference]})})]})]}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{children:[a.jsx(d.ll,{children:"Payment Options"}),a.jsx(d.SZ,{children:"Choose how you want to pay this debt"})]}),(0,a.jsxs)(d.aY,{className:"space-y-4",children:["unpaid"===A.payment_status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(v.Z,{className:"h-4 w-4 text-primary"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Pay with Paystack"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Secure online payment with card or bank transfer"})]})]}),a.jsx(l.z,{onClick:M,disabled:Z,className:"w-full",children:Z?(0,a.jsxs)(a.Fragment,{children:[a.jsx(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Initializing..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(v.Z,{className:"mr-2 h-4 w-4"}),"Pay with Paystack"]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(o._,{htmlFor:"notes",children:"Payment Notes (Optional)"}),a.jsx(c.g,{id:"notes",placeholder:"Add any notes about this payment...",value:_,onChange:e=>q(e.target.value),rows:3})]})]}),"paid"===A.payment_status&&(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-yellow-50 border-yellow-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(x.Z,{className:"h-5 w-5 text-yellow-600"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-yellow-800",children:"Payment Pending"}),a.jsx("p",{className:"text-sm text-yellow-600",children:"Your payment is being processed. Please wait for verification."})]})]}),(0,a.jsxs)(l.z,{onClick:()=>{A?.payment_reference&&window.location.reload()},variant:"outline",className:"w-full",children:[a.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Check Payment Status"]})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-blue-50 border-blue-200",children:[a.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Payment Instructions"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[a.jsx("li",{children:"• Complete payment through the secure Paystack gateway"}),a.jsx("li",{children:"• You can pay with debit/credit card or bank transfer"}),a.jsx("li",{children:"• Payment will be verified automatically"}),a.jsx("li",{children:"• Once verified, your debt will be cleared"}),a.jsx("li",{children:"• You can then create new exeat requests"})]})]}),a.jsx(l.z,{variant:"outline",asChild:!0,className:"w-full",children:(0,a.jsxs)(w.default,{href:"/student/debts",children:[a.jsx(p.Z,{className:"mr-2 h-4 w-4"}),"Back to Debts"]})})]})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(l.z,{variant:"ghost",size:"icon",asChild:!0,children:a.jsx(w.default,{href:"/student/debts",children:a.jsx(p.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Debt Not Found"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"The requested debt could not be found."})]})]}),a.jsx(d.Zb,{children:(0,a.jsxs)(d.aY,{className:"text-center py-12",children:[a.jsx(f.Z,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Debt Not Found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"The debt you're looking for doesn't exist or has been removed."}),a.jsx(l.z,{asChild:!0,children:a.jsx(w.default,{href:"/student/debts",children:"Back to Debts"})})]})})]})}},567:(e,s,t)=>{"use strict";t.d(s,{C:()=>l});var a=t(10326);t(17577);var r=t(79360),n=t(77863);let d=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return a.jsx("div",{className:(0,n.cn)(d({variant:s}),e),...t})}},31048:(e,s,t)=>{"use strict";t.d(s,{_:()=>c});var a=t(10326),r=t(17577),n=t(29152),d=t(79360),l=t(77863);let i=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,...s},t)=>a.jsx(n.f,{ref:t,className:(0,l.cn)(i(),e),...s}));c.displayName=n.f.displayName},87673:(e,s,t)=>{"use strict";t.d(s,{g:()=>d});var a=t(10326),r=t(17577),n=t(77863);let d=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));d.displayName="Textarea"},77780:(e,s,t)=>{"use strict";t.d(s,{Kp:()=>l,N3:()=>c,TK:()=>i,h_:()=>a,rm:()=>o});let{useGetStudentProfileQuery:a,useGetExeatCategoriesQuery:r,useCreateExeatRequestMutation:n,useGetExeatRequestsQuery:d,useGetStudentDebtsQuery:l,useInitializePaymentMutation:i,useVerifyPaymentQuery:c,useGetExeatCommentsQuery:o}=t(55415).h.injectEndpoints({endpoints:e=>({getStudentProfile:e.query({query:()=>"/me",transformResponse:e=>e.profile,providesTags:["Profile"]}),getExeatCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e.data.categories,providesTags:["ExeatCategories"]}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequests:e.query({query:()=>"/student/exeat-requests",transformResponse:e=>e.data.requests,providesTags:["ExeatRequests"]}),getStudentDebts:e.query({query:e=>({url:"/student/debts",params:e}),transformResponse:e=>e,providesTags:["StudentDebts"]}),initializePayment:e.mutation({query:({id:e,data:s})=>({url:`/student/debts/${e}/payment-proof`,method:"POST",body:s}),transformResponse:e=>e,invalidatesTags:["StudentDebts"]}),verifyPayment:e.query({query:({id:e,reference:s})=>({url:`/student/debts/${e}/verify-payment-api`,params:{reference:s}}),transformResponse:e=>e,providesTags:["StudentDebts"]}),getExeatComments:e.query({query:()=>"/student/exeat-requests/comments",transformResponse:e=>e,providesTags:["ExeatRequests"]})})})},79739:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`c:\Users\Al Agha\Downloads\project_exeat-master\app\student\debts\[id]\pay\page.tsx#default`)},29152:(e,s,t)=>{"use strict";t.d(s,{f:()=>i});var a=t(17577);t(60962);var r=t(34214),n=t(10326),d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let t=(0,r.Z8)(`Primitive.${s}`),d=a.forwardRef((e,a)=>{let{asChild:r,...d}=e,l=r?t:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...d,ref:a})});return d.displayName=`Primitive.${s}`,{...e,[s]:d}},{}),l=a.forwardRef((e,s)=>(0,n.jsx)(d.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var i=l},60883:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},85131:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},28834:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},72669:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},94872:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[5454,7545,8181,5346,6661],()=>t(53666));module.exports=a})();