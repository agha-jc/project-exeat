(()=>{var e={};e.id=8934,e.ids=[8934],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1524:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),t(22565),t(17896),t(85880),t(96560);var a=t(23191),r=t(88716),l=t(37922),n=t.n(l),d=t(95231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);t.d(s,i);let o=["",{children:["student",{children:["debts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,22565)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\student\\debts\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,17896)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\student\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,85880)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\not-found.tsx"]}],c=["c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\student\\debts\\page.tsx"],u="/student/debts/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/student/debts/page",pathname:"/student/debts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4698:(e,s,t)=>{Promise.resolve().then(t.bind(t,51908))},51908:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(10326),r=t(17577),l=t(33071),n=t(90772),d=t(567),i=t(54432),o=t(77780),c=t(28834),u=t(74926),x=t(85131),m=t(86747),p=t(22750),h=t(43022),f=t(60883),g=t(72669),y=t(94872),j=t(98181),b=t(35047);let v=[{value:"all",label:"All Statuses"},{value:"unpaid",label:"Unpaid"},{value:"paid",label:"Paid"},{value:"cleared",label:"Cleared"}];function N(){let[e,s]=(0,r.useState)(""),[t,N]=(0,r.useState)("all"),[w,_]=(0,r.useState)(1),[q,Z]=(0,r.useState)(15),k=(0,b.useRouter)(),{data:P,isLoading:C,error:R}=(0,o.Kp)({page:w,per_page:q}),M=P?.data?.data||[],A=P?.data?.total||0,D=M.filter(s=>{let a=e.toLowerCase(),r=""===e||s.exeat_request.reason.toLowerCase().includes(a)||s.amount.includes(a),l="all"===t||s.payment_status===t;return r&&l}),S=M.filter(e=>"unpaid"===e.payment_status).length,E=M.filter(e=>"paid"===e.payment_status).length;M.filter(e=>"cleared"===e.payment_status).length;let T=M.reduce((e,s)=>e+parseFloat(s.amount),0),U=e=>{switch(e){case"unpaid":return a.jsx(c.Z,{className:"h-4 w-4 text-red-600"});case"paid":return a.jsx(u.Z,{className:"h-4 w-4 text-yellow-600"});case"cleared":return a.jsx(x.Z,{className:"h-4 w-4 text-green-600"});default:return a.jsx(u.Z,{className:"h-4 w-4 text-gray-600"})}},O=e=>{switch(e){case"unpaid":return a.jsx(d.C,{variant:"destructive",children:"Unpaid"});case"paid":return a.jsx(d.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Paid"});case"cleared":return a.jsx(d.C,{variant:"default",className:"bg-green-100 text-green-800",children:"Cleared"});default:return a.jsx(d.C,{variant:"outline",children:"Unknown"})}},Y=e=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(parseFloat(e));return R?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"My Debts"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your exeat-related debts"})]}),a.jsx(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"text-center py-12",children:[a.jsx(u.Z,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Debts"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"There was an error loading your debts. Please try again."}),a.jsx(n.z,{onClick:()=>window.location.reload(),children:"Retry"})]})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"My Debts"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your exeat-related debts"})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l.ll,{className:"text-sm font-medium",children:"Total Debts"}),a.jsx(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(l.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:M.length}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"All debt records"})]})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l.ll,{className:"text-sm font-medium",children:"Unpaid"}),a.jsx(c.Z,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsxs)(l.aY,{children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:S}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Require payment"})]})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l.ll,{className:"text-sm font-medium",children:"Paid"}),a.jsx(u.Z,{className:"h-4 w-4 text-yellow-600"})]}),(0,a.jsxs)(l.aY,{children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:E}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending verification"})]})]}),(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:a.jsx(l.ll,{className:"text-sm font-medium",children:"Total Amount"})}),(0,a.jsxs)(l.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:Y(T.toString())}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"All debts combined"})]})]})]}),(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[a.jsx(p.Z,{className:"h-5 w-5"}),"Search & Filter"]})}),a.jsx(l.aY,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(i.I,{placeholder:"Search by reason or amount...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]})}),a.jsx("div",{className:"w-full sm:w-48",children:a.jsx("select",{value:t,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-input bg-background rounded-md text-sm",children:v.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})})]})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[a.jsx(l.ll,{children:"Debt Records"}),(0,a.jsxs)(l.SZ,{children:[D.length," of ",A," debt records"]})]}),a.jsx(l.aY,{children:C?a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg animate-pulse",children:[a.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),a.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"})]},s))}):0===D.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(m.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),a.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No debts found"}),a.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:e||"all"!==t?"Try adjusting your search or filters.":"You have no debt records at this time."})]}):a.jsx("div",{className:"space-y-4",children:D.map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx(m.Z,{className:"h-6 w-6 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:Y(e.amount)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[U(e.payment_status),O(e.payment_status)]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-4 w-4"}),a.jsx("span",{children:e.exeat_request.reason})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(f.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[(0,j.WU)(new Date(e.exeat_request.departure_date),"MMM d")," - ",(0,j.WU)(new Date(e.exeat_request.return_date),"MMM d, yyyy")]})]}),e.overdue_hours>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(g.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"text-red-600",children:[e.overdue_hours,"h overdue"]})]})]}),e.payment_reference&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Reference: ",e.payment_reference]})]}),a.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto",children:"unpaid"===e.payment_status?(0,a.jsxs)(n.z,{onClick:()=>k.push(`/student/debts/${e.id}/pay`),className:"w-full sm:w-auto",children:[a.jsx(y.Z,{className:"mr-2 h-4 w-4"}),"Pay Now"]}):(0,a.jsxs)(n.z,{variant:"outline",onClick:()=>k.push(`/student/exeats/${e.exeat_request.id}`),className:"w-full sm:w-auto",children:[a.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"View Exeat"]})})]},e.id))})})]})]})}},567:(e,s,t)=>{"use strict";t.d(s,{C:()=>d});var a=t(10326);t(17577);var r=t(79360),l=t(77863);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:s,...t}){return a.jsx("div",{className:(0,l.cn)(n({variant:s}),e),...t})}},54432:(e,s,t)=>{"use strict";t.d(s,{I:()=>d});var a=t(10326),r=t(17577),l=t(77863),n=t(31048);let d=r.forwardRef(({className:e,type:s,label:t,id:d,...i},o)=>{let c=d||r.useId();return(0,a.jsxs)("div",{className:"space-y-1",children:[t&&a.jsx(n._,{htmlFor:c,children:t}),a.jsx("input",{id:c,type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...i})]})});d.displayName="Input"},31048:(e,s,t)=>{"use strict";t.d(s,{_:()=>o});var a=t(10326),r=t(17577),l=t(29152),n=t(79360),d=t(77863);let i=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},t)=>a.jsx(l.f,{ref:t,className:(0,d.cn)(i(),e),...s}));o.displayName=l.f.displayName},77780:(e,s,t)=>{"use strict";t.d(s,{Kp:()=>d,N3:()=>o,TK:()=>i,h_:()=>a,rm:()=>c});let{useGetStudentProfileQuery:a,useGetExeatCategoriesQuery:r,useCreateExeatRequestMutation:l,useGetExeatRequestsQuery:n,useGetStudentDebtsQuery:d,useInitializePaymentMutation:i,useVerifyPaymentQuery:o,useGetExeatCommentsQuery:c}=t(55415).h.injectEndpoints({endpoints:e=>({getStudentProfile:e.query({query:()=>"/me",transformResponse:e=>e.profile,providesTags:["Profile"]}),getExeatCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e.data.categories,providesTags:["ExeatCategories"]}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequests:e.query({query:()=>"/student/exeat-requests",transformResponse:e=>e.data.requests,providesTags:["ExeatRequests"]}),getStudentDebts:e.query({query:e=>({url:"/student/debts",params:e}),transformResponse:e=>e,providesTags:["StudentDebts"]}),initializePayment:e.mutation({query:({id:e,data:s})=>({url:`/student/debts/${e}/payment-proof`,method:"POST",body:s}),transformResponse:e=>e,invalidatesTags:["StudentDebts"]}),verifyPayment:e.query({query:({id:e,reference:s})=>({url:`/student/debts/${e}/verify-payment-api`,params:{reference:s}}),transformResponse:e=>e,providesTags:["StudentDebts"]}),getExeatComments:e.query({query:()=>"/student/exeat-requests/comments",transformResponse:e=>e,providesTags:["ExeatRequests"]})})})},22565:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`c:\Users\Al Agha\Downloads\project_exeat-master\app\student\debts\page.tsx#default`)},29152:(e,s,t)=>{"use strict";t.d(s,{f:()=>i});var a=t(17577);t(60962);var r=t(34214),l=t(10326),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let t=(0,r.Z8)(`Primitive.${s}`),n=a.forwardRef((e,a)=>{let{asChild:r,...n}=e,d=r?t:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(d,{...n,ref:a})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{}),d=a.forwardRef((e,s)=>(0,l.jsx)(n.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));d.displayName="Label";var i=d},60883:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},85131:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},28834:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},72669:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},94872:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},22750:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[5454,7545,8181,5346,6661],()=>t(1524));module.exports=a})();