(()=>{var e={};e.id=6106,e.ids=[6106],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},81815:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>c}),r(7324),r(17896),r(85880),r(96560);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),d=r(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let c=["",{children:["student",{children:["exeats",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7324)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\student\\exeats\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,17896)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\student\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,85880)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\not-found.tsx"]}],o=["c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\student\\exeats\\[id]\\page.tsx"],u="/student/exeats/[id]/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/student/exeats/[id]/page",pathname:"/student/exeats/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},23926:(e,t,r)=>{Promise.resolve().then(r.bind(r,46786))},46786:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var s=r(10326),a=r(35047),n=r(28302),i=r(43022),d=r(43533),l=r(26371),c=r(28096),o=r(84028),u=r(88090),m=r(65249);let p=(0,r(9664).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var x=r(85131),h=r(28834),g=r(44432),y=r(72669),v=r(88802),b=r(74926),f=r(9921),j=r(60883),w=r(79611),N=r(90772),_=r(33071),k=r(567),q=r(65304),Z=r(43273),R=r(35372),P=r(77780),A=r(48272),D=r(98181);let M={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5}},S={animate:{transition:{staggerChildren:.1}}};function E(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(q.O,{className:"h-10 w-20"}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(q.O,{className:"h-8 w-64"}),s.jsx(q.O,{className:"h-4 w-48"})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(_.Zb,{children:[s.jsx(_.Ol,{children:s.jsx(q.O,{className:"h-6 w-32"})}),(0,s.jsxs)(_.aY,{className:"space-y-4",children:[s.jsx(q.O,{className:"h-4 w-full"}),s.jsx(q.O,{className:"h-4 w-3/4"}),s.jsx(q.O,{className:"h-4 w-1/2"})]})]}),(0,s.jsxs)(_.Zb,{children:[s.jsx(_.Ol,{children:s.jsx(q.O,{className:"h-6 w-32"})}),(0,s.jsxs)(_.aY,{className:"space-y-4",children:[s.jsx(q.O,{className:"h-4 w-full"}),s.jsx(q.O,{className:"h-4 w-3/4"}),s.jsx(q.O,{className:"h-4 w-1/2"})]})]})]})]})}function C({approvals:e,auditLogs:t,exeatRequest:r}){let a=[{key:"submitted",label:"Request Submitted",icon:i.Z,description:"Exeat request has been submitted",roleMatch:null},...r.is_medical?[{key:"cmd_review",label:"CMD Review",icon:d.Z,description:"Chief Medical Director review",roleMatch:"cmd"}]:[],{key:"secretary_review",label:"Secretary Review",icon:l.Z,description:"Secretary approval",roleMatch:"secretary"},{key:"parent_consent",label:"Parent Consent",icon:c.Z,description:"Parent/Guardian approval",roleMatch:"unknown"},{key:"dean_review",label:"Dean/Deputy Dean Review",icon:o.Z,description:"Dean final approval",roleMatch:"dean"},{key:"hostel_signout",label:"Hostel Sign Out",icon:u.Z,description:"Sign out from hostel",roleMatch:"hostel_admin"},{key:"security_signout",label:"Security Sign Out",icon:d.Z,description:"Final security clearance",roleMatch:"security"},{key:"departed_school",label:"Departed School",icon:m.Z,description:"Successfully left school premises",roleMatch:"security"},{key:"security_signin",label:"Return & Sign In",icon:p,description:"Student has departed school - awaiting return and security sign-in upon arrival back to campus",roleMatch:"security"}],b=t=>{let s=a.find(e=>e.key===t);return s&&s.roleMatch?"security_signin"===t?"completed"===r.status?e.find(e=>e.role===s.roleMatch):null:e.find(e=>e.role===s.roleMatch):null},f=(()=>{if("rejected"===r.status)for(let e=a.length-1;e>=0;e--){let t=b(a[e].key);if(t&&"rejected"===t.status)return e}let e=b("security_signout"),t=e&&"approved"===e.status;if(console.log("Security sign out status:",{approval:e,hasDepartedSchool:t,exeatStatus:r.status}),t){let e=a.findIndex(e=>"departed_school"===e.key);if(-1!==e)return e}let s=-1;for(let e=0;e<a.length;e++){let t=a[e],r=b(t.key);r&&"approved"===r.status?s=e:"submitted"===t.key&&(s=e)}if("security_signin"===r.status){let e=a.findIndex(e=>"security_signin"===e.key);return e>=0?e:a.length-1}if("approved"===r.status){let e=a.findIndex(e=>"departed_school"===e.key);return e>=0?e:a.length-2}if("completed"===r.status)return a.length-1;if("secretary_review"===r.status){let e=a.findIndex(e=>"secretary_review"===e.key);return e>=0?e:r.is_medical?2:1}if(r.status.includes("_review")){let e=a.findIndex(e=>e.key===r.status);if(e>=0)return e}if(r.status.includes("_review")&&!t&&s+1===a.findIndex(e=>"security_signin"===e.key))return s;if(s>=0){let e=s+1;return e>=a.length-1?a.length-1:e}return 0})(),j=e=>e?`${e.fname} ${e.lname}`.trim():null,w=(e,t,r)=>{let s={submitted:{completed:"Exeat request has been submitted",current:"Request is being processed",pending:"Submit exeat request to begin approval process"},cmd_review:{completed:"Chief Medical Director approval received",current:"Awaiting Chief Medical Director review",pending:"Chief Medical Director review required"},secretary_review:{completed:"Secretary approval received",current:"Awaiting Secretary approval",pending:"Secretary approval required"},parent_consent:{completed:"Parent/Guardian consent received",current:"Awaiting parent/guardian approval",pending:"Parent/Guardian consent required"},dean_review:{completed:"Dean final approval received",current:"Awaiting Dean final approval",pending:"Dean final approval required"},hostel_signout:{completed:"Successfully signed out from hostel",current:"Ready for hostel sign-out",pending:"Hostel sign-out required before departure"},security_signout:{completed:"Security clearance granted - departure authorized",current:"Awaiting final security clearance",pending:"Security clearance required for departure"},departed_school:{completed:"Student has successfully left school premises",current:"Student is preparing to depart school",pending:"Departure from school premises"},security_signin:{completed:"Student has returned and signed back in",current:"Student has departed - awaiting return and security sign-in",pending:"Return to school and security sign-in required"}}[e.key];return s?"completed"===t?s.completed:"current"===t?s.current:"rejected"===t?`${s.current} - Request was rejected`:s.pending:e.description},N=(e,t)=>{if("rejected"===r.status){let r=b(t);return r&&"rejected"===r.status?"rejected":e<=f?e<f?"completed":"rejected":"pending"}if("security_signin"===r.status){if("security_signin"===t)return"current";let e=a.findIndex(e=>"departed_school"===e.key);return(a.findIndex(e=>"security_signout"===e.key),a.findIndex(e=>e.key===t)<=e)?"completed":"pending"}return"approved"===r.status?"departed_school"===t?"current":["security_signout","hostel_signout","dean_review","parent_consent","secretary_review","cmd_review"].includes(t)?"completed":"pending":"completed"===r.status||e<f?"completed":e===f?"current":"pending"},q=e=>{switch(e){case"completed":return x.Z;case"rejected":return h.Z;case"current":return g.Z;default:return y.Z}};return s.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:(0,s.jsxs)(_.Zb,{className:"overflow-hidden border-0 shadow-lg",children:[(0,s.jsxs)(_.Ol,{className:"border-b",children:[(0,s.jsxs)(_.ll,{className:"flex items-center gap-3 text-lg",children:[s.jsx(g.Z,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"text-primary",children:"Request Timeline"})]}),s.jsx(_.SZ,{className:"text-sm text-gray-600",children:"Track the progress of your exeat request through the approval workflow"})]}),(0,s.jsxs)(_.aY,{className:"p-6",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-100 rounded-full"}),s.jsx("div",{className:"absolute left-6 top-0 w-0.5 rounded-full transition-all duration-1000 ease-out",style:{height:`${(f+("approved"===r.status||"completed"===r.status?1:0))/a.length*100}%`,background:"rejected"===r.status?"linear-gradient(to bottom, #f87171, #dc2626)":"approved"===r.status||"completed"===r.status?"linear-gradient(to bottom, #34d399, #059669)":"linear-gradient(to bottom, #60a5fa, #3b82f6)"}}),s.jsx("div",{className:"space-y-6",children:a.map((e,t)=>{let a=N(t,e.key),i=b(e.key),d=q(a),l=e.icon,o="completed"===a,u="current"===a,m="rejected"===a;return s.jsx(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t,duration:.5},className:"relative",children:(0,s.jsxs)("div",{className:"flex items-start gap-6",children:[(0,s.jsxs)(n.E.div,{whileHover:{scale:1.1},className:`relative flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 ${o?"bg-gradient-to-br from-green-400 to-green-500 text-white shadow-green-200":m?"bg-gradient-to-br from-red-400 to-red-500 text-white shadow-red-200":u?"bg-gradient-to-br from-blue-400 to-blue-500 text-white shadow-blue-200":"bg-gradient-to-br from-gray-200 to-gray-300 text-gray-600"}`,children:[s.jsx(d,{className:"h-5 w-5"}),u&&s.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-400 animate-ping opacity-20"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:(0,s.jsxs)(n.E.div,{whileHover:{scale:1.02},className:`p-4 rounded-xl border transition-all duration-200 ${o?"bg-green-50 border-green-200 shadow-sm":m?"bg-red-50 border-red-200 shadow-sm":u?"bg-blue-50 border-blue-200 shadow-md ring-2 ring-blue-100":"bg-white border-gray-200 hover:shadow-sm"}`,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${o?"bg-green-100":m?"bg-red-100":u?"bg-blue-100":"bg-gray-100"}`,children:s.jsx(l,{className:`h-4 w-4 ${o?"text-green-600":m?"text-red-600":u?"text-blue-600":"text-gray-500"}`})}),(0,s.jsxs)("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-900",children:e.label}),s.jsx("p",{className:"text-xs text-gray-500 break-words",children:w(e,a,i)})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[u&&s.jsx(k.C,{className:"bg-blue-100 text-blue-700 border-blue-200 animate-pulse",children:"Current"}),"pending"!==a&&!u&&s.jsx(k.C,{variant:o?"default":"destructive",className:o?"bg-green-100 text-green-700 border-green-200":"",children:a})]})]}),(i||"security_signin"===e.key)&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"border-t pt-3 mt-3 space-y-2",children:[s.jsx("div",{className:"flex items-center gap-3",children:i?(0,s.jsxs)(s.Fragment,{children:[s.jsx(k.C,{variant:"approved"===i.status?"default":"rejected"===i.status?"destructive":"secondary",className:`text-xs ${"approved"===i.status?"bg-green-100 text-green-700 border-green-200":"rejected"===i.status?"bg-red-100 text-red-700 border-red-200":"bg-gray-100 text-gray-700 border-gray-200"}`,children:i.status}),j(i.staff)&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[s.jsx(c.Z,{className:"h-3 w-3"}),(0,s.jsxs)("span",{className:"break-words",children:["by ",j(i.staff)]})]})]}):"security_signin"===e.key&&i?(0,s.jsxs)(s.Fragment,{children:[s.jsx(k.C,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-700 border-orange-200",children:"Departed"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[s.jsx(v.Z,{className:"h-3 w-3"}),s.jsx("span",{children:"Student has left school premises"})]})]}):null}),i?.comment&&s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border-l-2 border-gray-200",children:(0,s.jsxs)("p",{className:"text-xs text-gray-700 italic whitespace-pre-wrap break-words",children:['"',i.comment,'"']})}),i?.updated_at?(0,s.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(y.Z,{className:"h-3 w-3"}),(0,D.WU)(new Date(i.updated_at),"PPp")]}):"security_signin"===e.key&&"current"===a&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(y.Z,{className:"h-3 w-3"}),(0,D.WU)(new Date(r.created_at),"PPp")]})]}),"submitted"===e.key&&!i&&s.jsx("div",{className:"border-t pt-3 mt-3",children:(0,s.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(y.Z,{className:"h-3 w-3"}),(0,D.WU)(new Date(r.created_at),"PPp")]})})]})})]})},e.key)})})]}),s.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},className:"mt-8",children:s.jsx("div",{className:`p-6 rounded-xl border-2 ${a[f]?.key==="departed_school"?"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200":"approved"===r.status||"completed"===r.status?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200":"rejected"===r.status?"bg-gradient-to-r from-red-50 to-rose-50 border-red-200":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"}`,children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`p-3 rounded-full ${a[f]?.key==="departed_school"?"bg-blue-100":"approved"===r.status||"completed"===r.status?"bg-green-100":"rejected"===r.status?"bg-red-100":"bg-blue-100"}`,children:"rejected"===r.status?s.jsx(h.Z,{className:"h-6 w-6 text-red-600"}):a[f]?.key==="departed_school"?s.jsx(v.Z,{className:"h-6 w-6 text-blue-600"}):"approved"===r.status||"completed"===r.status?s.jsx(x.Z,{className:"h-6 w-6 text-green-600"}):s.jsx(y.Z,{className:"h-6 w-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Overall Status"}),s.jsx("p",{className:"text-sm text-gray-600 break-words",children:"rejected"===r.status?"Request has been rejected":"security_signin"===r.status?`ğŸ« You have departed school premises - please return by ${r.return_date?(0,D.WU)(new Date(r.return_date),"MMM d, yyyy"):"return date"} and sign in at security`:a[f]?.key==="departed_school"?`You have departed school premises - expected return on ${r.return_date?(0,D.WU)(new Date(r.return_date),"MMM d, yyyy"):"return date"}`:"approved"===r.status?"âœ… All approvals received - ready for departure from school":"completed"===r.status?"Request completed successfully":`Currently at: ${a[f]?.label||"Unknown stage"}`})]})]}),s.jsx(k.C,{variant:"approved"===r.status||"completed"===r.status||"security_signin"===r.status?"default":"rejected"===r.status?"destructive":"secondary",className:`px-4 py-2 text-sm font-medium ${"security_signin"===r.status?"bg-orange-100 text-orange-700 border-orange-200":a[f]?.key==="departed_school"?"bg-blue-100 text-blue-700 border-blue-200":"approved"===r.status||"completed"===r.status?"bg-green-100 text-green-700 border-green-200":"rejected"===r.status?"bg-red-100 text-red-700 border-red-200":"bg-blue-100 text-blue-700 border-blue-200"}`,children:a[f]?.key==="departed_school"?"Awaiting Return":(0,A.li)(r.status)})]})})})]})]})})}function O(){let e=(0,a.useParams)(),t=(0,a.useRouter)(),r=e?.id,d=parseInt(r,10),{data:l,isLoading:o,error:u,refetch:p}=(0,R.c4)(d,{skip:!d||isNaN(d)}),{data:g,isLoading:v,error:q}=(0,R.Ve)(d,{skip:!d||isNaN(d)}),{data:O,isLoading:T}=(0,P.rm)();if(!r||isNaN(d))return s.jsx("div",{className:"container max-w-4xl mx-auto py-8",children:(0,s.jsxs)(Z.bZ,{variant:"destructive",children:[s.jsx(b.Z,{className:"h-4 w-4"}),s.jsx(Z.X,{children:"Invalid exeat request ID. Please check the URL and try again."})]})});if(o)return s.jsx("div",{className:"container max-w-4xl mx-auto py-8",children:s.jsx(E,{})});if(u)return(0,s.jsxs)("div",{className:"container max-w-4xl mx-auto py-8",children:[(0,s.jsxs)(Z.bZ,{variant:"destructive",children:[s.jsx(b.Z,{className:"h-4 w-4"}),s.jsx(Z.X,{children:"Failed to load exeat request details. Please try again."})]}),s.jsx(N.z,{onClick:()=>p(),className:"mt-4",children:"Try Again"})]});if(!l?.exeat_request)return s.jsx("div",{className:"container max-w-4xl mx-auto py-8",children:(0,s.jsxs)(Z.bZ,{children:[s.jsx(b.Z,{className:"h-4 w-4"}),s.jsx(Z.X,{children:"Exeat request not found."})]})});let U=l.exeat_request;return(e=>{switch(e.toLowerCase()){case"approved":case"completed":return x.Z;case"rejected":return h.Z;default:return y.Z}})(U.status),(0,s.jsxs)(n.E.div,{className:"py-8",initial:"initial",animate:"animate",variants:S,children:[(0,s.jsxs)(n.E.div,{variants:M,className:"flex items-center gap-4 mb-8",children:[(0,s.jsxs)(N.z,{variant:"outline",size:"sm",onClick:()=>t.back(),children:[s.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsx("div",{className:"min-w-0",children:s.jsx("h1",{className:"text-2xl md:text-3xl font-bold break-words",children:"Exeat Request Details"})})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsx(n.E.div,{variants:M,children:(0,s.jsxs)(_.Zb,{children:[s.jsx(_.Ol,{children:(0,s.jsxs)(_.ll,{className:"flex items-center gap-2",children:[s.jsx(i.Z,{className:"h-5 w-5"}),"Request Information"]})}),(0,s.jsxs)(_.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Reason"}),s.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap break-words",children:U.reason||"No reason provided"})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Destination"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(m.Z,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"break-words",children:U.destination||"N/A"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Preferred Contact"}),s.jsx("p",{className:"capitalize break-words",children:U.preferred_mode_of_contact?.replace("_"," ")||"Any"})]})]})]})}),s.jsx(n.E.div,{variants:M,children:(0,s.jsxs)(_.Zb,{children:[s.jsx(_.Ol,{children:(0,s.jsxs)(_.ll,{className:"flex items-center gap-2",children:[s.jsx(j.Z,{className:"h-5 w-5"}),"Timeline"]})}),(0,s.jsxs)(_.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Requested On"}),s.jsx("p",{children:U.created_at?(0,D.WU)(new Date(U.created_at),"PPP"):"N/A"})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Departure Date"}),s.jsx("p",{children:U.departure_date?(0,D.WU)(new Date(U.departure_date),"PPP"):"N/A"})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Expected Return"}),s.jsx("p",{children:U.return_date?(0,D.WU)(new Date(U.return_date),"PPP"):"N/A"})]}),U.updated_at&&U.updated_at!==U.created_at&&(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Last Updated"}),s.jsx("p",{children:(0,D.WU)(new Date(U.updated_at),"PPP")})]})]})]})})]}),g?.history&&s.jsx(n.E.div,{variants:M,className:"mt-6",children:s.jsx(C,{approvals:g.history.approvals,auditLogs:g.history.audit_logs,exeatRequest:{...g.history.exeat_request,return_date:U.return_date}})}),s.jsx(n.E.div,{variants:M,className:"mt-6",children:(0,s.jsxs)(_.Zb,{children:[s.jsx(_.Ol,{children:(0,s.jsxs)(_.ll,{className:"flex items-center gap-2",children:[s.jsx(c.Z,{className:"h-5 w-5"}),"Parent/Guardian Contact"]})}),s.jsx(_.aY,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Full Name"}),s.jsx("p",{children:U.parent_surname&&U.parent_othernames?`${U.parent_othernames} ${U.parent_surname}`:"N/A"})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Email"}),s.jsx("p",{className:"text-sm break-words",children:U.parent_email||"N/A"})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Primary Phone"}),s.jsx("p",{className:"font-mono text-sm break-words",children:U.parent_phone_no||"N/A"})]}),U.parent_phone_no_two&&(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Secondary Phone"}),s.jsx("p",{className:"font-mono text-sm break-words",children:U.parent_phone_no_two})]})]})})]})}),O&&O.comments&&O.comments.length>0&&s.jsx(n.E.div,{variants:M,className:"mt-6",children:(0,s.jsxs)(_.Zb,{children:[(0,s.jsxs)(_.Ol,{children:[(0,s.jsxs)(_.ll,{className:"flex items-center gap-2",children:[s.jsx(w.Z,{className:"h-5 w-5"}),"Messages from Staff"]}),s.jsx(_.SZ,{children:"Comments and messages sent to you by staff members"})]}),s.jsx(_.aY,{children:s.jsx("div",{className:"space-y-4",children:O.comments.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 border rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[s.jsx("div",{className:"flex items-start justify-between gap-4 mb-2",children:s.jsx(k.C,{variant:"outline",className:"capitalize",children:(0,A.li)(e.status)})}),s.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap break-words",children:e.raw_comment})]},t))})})]})})]})}},43273:(e,t,r)=>{"use strict";r.d(t,{Cd:()=>c,X:()=>o,bZ:()=>l});var s=r(10326),a=r(17577),n=r(79360),i=r(77863);let d=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef(({className:e,variant:t,...r},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,i.cn)(d({variant:t}),e),...r}));l.displayName="Alert";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));c.displayName="AlertTitle";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...t}));o.displayName="AlertDescription"},567:(e,t,r)=>{"use strict";r.d(t,{C:()=>d});var s=r(10326);r(17577);var a=r(79360),n=r(77863);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,...r}){return s.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},65304:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var s=r(10326),a=r(77863);function n({className:e,...t}){return s.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},35372:(e,t,r)=>{"use strict";r.d(t,{DC:()=>i,NL:()=>s,Ve:()=>l,Y2:()=>n,c4:()=>d});let{useGetCategoriesQuery:s,useGetStudentProfileFromExeatQuery:a,useCreateExeatRequestMutation:n,useGetExeatRequestsQuery:i,useGetExeatRequestDetailsQuery:d,useGetExeatRequestHistoryQuery:l}=r(55415).h.injectEndpoints({endpoints:e=>({getExeatRequests:e.query({query:()=>"/student/exeat-requests",providesTags:["ExeatRequests"]}),getCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e}),getStudentProfileFromExeat:e.query({query:()=>"/me",transformResponse:e=>{if(!e.success||!e.data?.profile)throw Error("Failed to load profile data");return e.data}}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequestHistory:e.query({query:e=>`/student/exeat-requests/${e}/history`,providesTags:["ExeatRequests"]}),getExeatRequestDetails:e.query({query:e=>`/student/exeat-requests/${e}`,providesTags:["ExeatRequests"]})})})},77780:(e,t,r)=>{"use strict";r.d(t,{Kp:()=>d,N3:()=>c,TK:()=>l,h_:()=>s,rm:()=>o});let{useGetStudentProfileQuery:s,useGetExeatCategoriesQuery:a,useCreateExeatRequestMutation:n,useGetExeatRequestsQuery:i,useGetStudentDebtsQuery:d,useInitializePaymentMutation:l,useVerifyPaymentQuery:c,useGetExeatCommentsQuery:o}=r(55415).h.injectEndpoints({endpoints:e=>({getStudentProfile:e.query({query:()=>"/me",transformResponse:e=>e.profile,providesTags:["Profile"]}),getExeatCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e.data.categories,providesTags:["ExeatCategories"]}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequests:e.query({query:()=>"/student/exeat-requests",transformResponse:e=>e.data.requests,providesTags:["ExeatRequests"]}),getStudentDebts:e.query({query:e=>({url:"/student/debts",params:e}),transformResponse:e=>e,providesTags:["StudentDebts"]}),initializePayment:e.mutation({query:({id:e,data:t})=>({url:`/student/debts/${e}/payment-proof`,method:"POST",body:t}),transformResponse:e=>e,invalidatesTags:["StudentDebts"]}),verifyPayment:e.query({query:({id:e,reference:t})=>({url:`/student/debts/${e}/verify-payment-api`,params:{reference:t}}),transformResponse:e=>e,providesTags:["StudentDebts"]}),getExeatComments:e.query({query:()=>"/student/exeat-requests/comments",transformResponse:e=>e,providesTags:["ExeatRequests"]})})})},48272:(e,t,r)=>{"use strict";r.d(t,{li:()=>a,nd:()=>n,z2:()=>s});let s=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200 hover:bg-green-200";case"completed":return"bg-emerald-100 text-emerald-800 border-emerald-200 hover:bg-emerald-200";case"rejected":return"bg-red-100 text-red-800 border-red-200 hover:bg-red-200";case"cmd_review":case"secretary_review":case"dean_review":return"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200";case"parent_consent":return"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200";case"hostel_signin":case"hostel_signout":return"bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200";case"recommendation1":case"recommendation2":case"dean_approval":case"hostel_approval":return"bg-indigo-100 text-indigo-800 border-indigo-200 hover:bg-indigo-200";default:return"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200"}},a=e=>{switch(e){case"pending":return"Awaiting Initial Review";case"cmd_review":return"Medical Director Review";case"secretary_review":return"Secretary Review";case"parent_consent":return"Awaiting Parent Approval";case"dean_review":return"Dean/Deputy Dean Review";case"hostel_signin":return"Ready for Hostel Sign-In";case"hostel_signout":return"Ready for Hostel Sign-Out";case"security_signin":return"Student Away - Awaiting Return";case"security_signout":return"Ready for Security Sign-Out";case"recommendation1":return"Under Initial Review";case"recommendation2":return"Under Final Review";case"dean_approval":return"Awaiting Dean Approval";case"hostel_approval":return"Hostel Processing";case"approved":return"Request Approved";case"rejected":return"Request Not Approved";case"completed":return"Request Completed";default:return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},n=e=>{let t=["reason","destination","departure_date","return_date","comment"];return["admin","dean"].includes(e)?[...t,"parent_surname","parent_othernames","parent_phone_no","parent_phone_no_two","parent_email","preferred_mode_of_contact","category_id","is_medical"]:t}},7324:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`c:\Users\Al Agha\Downloads\project_exeat-master\app\student\exeats\[id]\page.tsx#default`)},44432:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},84028:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},60883:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},85131:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},28834:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},72669:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},65249:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},43533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},26371:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(9664).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[5454,7545,8181,5346,6661],()=>r(81815));module.exports=s})();