(()=>{var e={};e.id=5478,e.ids=[5478],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},36921:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c}),t(43790),t(18011),t(85880),t(96560);var a=t(23191),r=t(88716),l=t(37922),n=t.n(l),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["staff",{children:["history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,43790)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\staff\\history\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,18011)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\staff\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,85880)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\not-found.tsx"]}],o=["c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\staff\\history\\page.tsx"],x="/staff/history/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/staff/history/page",pathname:"/staff/history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},48782:(e,s,t)=>{Promise.resolve().then(t.bind(t,37819))},37819:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(10326),r=t(70787),l=t(33071),n=t(567),i=t(28758),d=t(90772),c=t(54432),o=t(65304),x=t(15940),m=t(90670),h=t(98181),u=t(85131),p=t(22750),j=t(43022),g=t(60883),f=t(65249),N=t(77422),v=t(62173),w=t(14370),b=t(17577),y=t(35047);function _(){let[e,s]=(0,b.useState)(1),[t]=(0,b.useState)(50),[_,C]=(0,b.useState)(""),P=(0,y.useRouter)(),{data:A,isLoading:Z}=(0,r.w9)({page:e,per_page:t}),q=e=>{P.push(`/staff/exeat-requests/completed/${e}`)},k=A?.data?.data||[];A?.data;let D=A?.pagination,z=k.filter(e=>{let s=_.toLowerCase();return e.student.name.toLowerCase().includes(s)||e.student.email.toLowerCase().includes(s)||e.reason.toLowerCase().includes(s)||e.destination.toLowerCase().includes(s)}),S=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase(),M=e=>{try{return(0,h.WU)(new Date(e),"PP")}catch{return e}};return Z?a.jsx("div",{className:"min-h-screen",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx(o.O,{className:"h-8 w-64 mb-2"}),a.jsx(o.O,{className:"h-4 w-96"})]}),(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{children:a.jsx(o.O,{className:"h-6 w-48"})}),a.jsx(l.aY,{children:a.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((e,s)=>a.jsx(o.O,{className:"h-16 w-full"},s))})})]})]})}):a.jsx("div",{className:"min-h-screen",children:(0,a.jsxs)("div",{className:"w-full p-4",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Staff Exeat History"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"View all your completed exeat requests"})]})}),A?.status_summary&&(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[a.jsx(l.Zb,{children:a.jsx(l.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Completed"}),a.jsx("p",{className:"text-2xl font-bold",children:A.status_summary.total_count})]}),a.jsx(u.Z,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(l.Zb,{children:a.jsx(l.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Medical Requests"}),a.jsx("p",{className:"text-2xl font-bold",children:A.status_summary.medical_count})]}),a.jsx(u.Z,{className:"h-8 w-8 text-blue-600"})]})})}),a.jsx(l.Zb,{children:a.jsx(l.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Regular Requests"}),a.jsx("p",{className:"text-2xl font-bold",children:A.status_summary.regular_count})]}),a.jsx(u.Z,{className:"h-8 w-8 text-purple-600"})]})})})]})]}),a.jsx("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(p.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(c.I,{placeholder:"Search by student name, email, reason, or destination...",value:_,onChange:t=>{C(t.target.value),1!==e&&s(1)},className:"pl-10"})]})}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[a.jsx(l.ll,{children:"Completed Exeat Requests"}),a.jsx(l.SZ,{children:D?(0,a.jsxs)(a.Fragment,{children:["Showing ",D.from??0," to ",D.to??0," of ",D.total," completed requests",_&&` (${z.length} match${1!==z.length?"es":""} on this page)`]}):`${z.length} of ${k.length} requests`})]}),(0,a.jsxs)(l.aY,{children:[0===z.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(j.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg font-medium",children:"No completed requests found"}),a.jsx("p",{className:"text-sm",children:"Completed exeat requests will appear here"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"lg:hidden space-y-4",children:z.map(e=>(0,a.jsxs)(l.Zb,{className:"p-4 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>q(e.id),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,a.jsxs)(i.qE,{className:"h-10 w-10 flex-shrink-0",children:[a.jsx(i.F$,{src:e.student.passport?`data:image/jpeg;base64,${e.student.passport}`:"",alt:e.student.name}),a.jsx(i.Q5,{className:"text-xs",children:S(e.student.name)})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-base truncate",children:e.student.name}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.student.email})]})]}),a.jsx(n.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:e.status})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(g.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{children:[M(e.departure_date)," - ",M(e.return_date)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(f.Z,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{children:e.destination})]}),a.jsx("div",{className:"flex items-center gap-2 text-sm",children:a.jsx(n.C,{variant:e.is_medical?"destructive":"default",className:"text-xs",children:e.category})})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:e.reason}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Completed on ",M(e.updated_at)]}),(0,a.jsxs)(d.z,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),q(e.id)},className:"text-xs hover:bg-primary hover:text-primary-foreground transition-colors",children:[a.jsx(N.Z,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]},e.id))}),a.jsx("div",{className:"hidden lg:block",children:(0,a.jsxs)(x.iA,{children:[a.jsx(x.xD,{children:(0,a.jsxs)(x.SC,{children:[a.jsx(x.ss,{children:"Student"}),a.jsx(x.ss,{children:"Category"}),a.jsx(x.ss,{children:"Dates"}),a.jsx(x.ss,{children:"Destination"}),a.jsx(x.ss,{children:"Completed"}),a.jsx(x.ss,{className:"w-[120px]",children:"Actions"})]})}),a.jsx(x.RM,{children:z.map(e=>(0,a.jsxs)(x.SC,{className:"hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>q(e.id),children:[a.jsx(x.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(i.qE,{className:"h-8 w-8",children:[a.jsx(i.F$,{src:e.student.passport?`data:image/jpeg;base64,${e.student.passport}`:"",alt:e.student.name}),a.jsx(i.Q5,{className:"text-xs",children:S(e.student.name)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:e.student.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.student.email})]})]})}),a.jsx(x.pj,{children:a.jsx("div",{className:"flex gap-1",children:a.jsx(n.C,{variant:e.is_medical?"destructive":"default",children:e.category})})}),a.jsx(x.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("p",{children:M(e.departure_date)}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["to ",M(e.return_date)]})]})}),a.jsx(x.pj,{children:e.destination}),a.jsx(x.pj,{className:"text-sm text-muted-foreground",children:M(e.updated_at)}),a.jsx(x.pj,{children:(0,a.jsxs)(d.z,{variant:"outline",size:"sm",onClick:s=>{s.stopPropagation(),q(e.id)},className:"text-xs hover:bg-primary hover:text-primary-foreground transition-colors",children:[a.jsx(N.Z,{className:"h-3 w-3 mr-1"}),"View"]})})]},e.id))})]})})]}),D&&D.last_page>1&&(0,a.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",D.current_page," of ",D.last_page]}),a.jsx(m.tl,{children:(0,a.jsxs)(m.ng,{children:[a.jsx(m.nt,{children:(0,a.jsxs)(d.z,{variant:"ghost",size:"sm",onClick:()=>s(Math.max(1,e-1)),disabled:1===e,className:"gap-1",children:[a.jsx(v.Z,{className:"h-4 w-4"}),"Previous"]})}),(()=>{if(!D)return[];let e=[],s=D.last_page,t=D.current_page;if(s<=7)for(let t=1;t<=s;t++)e.push(t);else{e.push(1),t>3&&e.push("ellipsis");let a=Math.max(2,t-1),r=Math.min(s-1,t+1);for(let s=a;s<=r;s++)e.push(s);t<s-2&&e.push("ellipsis"),e.push(s)}return e})().map((e,t)=>a.jsx(m.nt,{children:"ellipsis"===e?a.jsx(m.Dj,{}):a.jsx(d.z,{variant:e===D.current_page?"outline":"ghost",size:"sm",onClick:()=>s(e),className:"min-w-[40px]",children:e})},t)),a.jsx(m.nt,{children:(0,a.jsxs)(d.z,{variant:"ghost",size:"sm",onClick:()=>s(Math.min(D.last_page,e+1)),disabled:e===D.last_page,className:"gap-1",children:["Next",a.jsx(w.Z,{className:"h-4 w-4"})]})})]})})]})]})]})]})})}},43790:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`c:\Users\Al Agha\Downloads\project_exeat-master\app\staff\history\page.tsx#default`)},85131:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[5454,7545,8181,5346,9384,6726],()=>t(36921));module.exports=a})();