(()=>{var e={};e.id=2249,e.ids=[2249],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},50249:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(2019),t(18011),t(85880),t(96560);var a=t(23191),r=t(88716),l=t(37922),n=t.n(l),i=t(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d=["",{children:["staff",{children:["pending",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2019)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\staff\\pending\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,18011)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\staff\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,85880)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\not-found.tsx"]}],c=["c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\staff\\pending\\page.tsx"],m="/staff/pending/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/staff/pending/page",pathname:"/staff/pending",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},37099:(e,s,t)=>{Promise.resolve().then(t.bind(t,55476))},55476:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(10326),r=t(17577),l=t(35047),n=t(30668),i=t(33071),o=t(567),d=t(90772),c=t(65304),m=t(74926),u=t(91118),x=t(31798),p=t(72662),h=t(35372),f=t(9616),g=t(54432),j=t(34474),y=t(22750),w=t(72669),v=t(65249),b=t(60883);let N=({searchTerm:e,setSearchTerm:s,statusFilter:t,setStatusFilter:l,dateFilter:n,setDateFilter:c,categoryFilter:m,setCategoryFilter:x,onClearFilters:p})=>{let f=e||"all"!==t||"all"!==n||"all"!==m,{data:N}=(0,h.NL)(),_=(0,r.useMemo)(()=>N?.categories||[],[N]);return(0,a.jsxs)(i.Zb,{className:"mb-6",children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2 text-sm sm:text-base",children:[a.jsx(u.Z,{className:"h-5 w-5"}),"Filters & Search"]})}),(0,a.jsxs)(i.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Search"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(g.I,{placeholder:"Search by name, matric no, destination...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Approval Status"}),(0,a.jsxs)(j.Ph,{value:t,onValueChange:l,children:[a.jsx(j.i4,{children:a.jsx(j.ki,{placeholder:"All statuses"})}),(0,a.jsxs)(j.Bw,{children:[a.jsx(j.Ql,{value:"all",children:"All statuses"}),a.jsx(j.Ql,{value:"pending",children:"⏳ Pending Review"}),a.jsx(j.Ql,{value:"medical",children:"\uD83C\uDFE5 Medical Review"}),a.jsx(j.Ql,{value:"dean",children:"\uD83C\uDF93 Dean/Deputy Dean Review"}),a.jsx(j.Ql,{value:"approved",children:"✅ Approved & Ready"}),a.jsx(j.Ql,{value:"active",children:"\uD83D\uDCCD Student Away"}),a.jsx(j.Ql,{value:"rejected",children:"❌ Not Approved"}),a.jsx(j.Ql,{value:"completed",children:"\uD83C\uDF89 Request Completed"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Leave Type"}),(0,a.jsxs)(j.Ph,{value:m,onValueChange:x,children:[a.jsx(j.i4,{children:a.jsx(j.ki,{placeholder:"All leave types"})}),(0,a.jsxs)(j.Bw,{children:[a.jsx(j.Ql,{value:"all",children:"All leave types"}),_.map(e=>a.jsx(j.Ql,{value:e.name.toLowerCase(),children:e.name.charAt(0).toUpperCase()+e.name.slice(1)},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Request Date"}),(0,a.jsxs)(j.Ph,{value:n,onValueChange:c,children:[a.jsx(j.i4,{children:a.jsx(j.ki,{placeholder:"All time periods"})}),(0,a.jsxs)(j.Bw,{children:[a.jsx(j.Ql,{value:"all",children:"All time periods"}),a.jsx(j.Ql,{value:"today",children:"\uD83D\uDCC5 Today"}),a.jsx(j.Ql,{value:"week",children:"\uD83D\uDCCA This Week"}),a.jsx(j.Ql,{value:"month",children:"\uD83D\uDCC8 This Month"}),a.jsx(j.Ql,{value:"quarter",children:"\uD83D\uDCC9 This Quarter"})]})]})]})]}),f&&a.jsx("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"text-sm font-medium text-slate-700 whitespace-nowrap",children:"\uD83D\uDD0D Active Filters:"}),e&&(0,a.jsxs)(o.C,{variant:"secondary",className:"flex items-center gap-1 bg-blue-100 text-blue-800 text-xs",children:[a.jsx(y.Z,{className:"h-3 w-3"}),'"',e,'"']}),"all"!==t&&(0,a.jsxs)(o.C,{variant:"secondary",className:"flex items-center gap-1 bg-orange-100 text-orange-800 text-xs",children:[a.jsx(w.Z,{className:"h-3 w-3"}),t.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())]}),"all"!==m&&(0,a.jsxs)(o.C,{variant:"secondary",className:"flex items-center gap-1 bg-green-100 text-green-800 text-xs",children:[a.jsx(v.Z,{className:"h-3 w-3"}),m.charAt(0).toUpperCase()+m.slice(1)," Leave"]}),"all"!==n&&(0,a.jsxs)(o.C,{variant:"secondary",className:"flex items-center gap-1 bg-purple-100 text-purple-800 text-xs",children:[a.jsx(b.Z,{className:"h-3 w-3"}),"today"===n?"Today":"week"===n?"This Week":"month"===n?"This Month":"quarter"===n?"This Quarter":n]})]}),a.jsx(d.z,{variant:"outline",size:"sm",onClick:p,className:"border-slate-300 hover:bg-slate-100 self-start sm:self-auto",children:"✕ Clear All"})]})})]})]})};var _=t(69181);function C(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)("all"),[g,j]=(0,r.useState)(""),[y,w]=(0,r.useState)("all"),[v,b]=(0,r.useState)("all"),{profile:C,allRoles:q,canSignStudents:D,approveExeatRequest:R,rejectExeatRequest:A,signStudentOut:E,signStudentIn:k,sendComment:M}=(0,p.iy)(),{data:S,isLoading:P,refetch:Z}=(0,p.b0)(),{data:F}=(0,h.NL)(),T=Object.fromEntries((F?.categories||[]).map(e=>[e.name.toLowerCase(),e.id])),L=(S||[]).filter(e=>{if(!g)return!0;let s=g.toLowerCase();return e.student.fname.toLowerCase().includes(s)||e.student.lname.toLowerCase().includes(s)||e.matric_no.toLowerCase().includes(s)||e.destination.toLowerCase().includes(s)||e.reason.toLowerCase().includes(s)||e.parent_surname.toLowerCase().includes(s)||e.parent_othernames.toLowerCase().includes(s)}).filter(e=>{if("all"!==s){let t=e.status;return({pending:["pending","recommendation1","recommendation2"],medical:["cmd_review"],dean:["secretary_review","parent_consent","dean_review"],approved:["approved","hostel_signin","hostel_signout","security_signout"],active:["signed_out","security_signin"],rejected:["rejected"],completed:["completed"]})[s]?.includes(t)??!0}return!0}).filter(e=>{if("all"===y)return!0;let s=new Date(e.created_at),t=new Date;if("today"===y)return s.toDateString()===t.toDateString();if("week"===y)return(t.getTime()-s.getTime())/864e5<=7;if("month"===y)return s.getFullYear()===t.getFullYear()&&s.getMonth()===t.getMonth();if("quarter"===y){let e=Math.floor(t.getMonth()/3);return s.getFullYear()===t.getFullYear()&&Math.floor(s.getMonth()/3)===e}return!0}).filter(e=>{if("all"===v)return!0;let s=T[v];return!s||e.category_id===s}).sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()),O=async(e,s)=>{try{await R[0]({exeat_request_id:e,comment:s}),Z()}catch(e){throw console.error("Error approving request:",e),e}},Q=async(e,s)=>{try{await A[0]({exeat_request_id:e,comment:s}),Z()}catch(e){throw console.error("Error rejecting request:",e),e}},U=async(e,s)=>{try{await E[0]({exeat_request_id:e,comment:s}),Z()}catch(e){throw console.error("Error signing student out:",e),e}},Y=async(e,s)=>{try{await k[0]({exeat_request_id:e,comment:s}),Z()}catch(e){throw console.error("Error signing student in:",e),e}},z=async(e,s)=>{try{let t=await M[0]({exeat_request_id:e,comment:s});if(console.log("DEBUG: Send comment response:",t),t.error){console.error("Error sending comment:",t.error);let e="Failed to send comment. Please try again.";if("data"in t.error&&t.error.data){let s=t.error.data;if(s.message&&(e=s.message,s.previous_comment)){let t=s.previous_comment;e+=`

Previous comment: "${t.message}" sent by ${t.sent_by} at ${t.sent_at}`}}throw Error(e)}Z()}catch(e){throw console.error("Error sending comment:",e),e}},$=e=>({dean:"Dean of Students",secretary:"Secretary",cmd:"Chief Medical Director",hostel_admin:"Hostel Admin"})[e]||e.replace("_"," ").toUpperCase(),G=g||"all"!==s||"all"!==y||"all"!==v,B=()=>{j(""),t("all"),w("all"),b("all")};return a.jsx(n.i,{requiredRole:"staff",children:(0,a.jsxs)("div",{className:"w-full px-3 sm:px-4 md:px-6 lg:px-8 h-full min-h-screen",children:[(0,a.jsxs)("div",{className:"mb-6 lg:mb-8 pt-4 lg:pt-6",children:[a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4 lg:gap-6",children:a.jsx("div",{className:"space-y-2 flex-1 min-w-0",children:a.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold leading-tight",children:"Pending Exeat Requests"})})}),C?.exeat_roles&&a.jsx("div",{className:"mt-3 lg:mt-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 lg:gap-3",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600 whitespace-nowrap",children:"Your Roles:"}),a.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:C.exeat_roles.map(e=>a.jsx(o.C,{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200 px-2 py-1 text-xs",children:$((0,_.h)(e))},e.id))})]})})]}),a.jsx("div",{className:"mb-4 lg:mb-6",children:a.jsx("div",{className:"w-full",children:a.jsx(N,{searchTerm:g,setSearchTerm:j,statusFilter:s,setStatusFilter:t,dateFilter:y,setDateFilter:w,categoryFilter:v,setCategoryFilter:b,onClearFilters:B})})}),a.jsx("div",{className:"space-y-4 lg:space-y-6",children:P?a.jsx("div",{className:"space-y-3 lg:space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>a.jsx(i.Zb,{className:"bg-white/80 backdrop-blur-sm border-slate-200",children:a.jsx(i.aY,{className:"p-4 lg:p-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(c.O,{className:"h-10 w-10 lg:h-12 lg:w-12 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[a.jsx(c.O,{className:"h-4 w-1/4"}),a.jsx(c.O,{className:"h-4 w-1/2"}),a.jsx(c.O,{className:"h-4 w-3/4"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c.O,{className:"h-6 lg:h-8 w-16 lg:w-20"}),a.jsx(c.O,{className:"h-6 lg:h-8 w-16 lg:w-20"})]})]})})},s))}):L&&L.length>0?(0,a.jsxs)(i.Zb,{className:"bg-white/80 backdrop-blur-sm border-slate-200 shadow-sm",children:[a.jsx(i.Ol,{className:"pb-3 lg:pb-4",children:a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:a.jsx("div",{children:(0,a.jsxs)(i.SZ,{className:"text-slate-600 text-sm",children:["Showing ",L.length," request",1!==L.length?"s":"","all"!==s&&` with status "${s}"`]})})})}),a.jsx(i.aY,{className:"p-0",children:a.jsx(f.h,{requests:L,onApprove:O,onReject:Q,onSignOut:D?U:void 0,onSignIn:D?Y:void 0,onViewDetails:s=>{e.push(`/staff/exeat-requests/${s.id}`)},onSendComment:z})})]}):a.jsx(i.Zb,{className:"bg-white/80 backdrop-blur-sm border-slate-200 shadow-sm",children:(0,a.jsxs)(i.aY,{className:"flex flex-col items-center justify-center py-8 sm:py-12 lg:py-16 px-4",children:[a.jsx("div",{className:"p-3 sm:p-4 bg-slate-100 rounded-full mb-3 sm:mb-4 lg:mb-6",children:a.jsx(m.Z,{className:"h-8 w-8 sm:h-10 sm:w-10 lg:h-12 lg:w-12 text-slate-400"})}),a.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-semibold text-slate-800 mb-2 text-center",children:G?"No requests match your filters":"All caught up! \uD83C\uDF89"}),a.jsx("p",{className:"text-slate-600 text-center max-w-md lg:max-w-lg mb-4 lg:mb-6 text-sm lg:text-base px-2",children:G?"No requests match your current search criteria. Try adjusting your filters to see more results, or clear all filters to view all requests.":"You currently have no exeat requests requiring your attention. All requests have been processed or are being handled by other staff members. New requests will appear here automatically."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[G&&(0,a.jsxs)(d.z,{variant:"outline",onClick:B,className:"border-slate-300 hover:bg-slate-100 w-full sm:w-auto",children:[a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Clear Filters"]}),(0,a.jsxs)(d.z,{variant:"outline",onClick:()=>Z(),className:"border-slate-300 hover:bg-slate-100 w-full sm:w-auto",children:[a.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]})})})]})})}},30668:(e,s,t)=>{"use strict";t.d(s,{i:()=>i});var a=t(10326);t(17577);var r=t(35047),l=t(25842),n=t(16007);function i({children:e,requiredRole:s}){(0,r.useRouter)();let t=(0,l.v9)(n.HF);return!(0,l.v9)(n.vN)||s&&t?.role&&("student"===t.role.toLowerCase()?"student":"staff")!=("student"===s.toLowerCase()?"student":"staff")?null:a.jsx(a.Fragment,{children:e})}},54432:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var a=t(10326),r=t(17577),l=t(77863),n=t(31048);let i=r.forwardRef(({className:e,type:s,label:t,id:i,...o},d)=>{let c=i||r.useId();return(0,a.jsxs)("div",{className:"space-y-1",children:[t&&a.jsx(n._,{htmlFor:c,children:t}),a.jsx("input",{id:c,type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:d,...o})]})});i.displayName="Input"},31048:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var a=t(10326),r=t(17577),l=t(29152),n=t(79360),i=t(77863);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},t)=>a.jsx(l.f,{ref:t,className:(0,i.cn)(o(),e),...s}));d.displayName=l.f.displayName},34474:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>h,Ph:()=>c,Ql:()=>f,i4:()=>u,ki:()=>m});var a=t(10326),r=t(17577),l=t(75334),n=t(14711),i=t(76604),o=t(70744),d=t(77863);let c=l.fC;l.ZA;let m=l.B4,u=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(l.JO,{asChild:!0,children:a.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=l.xz.displayName;let x=r.forwardRef(({className:e,...s},t)=>a.jsx(l.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(i.Z,{className:"h-4 w-4"})}));x.displayName=l.u_.displayName;let p=r.forwardRef(({className:e,...s},t)=>a.jsx(l.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(n.Z,{className:"h-4 w-4"})}));p.displayName=l.$G.displayName;let h=r.forwardRef(({className:e,children:s,position:t="popper",...r},n)=>a.jsx(l.h_,{children:(0,a.jsxs)(l.VY,{ref:n,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(x,{}),a.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(p,{})]})}));h.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let f=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(l.wU,{children:a.jsx(o.Z,{className:"h-4 w-4"})})}),a.jsx(l.eT,{children:s})]}));f.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},65304:(e,s,t)=>{"use strict";t.d(s,{O:()=>l});var a=t(10326),r=t(77863);function l({className:e,...s}){return a.jsx("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",e),...s})}},72662:(e,s,t)=>{"use strict";t.d(s,{b0:()=>o,iy:()=>i});var a=t(17577),r=t(70787),l=t(69181),n=t(48272);let i=()=>{let{data:e,isLoading:s,error:t}=(0,r.b)(),{data:i,isLoading:o}=(0,r.s$)(),d=(0,a.useMemo)(()=>s=>!!(e?.exeat_roles&&e.exeat_roles.map(e=>(0,l.h)(e)).includes(s)),[e]),c=(0,a.useMemo)(()=>e?.exeat_roles&&e.exeat_roles.length>1,[e]),m=(0,a.useMemo)(()=>e?.exeat_roles?.[0]?.role,[e]),u=(0,a.useMemo)(()=>e?.exeat_roles&&e.exeat_roles.length>0?e.exeat_roles.map(e=>e.role):[],[e]),x=(0,a.useMemo)(()=>d("dean")||d("secretary"),[d]),p=(0,a.useMemo)(()=>d("cmd"),[d]),h=(0,a.useMemo)(()=>d("hostel_admin"),[d]),f=(0,a.useMemo)(()=>d("dean"),[d]),[g]=(0,r.mM)(),j=async(e,s)=>{try{let t=[];if(console.log("DEBUG: Window is not defined (server-side rendering)"),!t.some(e=>["admin","dean","deputy_dean"].includes(e)))throw Error("You do not have permission to edit exeat requests");let a=t[0]||"",r=(0,n.nd)(a),l=Object.fromEntries(Object.entries(s).filter(([e])=>r.includes(e)));if(0===Object.keys(l).length)throw Error("No valid fields to update");return await g({exeat_request_id:e,payload:l})}catch(e){throw console.error("DEBUG: Error in editExeatRequestWithAccess:",e),e}};return{profile:(0,a.useMemo)(()=>e||null,[e]),profileLoading:s,profileError:t,statistics:i,statsLoading:o,hasRole:d,hasMultipleRoles:c,primaryRole:m,allRoles:u,canApproveExeat:x,canVetMedical:p,canSignStudents:h,canOverrideApprovals:f,getRoleSpecificRequests:()=>d("cmd")?(0,r.cu)("cmd_review"):d("dean")||d("secretary")?(0,r.Sr)():d("hostel_admin")?(0,r.cu)("approved"):(0,r.Sr)(),approveExeatRequest:(0,r.Vm)(),rejectExeatRequest:(0,r.yH)(),signStudentOut:(0,r.Og)(),signStudentIn:(0,r.Tq)(),sendComment:(0,r.ui)(),editExeatRequest:(0,r.mM)(),editExeatRequestWithAccess:j}},o=e=>{let{hasRole:s}=i(),t=(0,r.Sr)(),a=(0,r.cu)(e||"");return s("cmd")?(0,r.cu)("cmd_review"):e&&"all"!==e?a:t}},35372:(e,s,t)=>{"use strict";t.d(s,{DC:()=>n,NL:()=>a,Ve:()=>o,Y2:()=>l,c4:()=>i});let{useGetCategoriesQuery:a,useGetStudentProfileFromExeatQuery:r,useCreateExeatRequestMutation:l,useGetExeatRequestsQuery:n,useGetExeatRequestDetailsQuery:i,useGetExeatRequestHistoryQuery:o}=t(55415).h.injectEndpoints({endpoints:e=>({getExeatRequests:e.query({query:()=>"/student/exeat-requests",providesTags:["ExeatRequests"]}),getCategories:e.query({query:()=>"/student/exeat-categories",transformResponse:e=>e}),getStudentProfileFromExeat:e.query({query:()=>"/me",transformResponse:e=>{if(!e.success||!e.data?.profile)throw Error("Failed to load profile data");return e.data}}),createExeatRequest:e.mutation({query:e=>({url:"/student/exeat-requests",method:"POST",body:e}),invalidatesTags:["ExeatRequests"]}),getExeatRequestHistory:e.query({query:e=>`/student/exeat-requests/${e}/history`,providesTags:["ExeatRequests"]}),getExeatRequestDetails:e.query({query:e=>`/student/exeat-requests/${e}`,providesTags:["ExeatRequests"]})})})},69181:(e,s,t)=>{"use strict";t.d(s,{h:()=>a});let a=e=>{if(!e)return"Unknown Role";if("string"==typeof e)return e;if("object"==typeof e){if(e.role&&"object"==typeof e.role&&e.role.name)return e.role.name;if(e.name)return e.name;if(e.display_name)return e.display_name}return"Unknown Role"}},2019:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`c:\Users\Al Agha\Downloads\project_exeat-master\app\staff\pending\page.tsx#default`)},60883:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},91118:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},65249:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[5454,7545,8181,6310,260,5346,9384,1507,1508,9616],()=>t(50249));module.exports=a})();