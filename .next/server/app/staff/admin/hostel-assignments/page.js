(()=>{var e={};e.id=8625,e.ids=[8625],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},91179:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),t(93431),t(18011),t(85880),t(96560);var a=t(23191),l=t(88716),r=t(37922),i=t.n(r),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["staff",{children:["admin",{children:["hostel-assignments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,93431)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\staff\\admin\\hostel-assignments\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,18011)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\staff\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,85880)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\not-found.tsx"]}],o=["c:\\Users\\Al Agha\\Downloads\\project_exeat-master\\app\\staff\\admin\\hostel-assignments\\page.tsx"],m="/staff/admin/hostel-assignments/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/staff/admin/hostel-assignments/page",pathname:"/staff/admin/hostel-assignments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},41394:(e,s,t)=>{Promise.resolve().then(t.bind(t,72286))},72286:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>$});var a=t(10326),l=t(17577),r=t(33071),i=t(90772),n=t(567),d=t(54432),c=t(34474),o=t(53540),m=t(85131),x=t(28834),h=t(74926),u=t(71315),f=t(64664),p=t(91118),j=t(22750),g=t(28096),v=t(60883),y=t(23019);let N=(0,t(9664).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var w=t(37084),b=t(98181),Z=t(90434),A=t(46226),k=t(35047),_=t(94215),C=t(60097),P=t(21677);let M=[{value:"all",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function $(){let[e,s]=(0,l.useState)(""),[t,$]=(0,l.useState)("all"),[z,S]=(0,l.useState)(1),[R,O]=(0,l.useState)(15),[T,D]=(0,l.useState)(!1),[U,q]=(0,l.useState)(null),E=(0,k.useRouter)(),{data:F,isLoading:Y,refetch:G}=(0,o.TO)({status:"all"===t?void 0:t,page:z,per_page:R}),{data:L}=(0,o.M0)(),[V]=(0,o.TM)(),[I]=(0,o.O6)(),X=F?.data?.data||[],H=F?.data?.total||0,B=e=>{let s=L?.find(s=>s.id===e);return s?`${s.fname} ${s.lname}`:`Staff ID: ${e}`},Q=X.filter(s=>{let t=e.toLowerCase();return""===e||s.hostel.name.toLowerCase().includes(t)||`${s.staff.fname} ${s.staff.lname}`.toLowerCase().includes(t)||s.staff.fname.toLowerCase().includes(t)||s.staff.lname.toLowerCase().includes(t)}),W=X.filter(e=>"active"===e.status).length,J=X.filter(e=>"inactive"===e.status).length,K=async(e,s)=>{try{await V({id:e,status:s}).unwrap(),(0,_.Am)({title:"Success",description:`Assignment ${"active"===s?"activated":"deactivated"} successfully.`}),G()}catch(e){(0,_.Am)({title:"Error",description:"Failed to update assignment status.",variant:"destructive"})}},ee=e=>{q(e),D(!0)},es=async()=>{if(U)try{await I(U).unwrap(),(0,_.Am)({title:"Success",description:"Assignment removed successfully."}),G()}catch(e){(0,_.Am)({title:"Error",description:"Failed to remove assignment.",variant:"destructive"})}finally{D(!1),q(null)}},et=e=>{switch(e){case"active":return a.jsx(m.Z,{className:"h-4 w-4 text-green-600"});case"inactive":return a.jsx(x.Z,{className:"h-4 w-4 text-red-600"});default:return a.jsx(h.Z,{className:"h-4 w-4 text-yellow-600"})}},ea=e=>{switch(e){case"active":return a.jsx(n.C,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"});case"inactive":return a.jsx(n.C,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Inactive"});default:return a.jsx(n.C,{variant:"outline",children:"Unknown"})}};return(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Hostel Assignments"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage staff assignments to hostels"})]}),a.jsx(i.z,{asChild:!0,className:"w-full sm:w-auto",children:(0,a.jsxs)(Z.default,{href:"/staff/admin/hostel-assignments/create",children:[a.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"New Assignment"]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(r.ll,{className:"text-sm font-medium",children:"Total Assignments"}),a.jsx(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:H}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"All hostel assignments"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(r.ll,{className:"text-sm font-medium",children:"Active Assignments"}),a.jsx(m.Z,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(r.aY,{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:W}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(r.ll,{className:"text-sm font-medium",children:"Inactive Assignments"}),a.jsx(x.Z,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsxs)(r.aY,{children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:J}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently inactive"})]})]})]}),(0,a.jsxs)(r.Zb,{children:[a.jsx(r.Ol,{children:(0,a.jsxs)(r.ll,{className:"flex items-center gap-2",children:[a.jsx(p.Z,{className:"h-5 w-5"}),"Filters"]})}),a.jsx(r.aY,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(d.I,{placeholder:"Search by hostel name or staff name...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]}),a.jsx("div",{className:"w-full",children:(0,a.jsxs)(c.Ph,{value:t,onValueChange:$,children:[a.jsx(c.i4,{children:a.jsx(c.ki,{placeholder:"Filter by status"})}),a.jsx(c.Bw,{children:M.map(e=>a.jsx(c.Ql,{value:e.value,children:e.label},e.value))})]})})]})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[a.jsx(r.ll,{children:"Assignments"}),(0,a.jsxs)(r.SZ,{children:[Q.length," of ",H," assignments"]})]}),a.jsx(r.aY,{children:Y?a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg animate-pulse",children:[a.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),a.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"})]},s))}):0===Q.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(f.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),a.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No assignments found"}),a.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:e||"all"!==t?"Try adjusting your search or filters.":"Get started by creating a new assignment."}),!e&&"all"===t&&a.jsx("div",{className:"mt-6",children:a.jsx(i.z,{asChild:!0,children:(0,a.jsxs)(Z.default,{href:"/staff/admin/hostel-assignments/create",children:[a.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"New Assignment"]})})})]}):a.jsx("div",{className:"space-y-4",children:Q.map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[a.jsx("div",{className:"size-16 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 overflow-hidden",children:e.staff.passport?a.jsx(A.default,{src:`data:image/jpeg;base64,${e.staff.passport}`,alt:`${e.staff.fname} ${e.staff.lname}'s passport`,width:48,height:48,className:"h-full w-full object-contain",unoptimized:!0}):a.jsx(g.Z,{className:"h-6 w-6 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg",children:e.hostel.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[et(e.status),ea(e.status)]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(g.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.staff.fname," ",e.staff.lname]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(v.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Assigned: ",(0,b.WU)(new Date(e.assigned_at),"MMM d, yyyy")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(g.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Assigned by: ",B(e.assigned_by)]})]}),e.notes&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground italic",children:["Note: ",e.notes]})]})]}),a.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto",children:(0,a.jsxs)(C.h_,{children:[a.jsx(C.$F,{asChild:!0,children:a.jsx(i.z,{variant:"ghost",size:"icon",className:"w-full sm:w-auto",children:a.jsx(y.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(C.AW,{align:"end",className:"w-48",children:[(0,a.jsxs)(C.Xi,{onClick:()=>E.push(`/staff/admin/hostel-assignments/hostel/${e.vuna_accomodation_id}/staff`),children:[a.jsx(f.Z,{className:"mr-2 h-4 w-4"}),"View Hostel"]}),(0,a.jsxs)(C.Xi,{onClick:()=>E.push(`/staff/admin/hostel-assignments/${e.id}/edit`),children:[a.jsx(N,{className:"mr-2 h-4 w-4"}),"Edit"]}),a.jsx(C.Xi,{onClick:()=>K(e.id,"active"===e.status?"inactive":"active"),children:"active"===e.status?(0,a.jsxs)(a.Fragment,{children:[a.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Activate"]})}),(0,a.jsxs)(C.Xi,{onClick:()=>ee(e.id),className:"text-destructive",children:[a.jsx(w.Z,{className:"mr-2 h-4 w-4"}),"Remove"]})]})]})})]},e.id))})})]}),a.jsx(P.aR,{open:T,onOpenChange:D,children:(0,a.jsxs)(P._T,{children:[(0,a.jsxs)(P.fY,{children:[a.jsx(P.f$,{children:"Remove Assignment"}),a.jsx(P.yT,{children:"Are you sure you want to remove this hostel assignment? This action cannot be undone."})]}),(0,a.jsxs)(P.xo,{children:[a.jsx(P.le,{children:"Cancel"}),a.jsx(P.OL,{onClick:es,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remove"})]})]})})]})}},34474:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>f,Ph:()=>o,Ql:()=>p,i4:()=>x,ki:()=>m});var a=t(10326),l=t(17577),r=t(75334),i=t(14711),n=t(76604),d=t(70744),c=t(77863);let o=r.fC;r.ZA;let m=r.B4,x=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(r.xz,{ref:l,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(r.JO,{asChild:!0,children:a.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=r.xz.displayName;let h=l.forwardRef(({className:e,...s},t)=>a.jsx(r.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(n.Z,{className:"h-4 w-4"})}));h.displayName=r.u_.displayName;let u=l.forwardRef(({className:e,...s},t)=>a.jsx(r.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(i.Z,{className:"h-4 w-4"})}));u.displayName=r.$G.displayName;let f=l.forwardRef(({className:e,children:s,position:t="popper",...l},i)=>a.jsx(r.h_,{children:(0,a.jsxs)(r.VY,{ref:i,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...l,children:[a.jsx(h,{}),a.jsx(r.l_,{className:(0,c.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(u,{})]})}));f.displayName=r.VY.displayName,l.forwardRef(({className:e,...s},t)=>a.jsx(r.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=r.__.displayName;let p=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(r.ck,{ref:l,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(r.wU,{children:a.jsx(d.Z,{className:"h-4 w-4"})})}),a.jsx(r.eT,{children:s})]}));p.displayName=r.ck.displayName,l.forwardRef(({className:e,...s},t)=>a.jsx(r.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=r.Z0.displayName},93431:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`c:\Users\Al Agha\Downloads\project_exeat-master\app\staff\admin\hostel-assignments\page.tsx#default`)},60883:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},85131:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},23019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},91118:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},71315:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},37084:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(9664).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[5454,7545,8181,6310,260,5346,9384,9989],()=>t(91179));module.exports=a})();