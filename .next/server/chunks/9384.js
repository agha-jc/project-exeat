exports.id=9384,exports.ids=[9384],exports.modules={81878:(e,s,a)=>{Promise.resolve().then(a.bind(a,26400))},26400:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>_});var t=a(10326),r=a(17577),l=a(46226),i=a(25842),n=a(16007),d=a(90434),o=a(35047),c=a(30407),m=a(92599),f=a(43020),x=a(22032),u=a(72669),h=a(10887),p=a(28834),j=a(88090),g=a(43022),N=a(64664),b=a(86747),v=a(193),y=a(24732),w=a(88802),C=a(77863),k=a(90772);function Z({open:e,onClose:s}){let a=(0,o.useRouter)(),[l,Z]=(0,r.useState)(!1),z=(0,i.v9)(n.HF),[S]=(0,m._y)(),R=z?`${z.fname} ${z.lname}`:"Staff Member",A=()=>{Z(!0),s()},F=(0,o.usePathname)(),$=e=>F===e,_=!!(z?.role==="admin"||z?.role==="super-admin"||Array.isArray(z?.roles)&&z.roles.includes("admin"))||!!Array.isArray(z?.exeat_roles)&&z.exeat_roles.some(e=>e?.role?.name==="admin"||e?.role?.display_name?.toLowerCase()==="super admin"),U=({href:e,icon:a,children:r})=>{let l=$(e);return t.jsx(d.default,{href:e,className:"w-full my-2",onClick:()=>{window.innerWidth<1024&&s()},children:(0,t.jsxs)(k.z,{variant:"ghost",className:(0,C.cn)("w-full justify-start",l&&"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground"),children:[t.jsx(a,{className:"mr-2 h-4 w-4"}),r]})})};return(0,t.jsxs)(t.Fragment,{children:[e&&t.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-30 lg:hidden",onClick:s}),(0,t.jsxs)("aside",{className:(0,C.cn)("fixed top-[116px] md:top-14 left-0 z-40 w-[280px] h-[calc(100vh-6.5rem)] md:h-[calc(100vh-3rem)]","bg-white border-r border-border","transition-all duration-300 ease-in-out",!e&&"-translate-x-full","lg:translate-x-0"),children:[e&&t.jsx("div",{className:"absolute -right-12 top-3 lg:hidden",children:t.jsx(k.z,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-full bg-white shadow-md border-border",onClick:s,children:t.jsx(f.Z,{className:"h-4 w-4"})})}),t.jsx("nav",{className:"p-2 overflow-y-auto h-[calc(100%-4rem)]",children:(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx(U,{href:"/staff/dashboard",icon:x.Z,children:"Dashboard"}),t.jsx(U,{href:"/staff/pending",icon:u.Z,children:"Pending Exeats"}),t.jsx(U,{href:"/staff/history",icon:h.Z,children:"Completed Exeats"}),t.jsx(U,{href:"/staff/rejected",icon:p.Z,children:"Rejected Exeats"}),_&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"pt-2",children:t.jsx("p",{className:"text-xs font-medium text-muted-foreground px-2 mb-2 uppercase tracking-wide",children:"Administration"})}),t.jsx(U,{href:"/staff/admin",icon:j.Z,children:"Admin Dashboard"}),t.jsx(U,{href:"/staff/admin/exeats/create",icon:g.Z,children:"Apply Exeat For Student"}),t.jsx(U,{href:"/staff/admin/hostel-assignments",icon:N.Z,children:"Hostel Assignments"}),t.jsx(U,{href:"/staff/admin/student-debts",icon:b.Z,children:"Student Debts"}),t.jsx(U,{href:"/staff/assign-exeat-role",icon:v.Z,children:"Assign Exeat Role"}),t.jsx(U,{href:"/staff/admin/audit-trail",icon:h.Z,children:"Audit Trail"})]}),(0,t.jsxs)("div",{className:"pt-4 mt-4 border-t",children:[t.jsx(U,{href:"/staff/profile",icon:y.Z,children:"Profile"}),(0,t.jsxs)(k.z,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{A(),window.innerWidth<1024&&s()},children:[t.jsx(w.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})})]}),t.jsx(c.Z,{isOpen:l,onClose:()=>Z(!1),userName:R||"User",onLogoutSuccess:()=>{a.replace("/login")}})]})}var z=a(8026),S=a(22750),R=a(28096),A=a(60097),F=a(28758);function $({onMenuClick:e}){let[s,a]=(0,r.useState)(!1),d=(0,i.v9)(n.HF),m=(0,o.useRouter)(),f=d?`${d.fname} ${d.lname}`:"Staff Member",x=d?`${d.fname?.[0]||""}${d.lname?.[0]||""}`.toUpperCase():"ST",u=d?.passport?`data:image/jpeg;base64,${d.passport}`:"",[h,p]=(0,r.useState)(""),j=e=>{e.preventDefault();let s=h.trim();s&&(m.push(`/staff/search?student_id=${encodeURIComponent(s)}`),p(""))};return(0,t.jsxs)("header",{className:"fixed top-0 z-50 w-full border-b bg-white",children:[(0,t.jsxs)("div",{className:"flex h-14 items-center px-4 lg:px-6",children:[(0,t.jsxs)(k.z,{variant:"ghost",size:"icon",className:"lg:hidden mr-2",onClick:e,children:[t.jsx(z.Z,{className:"h-5 w-5"}),t.jsx("span",{className:"sr-only",children:"Toggle menu"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(l.default,{src:"/veritas-logo.png",alt:"Veritas University Logo",width:28,height:28,className:"object-contain",priority:!0}),t.jsx("span",{className:"hidden lg:inline-block text-lg font-semibold text-primary",children:"Veritas University"})]}),t.jsx("div",{className:"hidden lg:block h-4 w-px bg-border mx-2"}),t.jsx("div",{className:"text-sm font-medium",children:"Digital Exeat System - Staff"})]}),(0,t.jsxs)("form",{onSubmit:j,className:"hidden lg:flex items-center gap-2 mr-2 w-[350px] flex-none",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[t.jsx(S.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx("input",{value:h,onChange:e=>p(e.target.value),inputMode:"numeric",placeholder:"Search by Student ID",className:"w-full pl-9 pr-3 py-2 h-9 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/40"})]}),t.jsx(k.z,{type:"submit",size:"sm",disabled:!h,children:"Go"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"hidden sm:block text-sm text-muted-foreground",children:["Welcome, ",d?.fname||"Staff"]}),(0,t.jsxs)(A.h_,{children:[t.jsx(A.$F,{asChild:!0,children:t.jsx(k.z,{variant:"ghost",size:"icon",className:"relative size-12 rounded-full",children:(0,t.jsxs)(F.qE,{className:"size-12",children:[t.jsx(F.F$,{src:u,alt:d?`${d.fname} ${d.lname}`:"User avatar"}),t.jsx(F.Q5,{className:"bg-primary/10 text-primary",children:x})]})})}),(0,t.jsxs)(A.AW,{className:"w-56",align:"end",children:[t.jsx(A.Ju,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[t.jsx("p",{className:"text-sm font-medium leading-none",children:f}),t.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:d?.email})]})}),t.jsx(A.VD,{}),(0,t.jsxs)(A.Qk,{children:[t.jsx(A.Xi,{asChild:!0,children:(0,t.jsxs)("a",{href:"/staff/profile",className:"cursor-pointer",children:[t.jsx(R.Z,{className:"mr-2 h-4 w-4"}),"Profile"]})}),(0,t.jsxs)(A.Xi,{className:"text-destructive focus:text-destructive",onClick:()=>{a(!0)},children:[t.jsx(w.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]})]}),t.jsx("div",{className:"md:hidden px-4 pb-3",children:(0,t.jsxs)("form",{onSubmit:j,className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[t.jsx(S.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx("input",{value:h,onChange:e=>p(e.target.value),inputMode:"numeric",placeholder:"Search by Student ID",className:"w-full pl-9 pr-3 py-2 h-10 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/40"})]}),t.jsx(k.z,{type:"submit",size:"sm",disabled:!h,children:"Go"})]})}),t.jsx(c.Z,{isOpen:s,onClose:()=>a(!1),userName:f,onLogoutSuccess:()=>{m.replace("/login")}})]})}function _({children:e}){let[s,a]=(0,r.useState)(!1);(0,i.v9)(n.HF);let[d,o]=(0,r.useState)({fname:"",lname:"",email:"",image:""}),[c,m]=(0,r.useState)(!0);return c?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/20 backdrop-blur-sm flex flex-col items-center justify-center space-y-4 pointer-events-none",children:[(0,t.jsxs)("div",{className:"relative w-16 h-16",children:[t.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-indigo-600 border-r-transparent border-b-transparent border-l-transparent animate-spin"}),t.jsx("div",{className:"absolute inset-1 flex items-center justify-center",children:t.jsx(l.default,{src:"/vicon.png",alt:"Loading",width:32,height:32,className:"object-contain"})})]}),t.jsx("p",{className:"text-white text-base font-medium drop-shadow",children:"Loading..."})]}):t.jsx("div",{className:"h-screen bg-gray-100 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[t.jsx($,{onMenuClick:()=>a(!0)}),(0,t.jsxs)("div",{className:"flex flex-1 relative overflow-hidden pt-[116px] md:pt-14",children:[t.jsx(Z,{open:s,onClose:()=>a(!1)}),t.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 lg:ml-[280px] bg-gray-100",children:e})]})]})})}},28758:(e,s,a)=>{"use strict";a.d(s,{F$:()=>d,Q5:()=>o,qE:()=>n});var t=a(10326),r=a(17577),l=a(4720),i=a(77863);let n=r.forwardRef(({className:e,...s},a)=>t.jsx(l.fC,{ref:a,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));n.displayName=l.fC.displayName;let d=r.forwardRef(({className:e,...s},a)=>t.jsx(l.Ee,{ref:a,className:(0,i.cn)("aspect-square h-full w-full",e),...s}));d.displayName=l.Ee.displayName;let o=r.forwardRef(({className:e,...s},a)=>t.jsx(l.NY,{ref:a,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));o.displayName=l.NY.displayName},33071:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>n,SZ:()=>o,Zb:()=>i,aY:()=>c,ll:()=>d});var t=a(10326),r=a(17577),l=a(77863);let i=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},60097:(e,s,a)=>{"use strict";a.d(s,{$F:()=>m,AW:()=>x,Ju:()=>h,Qk:()=>f,VD:()=>p,Xi:()=>u,h_:()=>c});var t=a(10326),r=a(17577),l=a(41328),i=a(14370),n=a(70744),d=a(94426),o=a(77863);let c=l.fC,m=l.xz,f=l.ZA;l.Uv,l.Tr,l.Ee,r.forwardRef(({className:e,inset:s,children:a,...r},n)=>(0,t.jsxs)(l.fF,{ref:n,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",e),...r,children:[a,t.jsx(i.Z,{className:"ml-auto h-4 w-4"})]})).displayName=l.fF.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.tu,{ref:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})).displayName=l.tu.displayName;let x=r.forwardRef(({className:e,sideOffset:s=4,...a},r)=>t.jsx(l.Uv,{children:t.jsx(l.VY,{ref:r,sideOffset:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));x.displayName=l.VY.displayName;let u=r.forwardRef(({className:e,inset:s,...a},r)=>t.jsx(l.ck,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",e),...a}));u.displayName=l.ck.displayName,r.forwardRef(({className:e,children:s,checked:a,...r},i)=>(0,t.jsxs)(l.oC,{ref:i,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(l.wU,{children:t.jsx(n.Z,{className:"h-4 w-4"})})}),s]})).displayName=l.oC.displayName,r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.Rk,{ref:r,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(l.wU,{children:t.jsx(d.Z,{className:"h-2 w-2 fill-current"})})}),s]})).displayName=l.Rk.displayName;let h=r.forwardRef(({className:e,inset:s,...a},r)=>t.jsx(l.__,{ref:r,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...a}));h.displayName=l.__.displayName;let p=r.forwardRef(({className:e,...s},a)=>t.jsx(l.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));p.displayName=l.Z0.displayName},30407:(e,s,a)=>{"use strict";a.d(s,{Z:()=>m});var t=a(10326),r=a(17577),l=a(74926),i=a(46721),n=a(25842),d=a(90772),o=a(16007),c=a(92599);function m({isOpen:e,onClose:s,userName:a,onLogoutSuccess:m}){let f=(0,n.I0)(),[x]=(0,c._y)(),[u,h]=(0,r.useState)(!1),[p,j]=(0,r.useState)(""),g=async()=>{h(!0),j("");try{await x().unwrap()}catch(e){console.warn("API logout failed:",e),e?.data?.message!=="No authenticated user."&&console.error("Unexpected logout error:",e)}finally{f((0,o.kS)()),m()}};return e?t.jsx(t.Fragment,{children:t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",onClick:u?void 0:s,children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(l.Z,{className:"h-6 w-6 text-orange-500"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Logout"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to log out?"})]})]}),t.jsx("div",{className:"mb-6",children:(0,t.jsxs)("p",{className:"text-gray-700",children:[t.jsx("span",{className:"font-medium",children:a})," will be logged out of the system."]})}),p&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:t.jsx("p",{className:"text-sm text-red-600",children:p})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[t.jsx(d.z,{variant:"outline",onClick:s,disabled:u,className:"px-4 py-2",children:"Cancel"}),t.jsx(d.z,{onClick:g,disabled:u,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white",children:u?(0,t.jsxs)(t.Fragment,{children:[t.jsx(i.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Logging out..."]}):"Logout"})]})]})})}):null}},18011:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`c:\Users\Al Agha\Downloads\project_exeat-master\app\staff\layout.tsx#default`)}};